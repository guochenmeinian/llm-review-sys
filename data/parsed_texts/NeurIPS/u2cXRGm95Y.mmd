# UukG: Unified Urban Knowledge Graph Dataset for Urban Spatiotemporal Prediction

 Yansong Ning\({}^{1}\), Hao Liu\({}^{1,2}\), Hao Wang\({}^{3}\), Zhenyu Zeng\({}^{3}\), Hui Xiong\({}^{1,2}\)

\({}^{1}\) AI Thrust, The Hong Kong University of Science and Technology (Guangzhou)

\({}^{2}\) CSE, The Hong Kong University of Science and Technology

\({}^{3}\) Alibaba Cloud Intelligence Group

yning092@connect.hkust-gz.edu.cnliuh@ust.hk

cashenry@126.comzhenyu.zzy@alibaba-inc.comxionghui@ust.hk

Corresponding author.

###### Abstract

Accurate Urban SpatioTemporal Prediction (USTP) is of great importance to the development and operation of the smart city. As an emerging building block, multi-sourced urban data are usually integrated as urban knowledge graphs (UrbanKGs) to provide critical knowledge for urban spatiotemporal prediction models. However, existing UrbanKGs are often tailored for specific downstream prediction tasks and are not publicly available, which limits the potential advancement. This paper presents UUKG, the unified urban knowledge graph dataset for knowledge-enhanced urban spatiotemporal predictions. Specifically, we first construct UrbanKGs consisting of millions of triplets for two metropolises by connecting heterogeneous urban entities such as administrative boroughs, POIs, and road segments. Moreover, we conduct qualitative and quantitative analysis on constructed UrbanKGs and uncover diverse high-order structural patterns, such as hierarchies and cycles, that can be leveraged to benefit downstream USTP tasks. To validate and facilitate the use of UrbanKGs, we implement and evaluate 15 KG embedding methods on the KG completion task and integrate the learned KG embeddings into 9 spatiotemporal models for five different USTP tasks. The extensive experimental results not only provide benchmarks of knowledge-enhanced USTP models under different task settings but also highlight the potential of state-of-the-art high-order structure-aware UrbanKG embedding methods. We hope the proposed UUKG fosters research on urban knowledge graphs and broad smart city applications. The dataset and source code are available at https://github.com/usail-hkust/UUKG/.

## 1 Introduction

Urban SpatioTemporal Prediction (USTP) aims to forecast future urban dynamics by simultaneously capturing the spatial and temporal autocorrelations from past observations. Recently, with the development of machine learning technologies and the collection of large-scale urban data, USTP has achieved remarkable progress in various urban predictive tasks, such as traffic management, pollution monitoring, and emergency response [1; 2; 3]. USTP has become an essential service of the modern smart city.

In prior literature, many efforts have been devoted to improving the USTP performance by exploiting latent knowledge from diverse urban data sources [4]. In particular, one commonly used approach is manually extracting features from different datasets to integrate additional information.

For example, Tompson _et al._[5] and Chen _et al._[6] customize urban features from external dataset for crime prediction and bike trip prediction. However, these approaches heavily rely on a deep understanding of the application domain and are labor-intensive. Recently, inspired by the success of the Knowledge Graph (KG) in natural language processing tasks, the urban knowledge graph has been adopted to improve USTP. For instance, Wang _et al._[7] construct a dedicated spatiotemporal knowledge graph by regarding trajectory and timestamp as entities to improve trajectory prediction. Liu _et al._[8] construct user check-in relations to help mobility prediction. However, existing UrbanKGs are **task-specific and none of them is publicly available**, which discourages researchers from adopting it for their own work and thus limits the flourishing of knowledge-enhanced urban spatiotemporal prediction.

Therefore, an open-sourced and multifaceted urban knowledge graph dataset compatible with various USTP tasks is necessary to be proposed. It is a non-trivial problem due to the following two challenges. (1) _How to construct unified urban knowledge graphs?_ The urban data collected from different devices and providers describe the urban system from different aspects and granularities. They are usually disjoint datasets with different spatiotemporal ranges, which cannot be directly joint utilized for USTP. It is appealing to extract and align heterogeneous urban knowledge in a **unified graph organization** to satisfy diverse downstream USTP requirements. (2) _How to preserve complicated structural urban knowledge?_ Existing UrbanKG-driven USTP approaches simply adopt general KG embedding methods or design complex task-specific module to project symbolic entities and relations into low-dimensional embeddings, which **fails to preserve unique structural patterns** in the urban knowledge graph. As illustrated in Figure 2, the urban knowledge graph includes diverse structures such as hierarchy and cycle. It is crucial to capture such high-order semantic knowledge to empower downstream spatiotemporal prediction tasks.

To address the aforementioned challenges, in this study, we present an Unified Urban Knowledge Graph (UUKG) dataset for knowledge-enhanced urban spatiotemporal predictions. Figure 1 illustrates the workflow of UUKG construction. For a given city, we first construct an Urban Knowledge Graph (UrbanKG) from multi-sourced urban data. By extracting and organizing entities (_e.g._, POIs, road segments, _etc._) into a multi-relational heterogeneous graph, UrbanKG encodes various high-order structural patterns in a unified configuration (_i.e._, a multi-scale spatial hierarchy), which facilitates joint processing for various downstream USTP tasks. Moreover, we **qualitatively and quantitatively analyze these diverse high-order structures** (_i.e._, hierarchies and cycles in Figure 2) to guide us in using tailored KG embedding methods to derive effective and generalizable knowledge representations. By learning **structure-aware embeddings** of entities and relations using state-of-art non-Euclidean space embedding models (_e.g._, modeling hierarchies in hyperbolic space and capturing cycles in spherical space), the high-order structure information could be preserved in a proper way.

Finally, we conduct comprehensive experiments to benchmark diverse urban tasks, including the UrbanKG completion task, three urban flow prediction tasks, and two urban event prediction tasks. The empirical studies not only validate the effectiveness of the unified urban knowledge graph for improving various USTP tasks, but also uncover the high-order structures within UrbanKG, with proper modeling, can further strengthen the urban spatiotemporal prediction performance.

Our contributions are summarized as follows:

* We propose UUKG, **the first open-source UrbanKG dataset** for knowledge-enhanced urban spatiotemporal predictions. As a pilot study, we envision our experiences and results offering exciting opportunities to advance previous USTP methods.
* We demonstrate **the importance of urban high-order structure modeling** for urban knowledge representation and investigate to use structure-aware KG embedding methods to capture them effectively.
* Extensive experiments on KG completion and five USTP tasks demonstrate the effectiveness of the constructed UrbanKG and verify modeling high-order structures is beneficial to urban spatiotemporal prediction.

Figure 1: The generation process of UUKG.

[MISSING_PAGE_FAIL:3]

defined as \(\mathcal{F}=\{\langle h,r,t\rangle\mid h,t\in\mathcal{E},r\in\mathcal{R}\}\), where each triplet \(\langle h,r,t\rangle\) describes that head entity \(h\) is connected with tail entity \(t\) via relation \(r\). For example, \(\langle\)Queen, Nearby, Brooklyn\(\rangle\) represents the fact that Queen and Brooklyn are geographically adjacent._

The UrbanKG encodes diverse urban semantic knowledge such as the multi-level spatial adjacency (_e.g._, the Hammels area in Queens borough) and ontology (_e.g._, category of POIs and roads). We detail the entity and relation extraction below.

#### 2.2.1 Entity Extraction

We extract 8 types of entities for UrbanKG: (1) **Administrative Borough (Borough).** Borough describes high-level administrative boundaries of a city. For example, New York has five boroughs: Queen, Bronx, Brooklyn, Manhattan, and Staten Island. (2) **Functional Area (Area).** Area refers to the subdivision of a city according to its function, such as residential, industrial, and commercial areas. (3) **Point-Of-Interest (POI).** A POI is a basic functional unit and venue. For example, cinemas and hospitals are two common types of POIs and they are the places people often check in. (4) **Road Segment (Road).** Road is the key element in the city and it forms the traffic network, which provides a reference and basis for human mobility. (5) **Road Junction (Junction).** Junction is where two or more road segments intersect. It is important for the urban road network as they have a great impact on traffic capacity and safety. (6) **POI Category (PC).** POI category describes the property and function of POI, such as finance, catering and so on. We define 15 categories of POI including finance, parking area, shopping, catering, and so on. (7) **Road Category (RC).** Road category describes the features of the road segment, such as motorway, trunk and so on. We preserve the six-types of most frequent road segments including motorway (expressway or river-crossing tunnels), primary traffic road, secondary traffic road, tertiary traffic road, residential traffic road, and trunk (branch roads such as expressway outbound bypass roads). (8) **Junction Category (JC).** Junction category helps distinguish several special types of road junctions, such as roundabout. We keep five types of road junction including motorway junction (road junction in expressway or river-crossing tunnel), traffic signal (road junction having traffic light), turning circle (road junction which is a roundabout), stop (road junction having stop signal) and crossing (road junction with no special type).

We report the detailed statistics of entities in Appendix A.1.

#### 2.2.2 Relation Construction

As shown in Table 2, we define 13 relations for UrbanKG:

\begin{table}
\begin{tabular}{c|c|c|c|c|c|c|c} \hline Relation & Symmetric & Head \& Tail Entity & Abhove. & Relation & Symmetric & Head \& Tail Entity & Abhove. \\ \hline POI Locates at Area & \(\times\) & (POI, Area) & PLA & Junction Belong to Road & \(\times\) & (Junction, Borough) & JBR \\ Road Locates at Area & \(\times\) & (Road, Area) & RLA &borough Nearby Brough & ✓ & (Brough,borough) & BNB \\ Junction Locates at Area & \(\times\) & (Junction, Area) & RLA & Area Nearby Area & ✓ & (Area, Area) & ANA \\ PQI Belongs to Borough & \(\times\) & (POI, Borough) & PBB & POH Has Pool Category & \(\times\) & (POI, RC) & PIPC \\ Road Belong to Borough & \(\times\) & (Road, Borough) & RBB & Road Has Pool Category & \(\times\) & (Road, RC) & RIPC \\ Junction Belong to Borough & \(\times\) & (Junction, Borough) & JBB & Junction Has Junction Category & \(\times\) & (Junction, JC) & JHPC \\ Area Locates at Borough & \(\times\) & (Area, Borough) & ALB & - & - & - & - \\ \hline \end{tabular}
\end{table}
Table 2: Major relations in UrbanKG.

Figure 2: An illustrative example of the urban knowledge graph with diverse hierarchical and cyclic structure. There are four types of entities (Borough, Area, POI and POI Category (PC)) and five types of relations (BNB, ALB, ANA, PLA and PHPC).

Geographic Inclusion.This type of relation describes the geographical inclusion relations between entities. We extract 5 geographical inclusion relations for UrbanKG: _(1) POI/Road/Junction Locates at Area (PLA/RLA/JLA)_. Through these relations, we can obtain the fact between Area and POI/Road/Junction. For example, triplet \(\langle POI\)_32, PLA, Area 75_\(\rangle\) indicates that POI 32 is located in Area 75. _(2) POI/Road/Junction Belongs to Borough (PBB/RBB/JBB)_. Through these relations, we can obtain the fact between Borough and POI/Road/Junction. _(3) Area Locates at Borough (ALB)_. Through this relation, we can obtain the geographic inclusion relations between Area and Borough. For example, triplet \(\langle Area\)_75, ALB, Borough 1_\(\rangle\) explains that Area 75 belongs to Borough 1. _(4) Junction Belongs to Road (JBR)_. Through this relation, we can describe the Junction on which Road, thus could preserve the topology of the road network.

Geographic Aadjacency.This type of relation describes the geographical adjacency relations between entities. We extract 2 relations of this type for UrbanKG: _(1) Borough Nearby Borough (BNB)_. Through this relation, we can obtain the adjacency fact between Boroughs. _(2) Area Nearby Area (ANA)_. Through this relation, we describe the adjacency between Areas.

Category.This type of relation connects entities to the category they belong to. We extract three category relations for UrbanKG: _(1) POI Has POI Category (PHPC). (2) Road Has Road Category (RHRC). (3) Junction Has Junction Category (JHJC)_. For example, triplet \(\langle POI\)_32, PHPC, PC 4_\(\rangle\) indicates POI 32 belongs to the category PC 4.

#### 2.2.3 UrbanKG Management

Following the above process, we obtain UrbanKGs for two large cities as shown in Table 3, _i.e._, New York (NYC) and Chicago (CHI). To serve the large-scale knowledge graph with millions of triplets, we adopt Neo4j, a graph database system, to store, query, and update the UrbanKG. The data privacy issue is critical in smart city applications. In this study, the dataset we use doesn't include any user-level information. However, recent studies prove that sensitive individual information can be inferred from a few location check-ins [15]. Thus, we round the coordinate of each record to 100 meters to avoid potential information leakage when incorporating UrbanKG with other urban spatio-temporal data.

### Visualization and Structural Analysis

As shown in Figure 3, the multi-level UrbanKG contains entities providing administrative division information (Borough & Area), traffic topology (Road network), and urban function distribution (POI), and they together form rich semantic information (_i.e._, High-order hierarchy and high-order cycle) about the city.

High-order Hierarchy.Hierarchical information is ubiquitous in capturing knowledge from KG [16, 17, 18] since much knowledge is commonly organized hierarchically. For example, the hierarchy (_Borough->Area->POI->PC_) in Figure 2 organizes urban knowledge in a hierarchical way. Embracing and modeling such hierarchy empowers to uncover deeper semantics, _e.g._, we can infer the main function of an area from the POI quantities and categories in this area. As shown in Table 3, we also quantitatively find the hyperboliticities [19] of two UrbanKGs are zero, which means that UrbanKGs

\begin{table}
\begin{tabular}{c|c c c c c c c} \hline Dataset & \# Entity & \# Relation & \# Triplet & \# Train & \# Valid & \# Test & \# Cycle & \# Hyperbelicity \\ \hline NYC & 236,287 & 13 & 930,240 & 837.216 & 46,512 & 46,512 & 1,090,884 & \(\delta=0\) \\ CHI & 140,602 & 13 & 564,400 & 507,960 & 28,220 & 28,220 & 532,108 & \(\delta=0\) \\ \hline \end{tabular}
\end{table}
Table 3: Statistics of two UrbanKGs. We report graph hyperbolicity values \(\delta\) (always greater than or equal to zero while lower means more hierarchical) and the number of cycles.

Figure 3: An illustrative visualization of the four UrbanKG entities in NYC and CHI.

are not significantly different from a tree in terms of their geometric properties [20; 21]. Thus they are suitable to be represented in hyperbolic space [22; 19], where hierarchies can be losslessly embedded.

**High-order Cycle.** Cycle modeling is beneficial to improve knowledge representation [23; 24; 25] as it implies rich semantics of graphs. We find their existence in constructed UrbanKG by analyzing the topological structure. For example, the homogeneous cycle and heterogeneous cycle in Figure 2 uncover _Borough_ geographic semantics and the geographic semantics of _Area_ and _Borough_, respectively. Moreover, Table 3 counts the number of cycles in the two UrbanKG to further verify our analysis. Unlike hierarchy, these cycles are suitable to be modeled in spherical space [22; 26].

The qualitative and quantitative analysis reveal diverse high-order structural patterns in UrbanKG, and thus inspires us to leverage state-of-the-art high-order structure-aware knowledge graph embedding methods to extract tailored and comprehensive urban knowledge. For instance, UrbanKG can be embedded into hyperbolic space to capture hierarchies or into spherical space to model cycles.

## 3 Structure-aware UrbanKG Embedding

This section investigates the impact of different structure-aware embedding methods (_e.g._, the hyperbolic space embedding module to capture hierarchy) on UrbanKG representation learning. We first give problem formulation of UrbanKG embedding and introduce how to utilize structure-aware embedding methods to represent those high-order structures within UrbanKG.

### Problem Formulation

Given the constructed UrbanKG \(\mathcal{G}=(\mathcal{E},\mathcal{R},\mathcal{F})\), we aim to learn low-dimensional entity embeddings \(e_{\mathcal{E}}\) and relation embeddings \(e_{\mathcal{R}}\), so that diverse high-order structure knowledge can be preserved to benefit various downstream USTP tasks.

### Experimental Setup

We compare the performance gap of different structure-aware knowledge graph embedding methods to investigate which approaches are suitable for modeling the unique structures in UrbanKG. The quality of UrbanKG embedding is evaluated using the link prediction task [27], which aims to predict the missing head or tail entity for a triplet \(\langle h,r,t\rangle\). For each UrbanKG in Table 3, we follow standard data augmentation protocol [28] by adding inverse relations.

**Evaluation Metrics.** We report two popular metrics: (1) Mean reciprocal rank (MRR), the mean of inverse of correct entity ranking [29]. (2) Hits@K (K=1,3,10), the percentage of correct entities in top-K ranked entities [30; 31]. Note we filter out true triplets appearing in the training set during evaluation [30], because predicting a low rank for those triplets should not be penalized.

**Methods.** We utilize classical Euclidean methods as baselines and choose state-of-art structure-aware non-Euclidean approaches as backbones.

* **Euclidean Models**: (1) TransE [30] is a classical translational model; (2) DisMult [32] is a matrix factorization model; (3) ComplEx [33] is an extension of DisMult in complex space; (4) RotatE [34] is a rotation-based method in complex space; (5) MuRE [16] is a translational distance method with a diagonal relational matrix. (6) TuckER [35] is a tensor decomposition method. (7) QuatE [36] is a hypercomplex space embedding method.
* **Non-Euclidean Models**: (1) MuRP/MuRS [16] are hyperbolic or spherical model with diagonal relational matrix; (2) RotH/RefH [17] are hyperbolic embedding method with rotation or reelection. (3) AttH [17] is a hyperbolic embedding method combining rotation and reflection; (4) ConE [18] is a hyperbolic embedding method with transformation between hyperbolic cone; (5) M2GNN5[26] is a GNN-based product space embedding model which can model cycles and hierarchies at the same time. (6) GIE [37] is a product space model considering geometry interaction. Footnote 5: Due to the large scale of our UrbanKG, we didn’t perform Graph Neural Updater when reproducing.

**Implement Details.** We implement all models using PyTorch. All experiments are conducted on eight NVIDIA RTX 3090 GPUs. The negative sampling size is fixed to 50. We conduct hyperparameters grid search by early stop on the validation sets and we report details in Appendix A.2.

[MISSING_PAGE_FAIL:7]

**Taxi Service Prediction.** Taxi service prediction aims to predict future taxi inflow and outflow based on the historical taxi service. Following existing studies [38], we split the city into \(N\) disjoint areas, and connect the spatial network \(G\) based on area adjacency. Let \(C_{taxi}\) denote the two-dimensional feature vector (inflow and outflow). We incorporate the UrbanKG by concatenating the area embeddings with the taxi flow features, \(X_{G}^{(t)}\in\mathbb{R}^{N\times C_{taxi^{\prime}}}\), where \(C_{taxi^{\prime}}=e_{Area}\,||\,C_{taxi}\) and \(||\) denotes the concatenation operation.

**Bike Trip Prediction.** Bike trip prediction aims to predict future inflow and outflow based on the historical bike trip. We sample \(N\) roads and connect the spatial network \(G\) based on road adjacency [13]. Let \(C_{bike}\) represent the two-dimensional feature vector (inflow and outflow). The road embedding \(e_{Road}\) is concatenated with it for UrbanKG fusion, \(X_{G}^{(t)}\in\mathbb{R}^{N\times C_{bike^{\prime}}}\), where \(C_{bike^{\prime}}=e_{Road}\,||\,C_{bike}\).

**Human Mobility Prediction.** Human mobility prediction aims to predict future human inflow and outflow based on historical human mobility. Following existing studies [39], We choose \(N\) POIs and obtain the spatial network \(G\) based on their adjacency. Let \(C_{human}\) denote the two-dimensional feature vector (inflow and outflow). We integrate the UrbanKG by concatenating human mobility flow features with POI embedding, \(X_{G}^{(t)}\in\mathbb{R}^{N\times C_{human^{\prime}}}\), where \(C_{human^{\prime}}=e_{POI}\,||\,C_{human}\).

**Crime Prediction.** Crime prediction is a binary prediction task based on the observation of historical crime events. Following existing studies [40], we split the city into \(N\) disjoint areas and connect the spatial network \(G\) according to area adjacency. Let \(C_{crime}\) denote the label of whether the crime occurs. We concatenate the Area embedding \(e_{Area}\) with crime feature, \(X_{G}^{(t)}\in\mathbb{R}^{N\times C_{crime^{\prime}}}\), where \(C_{crime^{\prime}}=e_{Area}\,||\,C_{crime}\).

**311 Service Prediction.** 311 service prediction [41] is also a binary prediction task based on the observation of historical 311 complaint events. We obtain the spatial network \(G\) in the same way as crime prediction. Let \(C_{service}\) denote the label of the 311 complaint occurrence. We concatenate the Area embedding \(e_{Area}\) with its feature, \(X_{G}^{(t)}\in\mathbb{R}^{N\times C_{service^{\prime}}}\), where \(C_{service^{\prime}}=e_{Area}\,||\,C_{service}\).

### Experimental Setup

The result in Table 4 indicates that structure-aware non-Euclidean space embedding models can generate a better urban knowledge representation compared with Euclidean methods. To further verify modeling those high-order structures in Section 2.3 could enhance USTP tasks, we compare performance gaps for USTP tasks across different prediction time steps (3, 6, and 9) when using embeddings derived from different spaces. Next, we inject the embeddings from the space that yielded the greatest improvement into all downstream tasks and USTP models to confirm their benefits.

**Data Description.** The data statistics of five datasets are summarized in Table 5, and we provide the details of each dataset in Appendix A.3.

**Evaluation Metrics.** We utilize MAE and RMSE for regression tasks for evaluation [42] and use Micro-F1 and Macro-F1 [43] for classification tasks for evaluation.

**Methods.** We compare our approach with the following 9 methods: (1) Gate Recurrent Units (GRU) [44]; (2) Auto-Encoder (AE) [45]; (3) Long Short-Term Memory (LSTM) [46]; (4) SpatioTemporal Graph Convolution Network (STGCN) [47]; (5) Attention Based Spatial-Temporal Graph Convolutional Networks (ASTGCN) [48]; (6) Temporal Graph Convolutional Network (TGCN) [49]; (7) Multivariate Time Graph Neural Networks (MTGNN) [50]; (8) Adaptive Graph Convolutional Recurrent Network (AGCRN) [51]; (9) Hierarchical Graph Convolution Networks (HGCN) [52]. We incorporate UrbanKG embeddings from different spaces with USTP models as our approach, such as ASTGCN w/P and P denotes embedding from product space.

**Implement Details.** We split data with a ratio of 7:1:2 into training sets, validation sets and test sets. We use historical 12 time steps to predict the future 1 to 12 time steps. We provide implement details and more detailed results in Appendix A.4.

### Results

**Comparison of UrbanKG Embedding Space Variants.** As depicted in Figure 4, we observe that the UrbanKG embeddings could enhance USTP tasks regardless of which spaces they come from.

[MISSING_PAGE_FAIL:9]

improve applications in various domains. For example, CKGG [53], OpenBG [54], BioKG [55] and recent proposed ProteinKG25 [56] are used for education, business, biomedical and protein research field respectively. However, there is still no open-source knowledge graph for urban spatiotemporal prediction tasks in the urban computing field.

**Knowledge Graph Embedding**. Knowledge graph embedding aims to project entities and relations into low-dimensional vectors, which has been widely used for various KG-based applications. Overall, the knowledge graph embedding method can be categorized into two classes, the Euclidean embedding method and the non-Euclidean embedding method. The Euclidean embedding method derives KG embeddings in the Euclidean space. For example, TransE [30], TransH [57], TransR [58], RESCAL [59], DistMult [32], TuckER [35] and ConvE [60] utilize translation, matrix decomposition, or neural network to model entities and relations and derive embeddings. The non-Euclidean embedding method aims to capture more complicated structures in the latent space. For example, MuRP [16], AttH [17], ConE [18] and UltraE [61] model hierarchies in the hyperbolic or ultrahyperbolic space. Recently, several mixed curvature embedding methods [26; 37; 62] have been proposed to simultaneously encode diverse structures (_e.g._, hierarchies and cycles) in a product space (_i.e._, products of constant-curvature spaces). The above structure-aware non-Euclidean methods show great potential for modeling various high-order structures in UrbanKG.

**Knowledge-enhanced Urban Spatiotemporal Prediction**. Knowledge graph has been proven useful in various urban tasks, such as traffic flow prediction [63; 64; 65; 66], mobility prediction [7; 67; 68], site selection [69], city profiling [70; 71; 72; 73] and so on [74]. Their common approach involves manually constructing a UrbanKG, and then obtaining embeddings using classical methods like TransE [30] or TuckER [35]. Although some very recent methods [70; 71; 72] design task-relevant module to capture more granular urban knowledge, their UrbanKGs are still designed for specific tasks and are publicly not available, which discourages researchers from adopting it for their own work as building an UrbanKG from scratch is time-consuming and labor-intensive. In fact, several recent works [75; 8] are striving towards this problem. However, they only describe a UrbanKG construction scheme or system but do not offer an open-source UrbanKG.

## 6 Conclusion and Limitation

In this work, we proposed UUKG, a unified dataset for knowledge-enhanced urban spatiotemporal prediction. To the best of our knowledge, UUKG is the first open-source urban knowledge graph dataset compatible with various aligned USTP tasks in the urban computing field. Extensive experimental results demonstrate the universal advancement of UUKG in improving diverse USTP tasks. Additionally, we also prove the benefits of adopting state-of-art structure-aware UrbanKG embedding methods to further leverage rich high-order structures in UUKG.

Our work provides a unified UrbanKG construction framework but it has limitations in terms of the dataset generalizability, as all experiments were conducted in two US metropolises. In addition, we only consider concatenation operation for embedding fusion. It will be an interesting topic that how to suitably incorporate the learned embeddings to further enhance the performance of the urban spatiotemporal prediction. Despite the above limitations, we hope the constructed dataset can foster more extensive urban knowledge graph research and broad smart city application.

## 7 Maintenance Plan and Future Work

To ensure ease of access and future maintenance, the dataset and models evaluated in our paper are hosted on websites and cloud-based storage platforms. Specifically, we have created the UUKG homepage including detailed dataset descriptions and the evaluation code. The full dataset is available at Google Drive.

As an emerging building block, urban knowledge graph provides critical knowledge for urban spatiotemporal prediction models. Inevitably, more dataset, benchmarks and tools will be needed to facilitate its potential achievement. Therefore, we plan to continuously update UUKG by adding new urban entities derived from different data sources, new downstream tasks, and more friendly data usage toolkits and model interfaces. UUKG currently only contains the urban structural dataset for five types of USTP tasks. In the future, we will derive extra multi-modal data (_e.g._, images, reviews) to enrich the UrbanKG and introduce more USTP tasks (_e.g._, trajectory prediction and site selection).

## Acknowledgments and Disclosure of Funding

This research was supported in part by the National Natural Science Foundation of China under Grant No.62102110, the Alibaba Innovative Research Program (AIR). We appreciate the guidance provided by the team of Mr. Wang Qing, who is the Regional General Manager of Alibaba Cloud, in the Chongqing City Brain project.

## References

* [1] Fangzhou Sun, Abhishek Dubey, and Jules White. Dxnat--deep neural networks for explaining non-recurring traffic congestion. In _2017 IEEE International Conference on Big Data (IEEE BigData 2017), Boston, MA, USA, December 11-14, 2017_, pages 2141-2150, 2017.
* [2] Weiyu Cheng, Yanyan Shen, Yanmin Zhu, and Linpeng Huang. A neural attention model for urban air quality inference: Learning the weights of monitoring stations. In _Proceedings of the Thirty-Second AAAI Conference on Artificial Intelligence, AAAI 2018, USA, February 2-7, 2018_, pages 2151-2158, 2018.
* [3] Quanjun Chen, Xuan Song, Harutoshi Yamada, and Ryosuke Shibasaki. Learning deep representation from big and heterogeneous data for traffic accident inference. In _Proceedings of the Thirtieth AAAI Conference on Artificial Intelligence, February 12-17, 2016, Phoenix, Arizona, USA_, pages 338-344, 2016.
* [4] Xu Geng, Yilun Jin, Zhengfei Zheng, Yu Yang, Yexin Li, Han Tian, Peibo Duan, Leye Wang, Jiannong Cao, Hai Yang, et al. Citynet: A multi-city multi-modal dataset for smart city applications. _arXiv preprint arXiv:2106.15802_, 2021.
* [5] Lisa Tompson, Shane D. Johnson, Matthew P. J. Ashby, Chloe Perkins, and Phil Edwards. Uk open source crime data: accuracy and possibilities for research. _Cartography and Geographic Information Science_, pages 111-97, 2015.
* [6] Longbiao Chen, Daqing Zhang, Gang Pan, Xiaojuan Ma, Dingqi Yang, Kostadin Kushlev, Wangsheng Zhang, and Shijian Li. Bike sharing station placement leveraging heterogeneous urban open data. In _Proceedings of the 2015 ACM International Joint Conference on Pervasive and Ubiquitous Computing, UbiComp 2015, Osaka, Japan, September 7-11, 2015_, pages 571-575, 2015.
* [7] Huandong Wang, Qiaohong Yu, Yu Liu, Depeng Jin, and Yong Li. Spatio-temporal urban knowledge graph enabled mobility prediction. _Proc. ACM Interact. Mob. Wearable Ubiquitous Technol._, pages 184:1-184:24, 2021.
* [8] Yu Liu, Jingtao Ding, and Yong Li. Developing knowledge graph based system for urban computing. In _Proceedings of the 1st ACM SIGSPATIAL International Workshop on Geospatial Knowledge Graphs_, pages 3-7, 2022.
* [9] Jintao Ke, Hai Yang, Hongyu Zheng, Xiqun Chen, Yitian Jia, Pinghua Gong, and Jieping Ye. Hexagon-based convolutional neural network for supply-demand forecasting of ride-sourcing services. _IEEE Trans. Intell. Transp. Syst._, pages 4160-4173, 2019.
* November 3, 2016_, pages 92:1-92:4, 2016.
* [11] Honglei Ren, You Song, Jingwen Wang, Yucheng Hu, and Jinzhi Lei. A deep learning approach to the citywide traffic accident risk prediction. In _21st International Conference on Intelligent Transportation Systems, ITSC 2018, Maui, HI, USA, November 4-7, 2018_, pages 3346-3351, 2017.
* [12] Xiaolei Ma, Haiyang Yu, Yunpeng Wang, and Yinhai Wang. Large-scale transportation network congestion evolution prediction using deep learning theory. _PloS one_, page e0119044, 2015.
* [13] Mingqi Lv, Zhaoxiong Hong, Ling Chen, Tieming Chen, Tiantian Zhu, and Shouling Ji. Temporal multi-graph convolutional network for traffic flow prediction. _IEEE Transactions on Intelligent Transportation Systems_, pages 3337-3348, 2020.
* [14] Hongjian Wang, Daniel Kifer, Corina Graif, and Zhenhui Jessie Li. Crime rate inference with big data. In _Proceedings of the 22nd ACM SIGKDD International Conference on Knowledge Discovery and Data Mining, San Francisco, CA, USA, August 13-17, 2016_, pages 635-644, 2016.

* Xu et al. [2022] Shuai Xu, Xiaoming Fu, Dechang Pi, and Zhuo Ma. Inferring individual human mobility from sparse check-in data: a temporal-context-aware approach. _IEEE Transactions on Computational Social Systems_, pages 1-12, 2022.
* Balazevic et al. [2019] Ivana Balazevic, Carl Allen, and Timothy Hospedales. Multi-relational poincare graph embeddings. In _Advances in Neural Information Processing Systems 32: Annual Conference on Neural Information Processing Systems 2019, NeurIPS 2019, December 8-14, 2019, Vancouver, BC, Canada_, pages 4465-4475, 2019.
* Chami et al. [2020] Ines Chami, Adva Wolf, Da-Cheng Juan, Frederic Sala, Sujith Ravi, and Christopher Re. Low-dimensional hyperbolic knowledge graph embeddings. In _Proceedings of the 58th Annual Meeting of the Association for Computational Linguistics, ACL 2020, Online, July 5-10, 2020_, pages 6901-6914, 2020.
* Bai et al. [2021] Yushi Bai, Zhitao Ying, Hongyu Ren, and Jure Leskovec. Modeling heterogeneous hierarchies with relation-specific hyperbolic cones. In _Advances in Neural Information Processing Systems 34: Annual Conference on Neural Information Processing Systems 2021, NeurIPS 2021, December 6-14, 2021, virtual_, pages 12316-12327, 2021.
* Chami et al. [2019] Ines Chami, Zhitao Ying, Christopher Re, and Jure Leskovec. Hyperbolic graph convolutional neural networks. In _Advances in neural information processing systems_, 2019.
* Druyu and Kapovich [2018] Cornelia Druyu and Michael Kapovich. _Geometric group theory_, volume 63. 2018.
* Gromov [1987] Mikhael Gromov. _Hyperbolic groups_. 1987.
* Sala et al. [2018] Frederic Sala, Christopher De Sa, Albert Gu, and Christopher Re. Representation tradeoffs for hyperbolic embeddings. In _Proceedings of the 35th International Conference on Machine Learning, ICML 2018, Stockholmsmassan, Stockholm, Sweden, July 10-15, 2018_, pages 4457-4466, 2018.
* Xiao et al. [2015] Han Xiao, Minlie Huang, and Xiaoyan Zhu. From one point to a manifold: Knowledge graph embedding for precise link prediction. _arXiv preprint arXiv:1512.04792_, 2015.
* Meng et al. [2019] Yu Meng, Jiaxin Huang, Guangyuan Wang, Chao Zhang, Honglei Zhuang, Lance Kaplan, and Jiawei Han. Spherical text embedding. In _Advances in neural information processing systems_, 2019.
* Topping et al. [2021] Jake Topping, Francesco Di Giovanni, Benjamin Paul Chamberlain, Xiaowen Dong, and Michael M Bronstein. Understanding over-squashing and bottlenecks on graphs via curvature. _arXiv preprint arXiv:2111.14522_, 2021.
* Wang et al. [2021] Shen Wang, Xiaokai Wei, Cicero Nogueira Nogueira dos Santos, Zhiguo Wang, Ramesh Nallapati, Andrew Arnold, Bing Xiang, Philip S Yu, and Isabel F Cruz. Mixed-curvature multi-relational graph neural network for knowledge graph completion. In _WWW '21: The Web Conference 2021, Virtual Event / Ljubljana, Slovenia, April 19-23, 2021_, pages 1761-1771, 2021.
* Bordes et al. [2011] Antoine Bordes, Jason Weston, Ronan Collobert, and Yoshua Bengio. Learning structured embeddings of knowledge bases. In _Proceedings of the Twenty-Fifth AAAI Conference on Artificial Intelligence, AAAI 2011, San Francisco, California, USA, August 7-11, 2011_, 2011.
* Lacroix et al. [2018] Timothee Lacroix, Nicolas Usunier, and Guillaume Obozinski. Canonical tensor decomposition for knowledge base completion. In _Proceedings of the 35th International Conference on Machine Learning, ICML 2018, Stockholmsmassan, Stockholm, Sweden, July 10-15, 2018_, pages 2869-2878, 2018.
* Agrawal et al. [2009] Rakesh Agrawal, Sreenivas Gollapudi, Alan Halverson, and Samuel Ieong. Diversifying search results. In _Proceedings of the Second International Conference on Web Search and Web Data Mining, WSDM 2009, Barcelona, Spain, February 9-11, 2009_, pages 5-14, 2009.
* Bordes et al. [2013] Antoine Bordes, Nicolas Usunier, Alberto Garcia-Duran, Jason Weston, and Oksana Yakhnenko. Translating embeddings for modeling multi-relational data. In _Advances in Neural Information Processing Systems 26: Annual Conference on Neural Information Processing Systems 2013, December 5-8, 2013, Lake Tahoe, Nevada, United States_, pages 2787-2795, 2013.
* Yuan et al. [2021] Zixuan Yuan, Hao Liu, Junming Liu, Yanchi Liu, Yang Yang, Renjun Hu, and Hui Xiong. Incremental spatio-temporal graph learning for online query-poi matching. In _Proceedings of the Web Conference 2021_, pages 1586-1597, 2021.
* Yang et al. [2014] Bishan Yang, Wen-tau Yih, Xiaodong He, Jianfeng Gao, and Li Deng. Embedding entities and relations for learning and inference in knowledge bases. _arXiv preprint arXiv:1412.6575_, 2014.

* [33] Theo Trouillon, Johannes Welbl, Sebastian Riedel, Eric Gaussier, and Guillaume Bouchard. Complex embeddings for simple link prediction. In _Proceedings of the 33nd International Conference on Machine Learning, ICML 2016, New York City, NY, USA, June 19-24, 2016_, pages 2071-2080, 2016.
* [34] Zhiqing Sun, Zhi-Hong Deng, Jian-Yun Nie, and Jian Tang. Rotate: knowledge graph embedding by relational rotation in complex space. _arXiv preprint arXiv:1902.10197_, 2019.
* [35] Ivana Balaeveic, Carl Allen, and Timothy M Hospedales. Tucker: Tensor factorization for knowledge graph completion. In _Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing, EMNLP-IJCNLP 2019, Hong Kong, China, November 3-7, 2019_, pages 5184-5193, 2019.
* [36] Zongsheng Cao, Qianqian Xu, Zhiyong Yang, Xiaochun Cao, and Qingming Huang. Dual quaternion knowledge graph embeddings. In _Proceedings of the AAAI conference on artificial intelligence_, volume 35, pages 6894-6902, 2021.
* March 1, 2022_, pages 5521-5529, 2022.
* [38] Noel Cressie and Christopher K Wikle. _Statistics for spatio-temporal data_. John Wiley & Sons, 2015.
* [39] Jie Feng, Yong Li, Chao Zhang, Funing Sun, Fanchao Meng, Ang Guo, and Depeng Jin. Deepmove: predicting human mobility with attentional recurrent networks. In _Proceedings of the 2018 World Wide Web Conference, WWW 2018, Lyon, France, April 23-27, 2018_, pages 1459-1468, 2018.
* [40] Chao Huang, Junbo Zhang, Yu Zheng, and Nitesh V Chawla. Deepcrime: Attentive hierarchical recurrent networks for crime prediction. In _Proceedings of the 27th ACM International Conference on Information and Knowledge Management, CIKM 2018, Torino, Italy, October 22-26, 2018_, pages 1423-1432, 2018.
* [41] Scott L Minkoff. Nyc 311: A tract-level analysis of citizen-government contacting in new york city. _Urban Affairs Review_, 52(2):211-246, 2016.
* [42] Cort J Willmott and Kenji Matsuura. Advantages of the mean absolute error (mae) over the root mean square error (rmse) in assessing average model performance. _Climate research_, pages 79-82, 2005.
* [43] Aditya Grover and Jure Leskovec. node2vec: Scalable feature learning for networks. In _Proceedings of the 22nd ACM SIGKDD international conference on Knowledge discovery and data mining_, pages 855-864, 2016.
* [44] Kyunghyun Cho, Bart Van Merrienboer, Dzmitry Bahdanau, and Yoshua Bengio. On the properties of neural machine translation: Encoder-decoder approaches. In _Proceedings of SSST@EMNLP 2014, Eighth Workshop on Syntax, Semantics and Structure in Statistical Translation, Doha, Qatar, 25 October 2014_, pages 103-111, 2014.
* ICANN 2011
- 21st International Conference on Artificial Neural Networks, Espoo, Finland, June 14-17, 2011, Proceedings, Part I_, pages 44-51, 2011.
* [46] Sepp Hochreiter and Jurgen Schmidhuber. Long short-term memory. _Neural computation_, 9(8):1735-1780, 1997.
* [47] Bing Yu, Haoteng Yin, and Zhanxing Zhu. Spatio-temporal graph convolutional networks: A deep learning framework for traffic forecasting. In _Proceedings of the Twenty-Seventh International Joint Conference on Artificial Intelligence, IJCAI 2018, July 13-19, 2018, Stockholm, Sweden_, pages 3634-3640, 2017.
* February 1, 2019_, pages 922-929, 2019.
* [49] Ling Zhao, Yujiao Song, Chao Zhang, Yu Liu, Pu Wang, Tao Lin, Min Deng, and Haifeng Li. T-gcn: A temporal graph convolutional network for traffic prediction. _IEEE Trans. Intell. Transp. Syst._, pages 3848-3858, 2019.
* [50] Zonghan Wu, Shirui Pan, Guodong Long, Jing Jiang, Xiaojun Chang, and Chengqi Zhang. Connecting the dots: Multivariate time series forecasting with graph neural networks. In _Proceedings of the 26th ACM SIGKDD international conference on knowledge discovery & data mining_, pages 753-763, 2020.

* [51] Lei Bai, Lina Yao, Can Li, Xianzhi Wang, and Can Wang. Adaptive graph convolutional recurrent network for traffic forecasting. volume 33, pages 17804-17815, 2020.
* [52] Kan Guo, Yongli Hu, Yanfeng Sun, Sean Qian, Junbin Gao, and Baocai Yin. Hierarchical graph convolution network for traffic forecasting. In _Proceedings of the AAAI conference on artificial intelligence_, volume 35, pages 151-159, 2021.
* ISWC 2021
- 20th International Semantic Web Conference, ISWC 2021, Virtual Event, October 24-28, 2021, Proceedings_, pages 429-445, 2021.
* [54] Shumin Deng, Hui Chen, Zhoubo Li, Feiyu Xiong, Qiang Chen, Mosha Chen, Xiangwen Liu, Jiaoyan Chen, Jeff Z Pan, Huajun Chen, et al. Construction and applications of open business knowledge graph. _arXiv preprint arXiv:2209.15214_, 2022.
* [55] Brian Walsh, Sameh K Mohamed, and Vit Novacek. Biokg: A knowledge graph for relational learning on biological data. In _CIKM '20: The 29th ACM International Conference on Information and Knowledge Management, Virtual Event, Ireland, October 19-23, 2020_, pages 3173-3180, 2020.
* [56] Ningyu Zhang, Zhen Bi, Xiaozhuan Liang, Siyuan Cheng, Haosen Hong, Shumin Deng, Jiazhang Lian, Qiang Zhang, and Huajun Chen. Ontoprotein: Protein pretraining with gene ontology embedding. _arXiv preprint arXiv:2201.11147_, 2022.
* [57] Zhen Wang, Jianwen Zhang, Jianlin Feng, and Zheng Chen. Knowledge graph embedding by translating on hyperplanes. In _Proceedings of the Twenty-Eighth AAAI Conference on Artificial Intelligence, July 27 -31, 2014, Quebec City, Quebec, Canada_, pages 1112-1119, 2014.
* [58] Yankai Lin, Zhiyuan Liu, Maosong Sun, Yang Liu, and Xuan Zhu. Learning entity and relation embeddings for knowledge graph completion. In _Proceedings of the Twenty-Ninth AAAI Conference on Artificial Intelligence, January 25-30, 2015, Austin, Texas, USA_, pages 2181-2187, 2015.
* July 2, 2011_, pages 809-816, 2011.
* [60] Tim Dettmers, Pasquale Minervini, Pontus Stenetorp, and Sebastian Riedel. Convolutional 2d knowledge graph embeddings. In _Proceedings of the Thirty-Second AAAI Conference on Artificial Intelligence, AAAI 2018, New Orleans, Louisiana, USA, February 2-7, 2018_, pages 1811-1818, 2018.
* 18, 2022_, pages 2130-2139, 2022.
* 18, 2022_, pages 676-686, 2022.
* [63] Chengbiao Yang and Guilin Qi. An urban traffic knowledge graph-driven spatial-temporal graph convolutional network for traffic flow prediction. In _Proceedings of the 11th International Joint Conference on Knowledge Graphs_, pages 110-114, 2022.
* [64] Jiyuan Tan, Qianqian Qiu, Weiwei Guo, and Tingshuai Li. Research on the construction of a knowledge graph and knowledge reasoning model in the field of urban traffic. _Sustainability_, 13(6):3191, 2021.
* [65] Jia Liu, Tianrui Li, Shenggong Ji, Peng Xie, Shengdong Du, Fei Teng, and Junbo Zhang. Urban flow pattern mining based on multi-source heterogeneous data fusion and knowledge graph embedding. _IEEE Transactions on Knowledge and Data Engineering_, 2021.
* [66] Ling Zhao, Hanhan Deng, Linyao Qiu, Sumin Li, Zhixiang Hou, Hai Sun, and Yun Chen. Urban multi-source spatio-temporal data analysis aware knowledge graph embedding. _Symmetry_, 12(2):199, 2020.
* [67] Chenyi Zhuang, Nicholas Jing Yuan, Ruihua Song, Xing Xie, and Qiang Ma. Understanding people lifestyles: Construction of urban movement knowledge graph from gps trajectory. In _Proceedings of the Twenty-Sixth International Joint Conference on Artificial Intelligence, IJCAI 2017, Melbourne, Australia, August 19-25, 2017_, pages 3616-3623, 2017.

* [68] Haoran Xin, Xinjiang Lu, Tong Xu, Hao Liu, Jingjing Gu, Dejing Dou, and Hui Xiong. Out-of-town recommendation with travel intention modeling. In _Proceedings of the AAAI Conference on Artificial Intelligence_, volume 35, pages 4529-4536, 2021.
* [69] Yu Liu, Jingtao Ding, and Yong Li. Knowledge-driven site selection via urban knowledge graph. _arXiv preprint arXiv:2111.00787_, 2021.
* [70] Zhilun Zhou, Yu Liu, Jingtao Ding, Depeng Jin, and Yong Li. Hierarchical knowledge graph learning enabled socioeconomic indicator prediction in location-based social network. In _Proceedings of the ACM Web Conference_, pages 122-132, 2023.
* [71] Yu Liu, Zhilun Zhou, Yong Li, and Depeng Jin. Urban knowledge graph aided mobile user profiling. _ACM Trans. Knowl. Discov. Data_, 1(1), 2023.
* [72] Yu Liu, Xin Zhang, Jingtao Ding, Yanxin Xi, and Yong Li. Knowledge-infused contrastive learning for urban imagery-based socioeconomic prediction. In _Proceedings of the ACM Web Conference_, pages 4150-4160, 2023.
* [73] Weijia Zhang, Hao Liu, Lijun Zha, Hengshu Zhu, Ji Liu, Dejing Dou, and Hui Xiong. Mugrep: A multi-task hierarchical graph representation learning framework for real estate appraisal. In _Proceedings of the 27th ACM SIGKDD Conference on Knowledge Discovery & Data Mining_, pages 3937-3947, 2021.
* [74] Qingyan Zhu, Yize Chen, Hao Wang, Zhenyu Zeng, and Hao Liu. A knowledge-enhanced framework for imitative transportation trajectory generation. In _2022 IEEE International Conference on Data Mining (ICDM)_, pages 823-832. IEEE, 2022.
* [75] Yu Liu, Jingtao Ding, Yanjie Fu, and Yong Li. Urbankg: An urban knowledge graph system. _ACM Transactions on Intelligent Systems and Technology_, 14(4):1-25, 2023.
* [76] Diederik P Kingma and Jimmy Ba. Adam: A method for stochastic optimization. _arXiv preprint arXiv:1412.6980_, 2014.