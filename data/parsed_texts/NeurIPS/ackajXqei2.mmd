# Mixed Samples as Probes for Unsupervised Model Selection in Domain Adaptation

Dapeng Hu\({}^{1}\) Jian Liang\({}^{3}\) Jun Hao Liew\({}^{2}\) Chuhui Xue\({}^{2}\) Song Bai\({}^{2}\) Xinchao Wang\({}^{1}\)

\({}^{1}\)National University of Singapore \({}^{2}\)ByteDance Inc.

\({}^{3}\)CRIPAC \(\&\) MAIS, Institute of Automation, Chinese Academy of Sciences

Contact: lhxxhb15@gmail.com. Partial work was done during an internship at ByteDance with Song Bai. Corresponding authors: Jian Liang (liangjian92@gmail.com), and Xinchao Wang (xinchao@nus.edu.sg).

###### Abstract

Unsupervised domain adaptation (UDA) has been widely applied in improving model generalization on unlabeled target data. However, accurately selecting the best UDA model for the target domain is challenging due to the absence of labeled target data and domain distribution shifts. Traditional model selection approaches involve training extra models with source data to estimate the target validation risk. Recent studies propose practical methods that are based on measuring various properties of model predictions on target data. Although effective for some UDA models, these methods often lack stability and may lead to poor selections for other UDA models. In this paper, we present MixVal, an innovative model selection method that operates solely with unlabeled target data during inference. MixVal leverages mixed target samples with pseudo labels to directly probe the learned target structure by each UDA model. Specifically, MixVal employs two distinct types of probes: the intra-cluster mixed samples for evaluating neighborhood density and the inter-cluster mixed samples for investigating the classification boundary. With this comprehensive probing strategy, MixVal elegantly combines the strengths of two state-of-the-art model selection methods, Entropy and SND. We extensively evaluate MixVal on 11 UDA methods across 4 adaptation settings, including classification and segmentation tasks. Experimental results consistently demonstrate that MixVal achieves state-of-the-art performance and maintains exceptional stability in model selection. Code is available at https://github.com/LHXXHB/MixVal.

## 1 Introduction

Despite the remarkable achievements of supervised learning in visual recognition tasks [1; 2; 3; 4], deep neural networks face challenges when it comes to generalizing to out-of-distribution data [5]. As for the obstacle of out-of-domain generalization, deep domain adaptation techniques [6] provide an effective solution by transferring knowledge from a label-rich source domain to a related, yet label-scarce, target domain. Unsupervised domain adaptation (UDA) has drawn significant interest in recent years within the field of computer vision, including image classification [7; 8; 9], semantic segmentation [10; 11; 12], and object detection [13; 14], thanks to its practical setup with completely unlabeled target data. As the UDA landscape continues to evolve, various UDA settings have been explored to consider real-world scenarios, such as variations in category overlaps between domains and concerns related to source data privacy. These settings include closed-set UDA [7], partial-set UDA [15; 16], open-set UDA [17], open-partial-set UDA [18], and source-free UDA [19; 20; 21]. To effectively address these UDA problems, researchers have developed various novel solutions, including cross-domain alignment techniques [7; 9; 22; 11; 12], target-domain regularization methods [23; 24; 25], and self-training strategies in the target domain [26; 27; 20].

Nevertheless, it is worth emphasizing that hyperparameters, including those associated with both the method-specific loss functions and the deep training pipeline, play a critical role in ensuring superior performance of UDA models during deployment. Notably, even the model trained by a state-of-the-art UDA approach can underperform the baseline source-trained model without adaptation if the hyperparameters are not properly set [28]. Surprisingly, the selection of hyperparameters has been largely overlooked in previous UDA studies, as highlighted by You _et al._[18] and Saito _et al._[29].

To further fill this research gap, this paper tackles the challenging problem of unsupervised model selection * in domain adaptation. Figure 1(a) illustrates the UDA validation pipeline. During the training stage, we employ different values of a hyperparameter \(\beta\), denoted as \(\beta_{1},\beta_{2},\beta_{3}\), to train corresponding UDA models denoted as \(M_{1},M_{2},M_{3}\). Subsequently, in the validation stage, our objective is to identify the model with the minimal risk on the target domain and determine its associated \(\beta\) value as the optimal choice for the UDA method. Dealing with model selection in UDA presents two primary challenges. On one hand, the absence of labeled target data makes conventional supervised target validation unfeasible. On the other hand, even if we had access to labeled source data, relying solely on the source risk [7] cannot ensure accurate estimation of the target risk due to domain distribution shifts between domains [29]. Therefore, advanced validation approaches are necessary to ensure accurate model selection in UDA.

Footnote *: Throughout this paper, we use model selection, validation, and hyperparameter selection interchangeably.

Existing validation solutions in UDA can be classified into two types. The first type consists of source-based methods, which include the vanilla baseline of using source risk directly for target validation, denoted as SourceVal [7]. Additionally, Importance-Weighted Cross-Validation (IWCV)[30] and Deep Embedded Validation (DEV) [18] re-weight the source risk based on density similarity between domains. Reverse Validation (RV) [31] builds a symmetric UDA task to estimate target risk by reversing the source risk. However, source-based methods require training extra models involving source data and are vulnerable to severe distribution shifts between domains. On the other hand, the second type, target-only validation methods, is more straightforward and only utilizes unlabeled target samples. Entropy [30], based on the assumption of _low-density separation_[32], selects the model that produces target predictions with the lowest mean entropy. Soft Neighborhood Density (SND) [29], which relies on the assumption of _neighborhood consistency_, chooses the model with the highest consistency of predictions within the target neighborhood. While both Entropy and SND outperform source-based methods in certain UDA tasks, they have not fully explored the learned target structure for model selection, leading to instability across various UDA methods.

In this paper, we introduce MixVal, a novel target-only method for model selection in UDA. MixVal leverages mixed target samples as validation probes. To achieve this, MixVal employs _mixup_[33] with unlabeled target samples and their predictions, generating pseudo-labeled mixed samples. These mixed samples are further categorized into two types, depending on whether _mixup_ is performed intra-cluster or inter-cluster. MixVal takes a novel strategy by evaluating inference-stage interpolation consistency for both types of mixed samples. Compared to Entropy and SND, MixVal innovatively employs mixed samples for probing the target structure, rather than directly measuring certain properties of target predictions. Moreover, MixVal elegantly combines the advantages of both Entropy and SND. On one hand, MixVal employs intra-cluster mixed samples to evaluate neighborhood density, leveraging the _neighborhood consistency_ assumption utilized in SND. On the other hand, it utilizes inter-cluster mixed samples to evaluate the classification boundary, considering the _low-density separation_ assumption used in Entropy. The novel probing allows MixVal to benefit from the strengths of both assumptions, making it a competitive UDA model selection method.

**Our main contributions** are highlighted as threefold:

* We study the significant yet under-explored model selection problem in UDA, providing comprehensive empirical evaluations of existing validation baselines.
* We introduce MixVal, a novel target-only validation method that directly probes the target structure using mixed samples. MixVal combines the strengths of both SND and Entropy through novel consistency-based probing with inter-cluster and intra-cluster mixed samples.
* We conduct extensive experiments to evaluate MixVal's effectiveness in model selection across various UDA settings, including closed-set UDA, partial-set UDA, open-partial-set UDA, and source-free UDA. The results highlight MixVal's exceptional stability and superior performance in UDA model selection compared to existing baselines.

## 2 Related Work

### Unsupervised Domain Adaptation

Domain adaptation aims to leverage labeled source domains to facilitate transductive learning in a label-scarce target domain [34]. Unsupervised domain adaptation (UDA), which assumes that the target domain is entirely unlabeled, has gained significant attention due to its practical nature. Many traditional methods have been proposed to address UDA [35; 36; 37; 38]. In recent years, deep learning-based UDA methods have witnessed significant progress, with domain adversarial learning emerging as a popular approach. Adversarial domain adaptation has been explored at multiple levels, including input-level [39], feature-level [7; 15; 9], prediction-level [11; 22], and entropy-level [12]. Additionally, there has been growing interest in adapting UDA models with a specific focus on the leverage of target data, leading to explorations in techniques such as target clustering [40; 27; 41] and target output regularization [24; 25]. Notably, Xu _et al._[23] proposed a feature-level regularization approach that diverges from the popular mainstream methods. These UDA methods primarily address conventional scenarios that require source data for adaptation. More recently, a practical variant called source-free UDA has gained increasing attention [19; 20], where adaptation relies solely on the source-trained model. To comprehensively compare different validation approaches, we conduct hyperparameter selection for various representative UDA methods across diverse UDA settings.

### Model Selection in Unsupervised Domain Adaptation

Model selection in UDA poses a significant challenge due to the absence of labeled target data and the presence of domain distribution shifts between domains. Some pioneering efforts have been made to address this issue. Ganin _et al._[7] initially introduced the estimation of the unavailable target risk using source risk for target-domain validation (SourceVal). However, SourceVal is susceptible to severe domain shifts. Later, Ganin _et al._[31] proposed Reverse Validation (RV), which considers a symmetric UDA problem from target to source and employs the reversed source risk for validation. Sugiyama _et al._[30] introduced Importance-Weighted Cross-Validation (IWCV), which estimates the target risk by re-weighting the source risk based on input-level domain similarity. You _et al._[18] further proposed Deep Embedded Validation (DEV), which considers feature-level similarity and controls variance in IWCV. While these source-based methods have proven effective, their practical applicability is limited by the need of extensive model training, access to source data, and the challenge of dealing with severe domain shifts. Consequently, recent efforts have shifted towards target-only validation methods, which rely solely on unlabeled target data. Morerio _et al._[42] pioneered the use of mean entropy (Entropy) of target predictions for validation, considering the assumption of _low-density separation_[32]. Musgrave _et al._[28] introduced the Information Maximization (InfoMax) score, which further considers _class diversity_ in addition to Entropy. Tu _et al._[43] introduced Corr-C, which prioritizes predictions with both large _class diversity_ and high confidence. However, _class diversity_ serves as a strict prior that is unsuitable for UDA scenarios with label shift [44]. Saito _et al._[29] introduced Soft Neighborhood Density (SND), the state-of-the-art target-only validation method that prioritizes high _neighborhood consistency_. SND has demonstrated that target-only validation can outperform source-based methods, including IWCV and DEV. We also align with the research line of target-only validation, which offers simplicity and adaptability across various UDA settings. Table 1 showcases a comparison of how our method MixVal differs from other target-only validation methods in terms of the consideration of common assumptions.

\begin{table}
\begin{tabular}{l|c c c} \hline \hline Validation Method & \begin{tabular}{c} _neighborhood_ \\ _consistency_ \\ \end{tabular} & \begin{tabular}{c} no prior of \\ _class diversity_ \\ \end{tabular} & 
\begin{tabular}{c} _low-density_ \\ _separation_ \\ \end{tabular} \\ \hline Entropy [42] & ✗ & ✓ & ✓ \\ InfoMax [28] & ✗ & ✗ & ✓ \\ SND [29] & ✓ & ✓ & ✗ \\ Corr-C [43] & ✗ & ✗ & ✓ \\ MixVal & ✓ & ✓ & ✓ \\ \hline \hline \end{tabular}
\end{table}
Table 1: Comparison of assumptions considered in validation methods using target data.

### Mixup

_Mixup_, a data augmentation technique originally proposed by Zhang _et al._[33], is used during model training to improve generalization. _Mixup_ has been extended to different levels, such as feature-level [45], patch-level [46], and token-level [47]. In addition to supervised learning, _mixup_ has been successfully applied in semi-supervised learning [48; 49] and domain adaptation [50; 51; 52]. Unlike existing studies that consider _mixup_ as a small perturbation to regularize model training, we employ _mixup_ to generate in-between probing samples for model evaluation.

## 3 Methodology

### Problem Setting

**Unsupervised domain adaptation (UDA).** We begin by introducing the UDA problem with a \(K\)-way image classification task, easily extendable to semantic segmentation tasks. In this setup, we are provided with a labeled source domain \(\mathcal{D}_{\mathrm{s}}=\{(x_{\mathrm{s}}^{i},y_{\mathrm{s}}^{i})\}_{i=1}^{ n_{\mathrm{s}}}\) consisting of \(n_{\mathrm{s}}\) labeled images \(x_{\mathrm{s}}\) with their corresponding labels \(y_{\mathrm{s}}\), and an unlabeled target domain \(\mathcal{D}_{\mathrm{t}}=\{x_{\mathrm{t}}^{i}\}_{i=1}^{n_{\mathrm{t}}}\) containing \(n_{\mathrm{t}}\) unlabeled images \(x_{\mathrm{t}}\). Here, \(x_{\mathrm{s}}\) and \(x_{\mathrm{t}}\) represent image vectors, and \(y_{\mathrm{s}}\) are one-hot ground truth labels. The objective of UDA is to learn a discriminative model \(M\) using \(\mathcal{D}_{\mathrm{s}}\) and \(\mathcal{D}_{\mathrm{t}}\), which can accurately predict the target labels \(\{y_{i}^{i}\}_{i=1}^{n_{\mathrm{t}}}\) for the corresponding target images \(\{x_{i}^{i}\}_{i=1}^{n_{\mathrm{t}}}\), under covariate shift [30] or label shift [44] between domains. Each image vector \(x\in\mathcal{R}^{d}\) in the input space is associated with a one-hot pseudo label encoding, denoted as \(\hat{y}\in\mathcal{R}^{K}\), which is predicted by model \(M\). We denote \(|\mathcal{C}_{\mathrm{s}}|=K\) as the number of categories in the source domain and \(|\mathcal{C}_{\mathrm{t}}|\) as that in the target domain. Besides the vanilla UDA, which refers to closed-set UDA where both domains share the same label space (\(\mathcal{C}_{\mathrm{s}}=\mathcal{C}_{\mathrm{t}}\)), we also investigate other challenging UDA settings to evaluate the versatility of model selection approaches. These include partial-set UDA [15], where the source domain contains more categories than the target domain (\(\mathcal{C}_{\mathrm{s}}\supset\mathcal{C}_{\mathrm{t}}\)), and open-partial-set UDA [53], where both domains have overlapping but not identical labels (\(\mathcal{C}_{\mathrm{s}}\cap\mathcal{C}_{\mathrm{t}}\neq\emptyset\), \(\mathcal{C}_{\mathrm{s}}\not\supseteq\mathcal{C}_{\mathrm{t}}\), \(\mathcal{C}_{\mathrm{s}}\not\subseteq\mathcal{C}_{\mathrm{t}}\)).

Traditional UDA settings [34; 6; 15; 53] typically require simultaneous access to source and target data for effective target adaptation. The general optimization objective can be represented as follows:

\[\mathcal{L}_{\mathrm{uda}}=\mathcal{L}_{\mathrm{src}}(M;\mathcal{D}_{\mathrm{ s}})+\beta\mathcal{L}_{\mathrm{adapt}}(M;\mathcal{D}_{\mathrm{s}},\mathcal{D}_{ \mathrm{t}},\eta).\]

Here, \(\mathcal{L}_{\mathrm{src}}\) is the cross-entropy loss with labeled source data, and \(\mathcal{L}_{\mathrm{adapt}}\) denotes the adaptation loss that adapts the training of model \(M\) to unlabeled target data. The scalar coefficient \(\beta\) is a common type of hyperparameter, and \(\eta\) is a hyperparameter specific to the adaptation loss. Additionally, there are other training-related hyperparameters, such as learning rate, iterations, and network architecture.

Recently, source-free unsupervised domain adaptation (SFUDA) [19; 20] has gained significant attention in the research community. Unlike traditional UDA, SFUDA decouples the source supervised learning and unsupervised target adaptation into two sequential stages. The target adaptation stage in SFUDA is typically guided by the following objective function:

\[\mathcal{L}_{\mathrm{sfuda}}=\mathcal{L}_{\mathrm{adapt}}(M;M_{\mathrm{s}}, \mathcal{D}_{\mathrm{t}},\eta).\]

Here, \(M_{\mathrm{s}}\) represents the source pre-trained model. During the target adaptation stage, a target model \(M\) is learned with access to the source model \(M_{\mathrm{s}}\) and unlabeled target data \(\{x_{\mathrm{t}}^{i}\}_{i=1}^{n_{\mathrm{t}}}\).

**Model selection.** In UDA, the goal of model selection is to pinpoint the hyperparameter configuration that offers the best performance on unlabeled target data. For example, let's consider the hyperparameter \(\beta\), with a set of possible values \(\{\beta_{i}\}_{i=1}^{m}\), where \(m\) is the number of candidate values. We proceed to train \(m\) distinct models \(\{M_{i}\}_{i=1}^{m}\), each employing a different \(\beta\) value. Our aim is to identify the model \(M\) that delivers the highest performance on \(\mathcal{D}_{\mathrm{t}}\) among all candidate UDA models \(\{M_{i}\}_{i=1}^{m}\), thus determine the optimal hyperparameter value. Figure 1(a) visually illustrates this process, using \(3\) as the value for \(m\). Model selection in UDA confronts two key challenges. Firstly, the absence of labeled target data renders traditional supervised validation methods, such as using a hold-out dataset [54], unfeasible. Secondly, the presence of severe domain distribution shifts between domains poses a risk when using source data for selecting the best model for the target data. Additionally, concerns about source data privacy can limit direct source data utilization.

### MixVal: Mixed Samples as Probes for Unsupervised Validation

**Motivation.** While existing target-only model selection methods [42; 29] have demonstrated competitive performance, they sometimes result in extremely poor selections when applied to different UDA methods and datasets, even within the standard closed-set UDA scenario. This phenomenon is substantiated by a comprehensive large-scale empirical study conducted by Musgrave _et al._[28]. We highlight two common limitations in existing target-only validation methods that potentially hinder their ability to generalize across various UDA scenarios. First, these methods primarily rely on raw target predictions to calculate specific metrics for evaluating the learned target structure. However, it's important to note that these target data have already been utilized during the transductive model training. Second, while both the assumptions of _low-density separation_ and _neighborhood consistency_ are effective for model selection, existing validation methods often design their metrics based solely on one of these assumptions, as summarized in Table 1.

To address these limitations, we present MixVal, a target-only validation method that thoroughly evaluates the target structure through the use of mixed samples. We employ the _mixup_ technique [33] to create novel in-between target samples. These mixed samples are then used for consistency evaluation to probe the learned target structure. With two distinct types of mixed samples, we ensure a comprehensive assessment of the target structure acquired by each candidate UDA model.

**Generation of mixed samples.** We first generate a labeled set of mixed samples using _mixup_ with unlabeled target data and inference-stage UDA models. Specifically, we create a mixed sample \(x_{\mathrm{mix}}\) and its label \(y_{\mathrm{mix}}\) by performing a convex combination of a pair of target samples \(x_{\mathrm{t}}^{i},x_{\mathrm{t}}^{j}\) and their corresponding pseudo labels \(\hat{y}_{\mathrm{t}}^{i},\hat{y}_{\mathrm{t}}^{j}\) which are predicted by the UDA model. The process of mixed sample generation is formulated as follows:

\[x_{\mathrm{mix}}=\lambda*x_{\mathrm{t}}^{i}+(1-\lambda)*x_{\mathrm{t}}^{j}, \qquad y_{\mathrm{mix}}=\lambda*\hat{y}_{\mathrm{t}}^{i}+(1-\lambda)*\hat{y}_ {\mathrm{t}}^{j}.\]

where \(\lambda\) is a scalar used for interpolation, and \(\hat{y}_{\mathrm{t}}^{i}\) and \(\hat{y}_{\mathrm{t}}^{j}\) denote the one-hot pseudo label encodings. By performing _mixup_ on random target samples for a single epoch in the inference stage, we generate a set of mixed samples \(\{(x_{\mathrm{mix}}^{i},y_{\mathrm{mix}}^{i})\}_{i=1}^{n_{\mathrm{t}}}\), where \(n_{\mathrm{t}}\) represents the total number.

**Interpolation consistency evaluation.** Next, we leverage each candidate UDA model to infer labels for all mixed samples, resulting in predicted labels \(\{\hat{y}_{\mathrm{mix}}^{i}\}_{i=1}^{n_{\mathrm{t}}}\). Using both the mixed labels \(\{y_{\mathrm{mix}}^{i}\}_{i=1}^{n_{\mathrm{t}}}\) and predicted labels, we assess the accuracy of mixed samples for each candidate model. This assessment yields the Interpolation Consistency Evaluation (ICE) score, defined as follows:

\[\mathrm{ICE}=\mathrm{Accuracy}(\{y_{\mathrm{mix}}^{i}\}_{i=1}^{n_{\mathrm{t}} },\{\hat{y}_{\mathrm{mix}}^{i}\}_{i=1}^{n_{\mathrm{t}}}).\]

For all UDA models \(\{M_{i}\}_{i=1}^{m}\), we apply the same _mixup_ operation to generate identical mixed samples, but the mixed labels differ because model predictions for target samples vary among different models. We subsequently calculate the ICE score for each candidate model \(M_{i}\), yielding a set of ICE scores \(\{\mathrm{ICE}_{i}\}_{i=1}^{m}\). The candidate model with a higher ICE score is deemed superior.

Figure 1: Overview of the proposed method (MixVal) for model selection in UDA.

**MixVal via two types of probes.** Through a meticulous analysis of the _mixup_ operation applied to unlabeled target samples and their pseudo labels, we have identified two distinct categories of mixed samples, as illustrated in Figure 1(b). The first type involves mixing target samples with the same pseudo label, referred to as intra-cluster _mixup_. When we evaluate the ICE score after performing intra-cluster _mixup_, we effectively measure the neighborhood density within each cluster. A higher ICE score indicates a higher level of _neighborhood consistency_[29]. Conversely, the second type involves mixing target samples with different pseudo labels, termed inter-cluster _mixup_. By evaluating the ICE score in this context, we can assess the classification margin between clusters. A higher ICE score in inter-cluster _mixup_ signifies a larger margin of the classification boundary, indicating _low-density separation_[42]. For comprehensive probing, MixVal uses both types of mixed samples as probes. It separately ranks all candidate models in ascending order based on each type of ICE score. Then, MixVal takes the average rank from both rankings to select the candidate model with the highest average rank. Kindly refer to Appendix A for the pseudocode of MixVal.

**Connection to interpolation consistency training.** We provide a comprehensive comparison between our MixVal approach and interpolation consistency training (ICT), a commonly used technique in semi-supervised learning [48]. While our ICE score draws inspiration from ICT, there are three significant distinctions between MixVal and ICT. ICT primarily employs inter-cluster _mixup_ as a minor training perturbation to regularize model learning with unlabeled data. In contrast, MixVal explicitly applies _mixup_ to create in-between target samples, encompassing both inter-cluster and intra-cluster scenarios, during the inference stage without requiring model re-training.

## 4 Experiments

### Setup

**Datasets.** For image classification tasks, we consider 4 popular UDA benchmarks of varied scales. _Office-31_[55] is a classic domain adaptation benchmark consisting of 31 object categories across 3 domains: Amazon (A), DSLR (D), and Webcam (W). _Office-Home_[56] is a challenging benchmark with 65 different object categories in 4 domains: Art (Ar), Clipart (Cl), Product (Pr), and Real-World (Re). _VisDA_[57] is a large-scale benchmark for the synthetic-to-real object recognition task, featuring 12 categories. It consists of a training (T) domain with 152k synthetic images and a validation (V) domain with 55k realistic images. _DomainNet_[58] is a recent large-scale benchmark comprising approximately 600k images across 345 categories in 6 distinct domains. For evaluation, we focus on a subset of 126 classes with 7 tasks [59] from 4 domains: Real (R), Clipart (C), Painting (P), and Sketch (S). For semantic segmentation tasks, we use the synthetic _GTAV_[60] dataset as the source domain and the real-world _Cityscapes_[61] dataset as the target domain.

**UDA methods.** We use the validation baselines discussed in Section 2.2 to conduct model selection for various UDA methods, with a specific emphasis on the practical target-only baselines. For closed-set UDA, we consider ATDOC [27], BNM [24], CDAN [9], MCC [25], MDD [22], SAFN [23], DMRL [50], AdaptSeg [11], and AdvEnt [12]. For partial-set UDA, we consider PADA [15] and SAFN [23]. For source-free UDA, we consider SHOT [20]. For open-partial-set UDA, we consider DANCE [41]. For ATDOC, BNM, CDAN, PADA, SAFN, SHOT, DMRL, and DANCE, we select the loss coefficient among 7 varied candidate values. For MDD, we validate the margin factor, while for MCC, we validate the temperature. For AdaptSeg and AdvEnt, we validate both the loss coefficient and training iteration. For MCC and MDD, we also include a two-hyperparameter validation task, where the bottleneck dimension is considered as an additional hyperparameter, with 4 possible values. Kindly refer to Appendix B for details of hyperparameter settings.

**Implementation details.** We utilize the Transfer Learning Library2 to train UDA models on a single RTX TITAN 16GB GPU. The batch size is set to 32, and the total number of iterations is set to 5,000. We save the final model as a checkpoint. For _VisDA_ and _GTAV2Cityscapes_, we use ResNet-101 [3], for _DomainNet_, we use ResNet-34 [3], and for the other benchmarks, we use ResNet-50 [3]. Regarding SND [29], we employ the official implementation. For source-based methods, we split \(80\%\) of the source data as the training set and the remaining \(20\%\) as the validation set. In our MixVal approach, we use a fixed value of \(\lambda\) to ensure a fair comparison among candidate models. Specifically, we set \(\lambda=0.55\) for all experiments, which allows us to probe with in-between samples.

Footnote 2: https://github.com/thuml/Transfer-Learning-Library

### Results

We report MixVal's validation performance as averages from three random runs. In the tables, 'Best' signifies the optimal selection, and 'Worst' represents the worst one. For brevity, we report average results for tasks with the same target domain. Kindly refer to Appendix D for detailed results.

**Closed-set UDA.** We begin by comparing the performance of validation baselines within the standard closed-set UDA scenario. Specifically, we report the results for both source-based and target-only validation methods across several well-established UDA benchmarks. Table 2 provides the results on the medium-scale benchmark _Office-Home_, while Table 3 presents the results on the small-scale benchmark _Office-31_ and the large-scale benchmark _VisDA_. Furthermore, Table 4 presents the results

\begin{table}
\begin{tabular}{l|c c c c|c c c c|c c c c|c c c c|c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{CDCD [27]} & \multicolumn{3}{c|}{BNM [24]} & \multicolumn{3}{c|}{CDCD [19]} & \multicolumn{3}{c|}{VIM} \\  & \(\sim\) C & \(\sim\) P & \(\sim\) R & \(\sim\) S & avg & \(\sim\) C & \(\sim\) P & \(\sim\) R & \(\sim\) S & avg & \(\sim\) C & \(\sim\) P & \(\sim\) R & \(\sim\) S & avg \\ \hline Entropy [24] & **67.09** & **65.80** & **74.42** & **59.34** & **66.66** & 63.36 & 64.28 & 74.31 & 48.69 & **62.66** & 63.75 & 61.85 & **79.60** & 52.17 & 64.34 \\ InfoMax [28] & **67.09** & **65.80** & **74.42** & **59.34** & **66.66** & 67.05 & 64.28 & 74.31 & 48.57 & 65.67 & 65.33 & 63.75 & 61.85 & **79.60** & 52.17 & 64.34 \\ SND [29] & **67.99** & 64.68 & **74.42** & **59.34** & 66.38 & 56.56 & 54.50 & 74.31 & 42.37 & 56.93 & 63.75 & 61.85 & **79.60** & 52.17 & 64.34 \\ Corr-C [43] & 75.35 & 62.88 & **74.42** & 54.63 & 62.32 & 59.75 & 63.41 & 77.62 & 42.37 & 60.79 & 59.98 & 62.27 & 74.42 & 53.69 & 62.59 \\ MixVal & **67.09** & **65.80** & **74.22** & **59.34** & **66.66** & **67.84** & **64.00** & **78.68** & **58.49** & **67.85** & **68.94** & **68.44** & **68.44** & **79.60** & **61.73** & **69.68** \\ \hline Worst & 57.35 & 60.76 & 73.44 & 51.41 & 60.74 & 55.79 & 54.50 & 74.31 & 42.37 & 56.74 & 59.98 & 61.85 & 74.42 & 47.00 & 60.81 \\ Best & 67.09 & 65.80 & 74.44 & 59.34 & 66.66 & 67.86 & 66.50 & 78.68 & 58.49 & 67.88 & 70.30 & 68.44 & 80.38 & 62.23 & 70.34 \\ \hline \hline \end{tabular}
\end{table}
Table 4: Validation accuracy (\(\%\)) of closed-set UDA on _DomainNet_.

\begin{table}
\begin{tabular}{l|c c c c|c c c c|c c c c|c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{ATDOC [27]} & \multicolumn{3}{c|}{BNM [24]} & \multicolumn{3}{c|}{CDCD [19]} \\  & \(\sim\)A & \(\sim\)D & \(\sim\)P & \(\sim\)R & avg & \(\sim\)A & \(\sim\)D & \(\sim\)P & \(\sim\)R & avg & \(\sim\)A & \(\sim\)D & \(\sim\)P & \(\sim\)R & avg \\ \hline SourceVal & 66.63 & 52.54 & 78.57 & 66.18 & **68.59** & 62.44 & 50.74 & 77.53 & 74.76 & 66.35 & 55.00 & 42.65 & 69.90 & 58.61 & 85.99 \\ IWCV [30] & 67.97 & 54.03 & 78.31 & 79.26 & 68.93 & 66.56 & 48.16 & 74.09 & 73.28 & 68.52 & 63.11 & 42.67 & 61.71 & 71.93 & 60.41 \\ DEV [18] & 67.39 & 54.23 & 77.78 & 79.39 & 69.70 & 67.56 & 56.39 & 73.92 & 75.93 & 64.81 & 67.23 & 57.04 & 68.76 & 76.91 & 67.48 \\ RV [31] & **68.65** & 66.13 & **79.39** & **76.08** & **70.85** & **62.56** & **76.78** & **78.86** & **77.04** & **67.66** & 56.74 & 76.01 & 76.78 & 69.52 \\ Entropy [24] & 63.67 & 55.83 & 76.54 & 78.36 & 68.00 & 62.85 & 54.94 & 71.56 & 68.14 & 67.66 & 57.56 & 76.37 & 77.45 & 69.76 \\ IndMax [28] & 63.67 & 56.53 & 76.14 & 78.36 & 68.02 & 68.49 & 74.15 & 77.64 & 68.16 & 67.66 & 57.56 & 76.37 & 77.45 & 69.76 \\ SND [29] & 63.67 & 56.53 & 76.54 & 77.54 & 68.44 & 68.28 & 54.49 & 71.56 & 68.14 & 67.94 & 57.56 & **76.96** & 77.68 & **70.04** \\ Corr-C [43] & 63.51 & 50.90 & 73.39 & 78.38 & 65.24 & 58.10 & 83.45 & 67.89 & 70.59 & 60.26 & 53.84 & 41.21 & 64.96 & 67.65 & 56.91 \\ MaxVal & 66.47 & **56.78** & 78.14 & 79.20 & 20.17 & 63.76 & 56.36 & 56.18 & 76.10 & 78.12 & 69.44 & 67.71 & **57.78** & 76.89 & **77.76** & 70.00 \\ \hline Worst & 62.89 & 50.39 & 78.99 & 73.89 & 68.25 & 58.10 & 45.37 & 68.97 & 70.59 & 60.75 & 53.80 & 41.21 & 64.78 & 67.65 & 68.91 \\ Best & 66.97 & 58.35 & 60.27 & 80.85 & 72.04 & 68.93 & 57.51 & 68.97 & 70.59 & 60.75 & 53.80 &of practical target-only validation baselines on the large-scale benchmark _DomainNet_. The current state-of-the-art source-based baseline is DEV [18], and for target-only methods, SND [29] holds the state-of-the-art position. Nonetheless, our observations differ from previous findings. When considering the averaged validation accuracy across 6 popular UDA methods, we note that RV consistently outperforms other source-based validation methods across three benchmarks. Regarding target-only validation methods, entropy-based approaches like Entropy and InfoMax prove to be competitive, particularly demonstrating a significant advantage over SND on the _Office-Home_ benchmark. As expected, our MixVal consistently attains the highest average accuracy across all four benchmarks, surpassing the vanilla SourceVal baseline, while most existing validation methods may noticeably underperform in comparison to this baseline. Notably, MixVal demonstrates exceptional performance on large-scale benchmarks such as _VisDA_ and _DomainNet_, approaching the upper bound of 'Best' and outperforming the second-best method by substantial margins. MixVal's consistent advantages in closed-set UDA highlight its effectiveness in this widely studied setting.

**Partial-set UDA.** Following [29], we assess validation performance in partial-set UDA, a scenario with label shifts between domains. We validate two representative partial-set UDA methods, PADA and SAFN, and present the validation accuracy of _Office-Home_ in Table 5. We observe that MixVal consistently outperforms all other validation baselines, maintaining performance close to the 'Best'. However, we notice some differences in comparison to closed-set UDA. Specifically, SND achieves more stable validation performance than Entropy, because Entropy can be susceptible to structure collapse [29]. Second, methods emphasizing 'class diversity', such as InfoMax and Corr-C, often yield lower results than SourceVal. Additionally, RV consistently underperforms SourceVal in scenarios without symmetric label distribution, making it unsuitable for UDA with label shifts.

**Open-partial-set UDA.** We extend our evaluation of UDA scenarios with label shifts, conducting validation for a popular open-partial-set UDA method, DANCE. Table 6 presents the HOS [62; 63] results on _Office-Home_. MixVal consistently provides strong validation performance, nearing the 'Best', while other validation baselines tend to align with the 'Worst'.

**Source-free UDA.** Finally, we compare the target-only validation baselines in source-free UDA. We conduct validation for a popular method, SHOT, and report the accuracy of _Office-31_ and _VisDA_ in Table 6. We find that MixVal consistently outperforms other baselines in this practical setting.

### Analysis

**Influence of pseudo label quality.** Because MixVal utilizes pseudo labels of target data for the _mixup_ operation, it is crucial to assess the impact of pseudo label quality. When examining UDA tasks with

\begin{table}
\begin{tabular}{l|c c c c|c c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{DANCE [41]} & \multicolumn{3}{c|}{_Home_} & \multicolumn{3}{c|}{SHOT [20]} & \multicolumn{3}{c}{_Office_} & \multicolumn{1}{c}{_VisDA_} \\  & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & avg & T\(\rightarrow\)V \\ \hline Entropy [42] & 32.00 & 39.48 & 27.52 & 38.08 & 34.27 & 71.67 & 90.76 & 88.68 & 83.70 & 82.65 \\ InfoMax [28] & 32.00 & 39.48 & 27.52 & 38.01 & 34.25 & 71.67 & 90.76 & 88.68 & 83.70 & 82.65 \\ SND [29] & 15.05 & 4.33 & 27.55 & 16.79 & 14.98 & 71.67 & 90.76 & 88.68 & 83.70 & 82.65 \\ Corr [43] & 29.60 & 4.33 & 27.55 & 16.79 & 18.62 & 71.58 & 90.76 & 90.19 & 84.18 & 82.65 \\ MixVal & **71.54** & **52.90** & **78.61** & **65.01** & **67.01** & **72.04** & **92.37** & **92.32** & **85.58** & **83.12** \\ \hline Worst & 15.05 & 4.33 & 15.17 & 16.79 & 12.84 & 71.56 & 90.76 & 88.68 & 83.67 & 80.57 \\ Best & 77.01 & 66.29 & 78.81 & 69.81 & 72.98 & 75.66 & 94.78 & 93.33 & 87.72 & 83.12 \\ \hline \hline \end{tabular}
\end{table}
Table 6: HOS (\(\%\)) of open-partial-set UDA and accuracy (\(\%\)) of source-free UDA.

\begin{table}
\begin{tabular}{l|c c c c|c c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{PADA [15]} & \multicolumn{3}{c}{SAFN [23]} \\  & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg \\ \hline SourceVal & 57.21 & 41.90 & 64.48 & 71.89 & 58.67 & 54.51 & 74.41 & 76.48 & 68.11 \\ IWCV [30] & 59.65 & 05.51 & 68.42 & 72.96 & 62.49 & 69.36 & 53.39 & 71.78 & 76.38 & 67.86 \\ DEV [18] & 66.88 & 49.29 & 72.40 & 70.46 & 64.76 & 69.36 & 54.94 & 73.95 & 76.66 & 68.58 \\ RV [31] & 57.79 & 40.87 & 63.87 & 60.78 & 53.84 & 69.89 & 52.74 & 72.83 & 77.14 & 67.92 \\ \hline Entropy [42] & 60.08 & 46.51 & 53.16 & 62.47 & 55.56 & **71.75** & 55.62 & 76.36 & 76.59 & 70.08 \\ InfoMax [28] & 60.08 & **51.40** & 60.20 & 66.67 & 59.59 & 63.67 & 51.74 & 69.64 & 73.62 & 64.67 \\ SND [29] & **67.80** & 50.71 & 59.46 & 67.13 & 61.27 & **71.55** & 51.74 & 76.36 & 78.36 & 69.55 \\ Corr [43] & 61.34 & 45.65 & 54.90 & 62.25 & 56.04 & 71.23 & 55.70 & 76.94 & **79.13** & 70.75 \\ MixVal & 67.68 & 51.01 & **72.94** & **78.64** & **67.57** & 71.70 & **57.91** & **77.08** & 78.94 & **71.41** \\ \hline Worst & 56.29 & 39.76 & 50.49 & 59.31 & 51.46 & 62.48 & 49.91 & 68.50 & 73.62 & 63.63 \\ Best & 69.33 & 55.86 & 74.55 & 79.59 & 69.83 & 73.37 & 58.09 & 77.35 & 79.33 & 72.03 \\ \hline \hline \end{tabular}
\end{table}
Table 5: Validation accuracy (\(\%\)) of partial-set UDA on _Office-Home_.

low-quality pseudo labels (around \(50\%\) accuracy), such as the results of '\(\rightarrow\) Cl', it becomes evident that MixVal consistently maintains stable validation performance.

**Influence of consistency evaluation.** MixVal utilizes image-level _mixup_-based consistency evaluation for the target probing. To gain a deeper understanding of its role in MixVal, we substitute it with other consistency evaluation techniques, including instance-based augmentations such as RandAug [64] and SSLAug [65], as well as _mixup_ at other levels, such as CutMix [46] and FeatMix [45]. The results in Figure 2(a) consistently demonstrate that image-level _mixup_ outperforms other strategies.

**Two-hyperparameter validation.** We further evaluate all validation baselines in challenging tasks that involve two hyperparameters. Quantitative comparisons in Table 7 consistently position MixVal as one of the top-performance validators. Qualitative comparisons in Figure 2(b) clearly illustrate that MixVal scores demonstrate a strong correlation with actual accuracy, whereas SND [29] scores exhibit noticeable deviation, resulting in selections far from optimal.

**Validation of _mixup_-based UDA method.** The ICE score of MixVal is based on the evaluation of _mixup_-based interpolation consistency during the inference stage. To assess MixVal's robustness, we apply it in the validation of the UDA method DMRL [50], which incorporates _mixup_-based consistency training within the target domain and across two domains at the same time. MixVal is employed to determine the optimal consistency loss coefficient for DMRL, and the results are reported in Table 8. Notably, MixVal consistently outperforms most of the existing target-only validation baselines, even when subjected to the 'attack' posed by specialized UDA model training.

\begin{table}
\begin{tabular}{l|c c c c|c c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{DMDR [25]} & \multicolumn{3}{c|}{MCC [25]} \\  & Ar \(\rightarrow\) Cl & Pr \(\rightarrow\) Re & Re \(\rightarrow\) Ar & avg & Ar \(\rightarrow\) Cl & Cl \(\rightarrow\) Pr \(\rightarrow\) Re & Re \(\rightarrow\) Ar & avg \\ \hline SourceVal & 55.99 & 73.15 & 78.77 & 69.39 & 69.33 & 57.91 & 76.84 & 81.13 & 72.89 & 72.19 \\ IWCV [30] & 37.89 & 72.92 & 80.42 & 58.43 & 62.42 & 46.09 & 77.74 & 80.68 & **74.45** & 69.74 \\ DEV [18] & 52.60 & 72.11 & 53.36 & 67.70 & 61.44 & 59.47 & 76.84 & 81.94 & 74.08 & 73.08 \\ RV [31] & **57.59** & 72.25 & **80.83** & 70.79 & 70.37 & 59.13 & 76.84 & 82.03 & 71.98 & 72.50 \\ \hline Entropy [42] & 57.21 & **73.19** & 80.06 & **72.31** & 70.69 & 59.75 & 77.77 & 82.37 & 74.33 & 73.56 \\ InfoMax [28] & **57.59** & 72.92 & 80.06 & **72.31** & **70.2** & 59.70 & **78.73** & **82.58** & 70.33 & 72.84 \\ SND [29] & 38.10 & 56.45 & 70.03 & 65.10 & 57.42 & 53.49 & 74.97 & 77.25 & 74.12 & 69.96 \\ Corr-C [43] & 30.17 & 44.74 & 57.15 & 50.76 & 45.71 & 44.90 & 56.75 & 74.32 & 67.61 & 60.90 \\ MixVal & 55.99 & 72.63 & 80.27 & 72.12 & 70.25 & **60.08** & 78.52 & 81.95 & 74.43 & **73.75** \\ \hline Worst & 30.17 & 39.81 & 53.36 & 50.76 & 43.53 & 43.02 & 56.75 & 73.47 & 67.24 & 60.12 \\ Best & 57.59 & 73.35 & 80.93 & 72.52 & 71.10 & 61.10 & 78.94 & 83.04 & 75.36 & 74.61 \\ \hline \hline \end{tabular}
\end{table}
Table 7: Two-hyperparameter validation accuracy (\(\%\)) of closed-set UDA on _Office-Home_.

\begin{table}
\begin{tabular}{l|c c c c|c c c|c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{DMRL [50]} & \multicolumn{3}{c|}{_Home_} & \multicolumn{3}{c|}{DMRL [50]} & \multicolumn{3}{c}{_Office_} \\  & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & \(\rightarrow\)A & \(\rightarrow\)D & \(\rightarrow\)D & \(\rightarrow\)W & avg \\ \hline Entropy [42] & 58.14 & 50.25 & 69.06 & 71.37 & 62.20 & 63.67 & 80.52 & **86.67** & 76.95 \\ InfoMax [28] & 58.14 & **50.75** & 69.06 & 71.37 & 62.33 & 63.67 & 80.52 & **86.67** & 76.95 \\ SND [29] & 57.74 & 49.96 & **69.28** & 71.42 & 62.10 & 61.84 & **84.14** & **86.67** & 77.55 \\ Corr-C [43] & 58.29 & 49.46 & 68.67 & 71.73 & 62.04 & 60.23 & 77.51 & 81.13 & 72.95 \\ MixVal & **59.13** & 50.41 & **69.28** & **72.07** & **62.72** & **64.89** & 82.93 & **86.67** & **78.16** \\ \hline Worst & 57.71 & 48.99 & 67.78 & 70.72 & 61.30 & 60.23 & 76.31 & 81.13 & 72.55 \\ Best & 59.20 & 50.75 & 69.28 & 72.24 & 62.87 & 65.30 & 84.14 & 86.67 & 78.70 \\ \hline \hline \end{tabular}
\end{table}
Table 8: Validation accuracy (\(\%\)) of a mixup-based closed-set UDA method DMRL [50].

Figure 2: (a) presents the effect of different consistency evaluation techniques. (b) provides comparisons between SND and our MixVal on a validation task involving two hyperparameters: MCC on the Ar\(\rightarrow\)Cl, where \(\gamma\) represents the bottleneck dimension and \(\eta\) represents the temperature. The SND and MixVal scores of the \(28\) candidate models are ranked in ascending order. To enhance clarity, we include the real target accuracy for each model in the left figure labeled as ‘Accuracy’.

**Analysis of probing.** In MixVal, we generate mixed samples by applying _mixup_ with a mix ratio \(\lambda\) of 0.55 to both target samples and their hard pseudo labels. We then calculate ICE scores for both intra-cluster and inter-cluster mixed samples. The final score for model selection is determined by averaging ascending rankings of both types of ICE scores. Here, we present a comprehensive ablation study to delve into these design choices within MixVal. To do this, we conduct validation experiments for PADA on four partial-set UDA tasks (Ar\(\rightarrow\)Cl, Cl\(\rightarrow\)Pr, Pr\(\rightarrow\)Re, Re\(\rightarrow\)Ar) and report the average accuracy results in Figure 3. 'AccAvg' represents the direct average of ICE scores (i.e., accuracy values) as the final score for model selection. 'RankAvg' denotes the use of the average ranking of ICE scores for selection. 'RankInter' relies solely on inter-cluster mixed samples for probing. 'RankIntra' employs only intra-cluster mixed samples for probing. 'Hard' and 'Soft' indicate the utilization of hard and soft pseudo labels, respectively. It's worth noting that for intra-cluster mixed samples, there is no distinction between 'Hard' and 'Soft' labels, as all pseudo labels involved are the same. The observations drawn from Figure 3 are as follows: (_i_) The mix ratio (\(\lambda\)) influences the level of ambiguity in mixed samples. In MixVal, \(\lambda=0.55\) generates more ambiguous in-between samples with greater probing capabilities than the easier samples created by \(\lambda=0.9\). Consequently, validation performance at \(\lambda=0.55\) surpasses that at \(\lambda=0.9\). (_ii_) In MixVal, while soft pseudo labels may provide additional performance improvements for inter-cluster probing, the use of hard pseudo labels offers simplicity and stability advantages. (_iii_) The separate probing of each type of mixed samples demonstrates effectiveness, and the combination of intra-cluster and inter-cluster probing enhances MixVal's stability. Kindly refer to Appendix C for more discussions on probing.

**Extension to segmentation.** We extend the use of MixVal to the domain adaptive segmentation task on _GTAV2Cityscapes_, following the same configuration as SND [29]. Our model selection process involves 66 candidate models generated by varying two hyperparameters: the loss coefficient and training iteration. We save checkpoints every 2,000 iterations, starting from the 10,000th iteration to the 30,000th iteration. The results in Table 9 demonstrate that MixVal consistently delivers the top validation performance for both UDA methods, while Entropy consistently underperforms SourceVal.

**Influence of backbone.** In addition to ResNet backbones, we also utilize ViT-B [4] as the backbone for the validation of BNM on the task R\(\rightarrow\)S. Accuracies reported in Table 10 highlight MixVal's superior stability with ViT, especially in comparison to Entropy, InfoMax, and Corr-C.

**Limitations and impacts.** While MixVal excels in classification tasks, further research is needed to address its limitations. This includes establishing the theoretical foundations of probing data structure using pseudo-labeled mixed samples. Additionally, extending MixVal to other machine learning tasks like object detection and regression presents challenges. Poor hyperparameter selections could potentially have negative societal impacts on the real-world deployment of UDA models. Nevertheless, we have not observed such situations during our extensive evaluation of MixVal.

## 5 Conclusion

In summary, we introduce MixVal, a novel and straightforward target-only method for model selection in unsupervised domain adaptation (UDA). MixVal leverages inference-stage _mixup_ to generate two distinct types of mixed samples, facilitating effective probing of the learned target structure while elegantly considering key assumptions used in previous approaches. Our extensive evaluations encompass diverse UDA methods and adaptation scenarios, consistently affirming the superior and reliable performance of MixVal when compared to existing model selection methods.

\begin{table}
\begin{tabular}{l|c|c} \hline \hline Method & AdapSeget [11] & AdvEnt [12] \\ \hline
**SourceVal** & 39.52 & 39.08 \\ Entropy [42] & 39.47 & 38.41 \\ SND [29] & 40.69 & **40.02** \\ MixVal & **42.20** & **40.02** \\ \hline \hline Worst & 33.84 & 33.06 \\ Best & 42.20 & 41.78 \\ \hline \hline \end{tabular}
\end{table}
Table 10: ViT results.

Figure 3: Analysis of probing.

## Acknowledgement

This project is supported by the Singapore Ministry of Education Academic Research Fund Tier 1 (WBS: A-8001229-00-00), a project titled "Towards Robust Single Domain Generalization in Deep Learning". Jian Liang is supported by the National Natural Science Foundation of China (Grant No. 62276256) and the Beijing Nova Program under Grant Z211100002121108.

## References

* [1] Russakovsky, O., J. Deng, H. Su, et al. Imagenet large scale visual recognition challenge. _International Journal of Computer Vision_, 2015.
* [2] Krizhevsky, A., I. Sutskever, G. E. Hinton. Imagenet classification with deep convolutional neural networks. In _Advances in Neural Information Processing Systems_. 2012.
* [3] He, K., X. Zhang, S. Ren, et al. Deep residual learning for image recognition. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2016.
* [4] Dosovitskiy, A., L. Beyer, A. Kolesnikov, et al. An image is worth 16x16 words: Transformers for image recognition at scale. In _International Conference on Learning Representations_. 2021.
* [5] Arjovsky, M., L. Bottou, I. Gulrajani, et al. Invariant risk minimization. _arXiv preprint arXiv:1907.02893_, 2019.
* [6] Long, M., Y. Cao, J. Wang, et al. Learning transferable features with deep adaptation networks. In _International Conference on Machine Learning_. 2015.
* [7] Ganin, Y., V. Lempitsky. Unsupervised domain adaptation by backpropagation. In _International Conference on Machine Learning_. 2015.
* [8] Saito, K., K. Watanabe, Y. Ushiku, et al. Maximum classifier discrepancy for unsupervised domain adaptation. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2018.
* [9] Long, M., Z. Cao, J. Wang, et al. Conditional adversarial domain adaptation. In _Advances in Neural Information Processing Systems_. 2018.
* [10] Hoffman, J., D. Wang, F. Yu, et al. Fcns in the wild: Pixel-level adversarial and constraint-based adaptation. _arXiv preprint arXiv:1612.02649_, 2016.
* [11] Tsai, Y.-H., W.-C. Hung, S. Schulter, et al. Learning to adapt structured output space for semantic segmentation. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2018.
* [12] Vu, T.-H., H. Jain, M. Bucher, et al. Advent: Adversarial entropy minimization for domain adaptation in semantic segmentation. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2019.
* [13] Chen, Y., W. Li, C. Sakaridis, et al. Domain adaptive faster r-cnn for object detection in the wild. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2018.
* [14] Saito, K., Y. Ushiku, T. Harada, et al. Strong-weak distribution alignment for adaptive object detection. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2019.
* [15] Cao, Z., L. Ma, M. Long, et al. Partial adversarial domain adaptation. In _European Conference on Computer Vision_. 2018.
* [16] Liang, J., Y. Wang, D. Hu, et al. A balanced and uncertainty-aware approach for partial domain adaptation. In _European Conference on Computer Vision_. 2020.
* [17] Panareda Busto, P., J. Gall. Open set domain adaptation. In _IEEE International Conference on Computer Vision_. 2017.
* [18] You, K., X. Wang, M. Long, et al. Towards accurate model selection in deep unsupervised domain adaptation. In _International Conference on Machine Learning_. 2019.
* [19] Li, R., Q. Jiao, W. Cao, et al. Model adaptation: Unsupervised domain adaptation without source data. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2020.
* [20] Liang, J., D. Hu, J. Feng. Do we really need to access the source data? source hypothesis transfer for unsupervised domain adaptation. In _International Conference on Machine Learning_. 2020.

* [21] Liang, J., R. He, T. Tan. A comprehensive survey on test-time adaptation under distribution shifts. _arXiv preprint arXiv:2303.15361_, 2023.
* [22] Zhang, Y., T. Liu, M. Long, et al. Bridging theory and algorithm for domain adaptation. In _International Conference on Machine Learning_. 2019.
* [23] Xu, R., G. Li, J. Yang, et al. Larger norm more transferable: An adaptive feature norm approach for unsupervised domain adaptation. In _IEEE International Conference on Computer Vision_. 2019.
* [24] Cui, S., S. Wang, J. Zhuo, et al. Towards discriminability and diversity: Batch nuclear-norm maximization under label insufficient situations. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2020.
* [25] Jin, Y., X. Wang, M. Long, et al. Minimum class confusion for versatile domain adaptation. In _European Conference on Computer Vision_. 2020.
* [26] Zou, Y., Z. Yu, B. Kumar, et al. Unsupervised domain adaptation for semantic segmentation via class-balanced self-training. In _European Conference on Computer Vision_. 2018.
* [27] Liang, J., D. Hu, J. Feng. Domain adaptation with auxiliary target domain-oriented classifier. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2021.
* [28] Musgrave, K., S. Belongie, S.-N. Lim. Benchmarking validation methods for unsupervised domain adaptation. _arXiv preprint arXiv:2208.07360_, 2022.
* [29] Saito, K., D. Kim, P. Teterwak, et al. Tune it the right way: Unsupervised validation of domain adaptation via soft neighborhood density. In _IEEE International Conference on Computer Vision_. 2021.
* [30] Sugiyama, M., M. Krauledat, K.-R. Muller. Covariate shift adaptation by importance weighted cross validation. _Journal of Machine Learning Research_, 2007.
* [31] Ganin, Y., E. Ustinova, H. Ajakan, et al. Domain-adversarial training of neural networks. _Journal of Machine Learning Research_, 2016.
* [32] Grandvalet, Y., Y. Bengio. Semi-supervised learning by entropy minimization. In _Advances in Neural Information Processing Systems_. 2004.
* [33] Zhang, H., M. Cisse, Y. N. Dauphin, et al. mixup: Beyond empirical risk minimization. In _International Conference on Learning Representations_. 2018.
* [34] Pan, S. J., Q. Yang. A survey on transfer learning. _IEEE Transactions on Knowledge and Data Engineering_, 2009.
* [35] Gong, B., Y. Shi, F. Sha, et al. Geodesic flow kernel for unsupervised domain adaptation. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2012.
* [36] Fernando, B., A. Habrard, M. Sebban, et al. Unsupervised visual domain adaptation using subspace alignment. In _IEEE International Conference on Computer Vision_. 2013.
* [37] Sun, B., J. Feng, K. Saenko. Return of frustratingly easy domain adaptation. In _AAAI Conference on Artificial Intelligence_. 2016.
* [38] Pan, S. J., I. W. Tsang, J. T. Kwok, et al. Domain adaptation via transfer component analysis. _IEEE Transactions on Neural Networks_, 2010.
* [39] Hoffman, J., E. Tzeng, T. Park, et al. Cycada: Cycle-consistent adversarial domain adaptation. In _International Conference on Machine Learning_. 2018.
* [40] Shu, R., H. H. Bui, H. Narui, et al. A dirt-t approach to unsupervised domain adaptation. _arXiv preprint arXiv:1802.08735_, 2018.
* [41] Saito, K., D. Kim, S. Sclaroff, et al. Universal domain adaptation through self supervision. In _Advances in Neural Information Processing Systems_. 2020.
* [42] Morerio, P., J. Cavazza, V. Murino. Minimal-entropy correlation alignment for unsupervised deep domain adaptation. _arXiv preprint arXiv:1711.10288_, 2017.
* [43] Tu, W., W. Deng, T. Gedeon, et al. Assessing model out-of-distribution generalization with softmax prediction probability baselines and a correlation method, 2023.

* [44] Azizzadenesheli, K., A. Liu, F. Yang, et al. Regularized learning for domain adaptation under label shifts. _arXiv preprint arXiv:1903.09734_, 2019.
* [45] Verma, V., A. Lamb, C. Beckham, et al. Manifold mixup: Better representations by interpolating hidden states. In _International Conference on Machine Learning_. 2019.
* [46] Yun, S., D. Han, S. J. Oh, et al. Cutmix: Regularization strategy to train strong classifiers with localizable features. In _IEEE International Conference on Computer Vision_. 2019.
* [47] Chen, J.-N., S. Sun, J. He, et al. Transmix: Attend to mix for vision transformers. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2022.
* [48] Verma, V., K. Kawaguchi, A. Lamb, et al. Interpolation consistency training for semi-supervised learning. _IEEE Transactions on Neural Networks_, 2022.
* [49] Berthelot, D., N. Carlini, I. Goodfellow, et al. Mixmatch: A holistic approach to semi-supervised learning. In _Advances in Neural Information Processing Systems_. 2019.
* [50] Wu, Y., D. Inkpen, A. El-Roby. Dual mixup regularized learning for adversarial domain adaptation. In _European Conference on Computer Vision_. 2020.
* [51] Mao, X., Y. Ma, Z. Yang, et al. Virtual mixup training for unsupervised domain adaptation. _arXiv preprint arXiv:1905.04215_, 2019.
* [52] Yan, S., H. Song, N. Li, et al. Improve unsupervised domain adaptation with mixup training. _arXiv preprint arXiv:2001.00677_, 2020.
* [53] You, K., M. Long, Z. Cao, et al. Universal domain adaptation. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2019.
* [54] Goodfellow, I., Y. Bengio, A. Courville. _Deep learning_. MIT press, 2016.
* [55] Saenko, K., B. Kulis, M. Fritz, et al. Adapting visual category models to new domains. In _European Conference on Computer Vision_. 2010.
* [56] Venkateswara, H., J. Eusebio, S. Chakraborty, et al. Deep hashing network for unsupervised domain adaptation. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2017.
* [57] Peng, X., B. Usman, N. Kaushik, et al. Visda: The visual domain adaptation challenge. _arXiv preprint arXiv:1710.06924_, 2017.
* [58] Peng, X., Q. Bai, X. Xia, et al. Moment matching for multi-source domain adaptation. In _IEEE International Conference on Computer Vision_. 2019.
* [59] Saito, K., D. Kim, S. Sclaroff, et al. Semi-supervised domain adaptation via minimax entropy. In _IEEE International Conference on Computer Vision_. 2019.
* [60] Richter, S. R., V. Vineet, S. Roth, et al. Playing for data: Ground truth from computer games. In _European Conference on Computer Vision_. 2016.
* [61] Cordts, M., M. Omran, S. Ramos, et al. The cityscapes dataset for semantic urban scene understanding. In _IEEE Conference on Computer Vision and Pattern Recognition_. 2016.
* [62] Fu, B., Z. Cao, M. Long, et al. Learning to detect open classes for universal domain adaptation. In _European Conference on Computer Vision_. 2020.
* [63] Bucci, S., M. R. Loghmani, T. Tommasi. On the effectiveness of image rotation for open set domain adaptation. In _European Conference on Computer Vision_. 2020.
* [64] Cubuk, E. D., B. Zoph, J. Shlens, et al. Randaugment: Practical automated data augmentation with a reduced search space. In _IEEE Conference on Computer Vision and Pattern Recognition, Workshops_. 2020.
* [65] Chen, X., H. Fan, R. Girshick, et al. Improved baselines with momentum contrastive learning. _arXiv preprint arXiv:2003.04297_, 2020.
* [66] Duda, R. O., P. E. Hart, et al. _Pattern classification and scene analysis_. Wiley New York, 1973.

Algorithm

The PyTorch-style pseudocode for our validation approach MixVal is presented in Algorithm 1.

```
#x:Abatchofrealtargetimageswithshuffledorder.
#lam:Themixratio,afixedscalarvaluebetween0.5and1.0.
#net:AtrainedUDAmodelintheevaluationmode.
#model_list:AlistcontainingcandidateUDAmodels.
#CalculateICEscoresforamini-batch. defice_score(x,lam,net): #Randombatchindex. rand_idx=torch.randperm(x.shape[0]) inputs_a=x inputs_b=x[rand_idx]
#Obtainmodelpredictionsandhardpseudolabels. pred_a=net(inputs_a) pl_a=pred_a.max(dim=1)[1] pl_b=pl_a[rand_idx]
#Intra-clustermixup. same_idx=(pl_a==pl_b).nonzero(as_tuple=True)[0]
#Inter-clustermixup. diff_idx=(pl_a!=pl_b).nonzero(as_tuple=True)[0]
#Mixupwithimagesandhardpseudolabels. mix_inputs=lam*inputs_a+(1-lam)*inputs_b iflam>0.5: mix_labels=pl_a else: mix_labels=pl_b #Obtainpredictionsforthemixdsamples. mix_pred=net(mix_inputs) mix_pred_labels=mix_pred.max(dim=1)[1]
#CalculateICEscoresfortwo-dimensionalprobing. ice_same=torch.sum(mix_pred_labels[same_idx] \ ==mix_labels[same_idx])/same_idx.shape[0] ice_diff=torch.sum(mix_pred_labels[diff_idx] \ ==mix_labels[diff_idx])/diff_idx.shape[0] returnice_same,ice_diff
#PerformmodelselectionbasedonICEscores. defmixVal(model_list,x,lam): #CalculateICEscoresforallcandidatemodels. ice_same_list=[] ice_diff_list=[] fornetinmodel_list: ice_same,ice_diff=ice_score(x,lam,net) ice_same_list.append(ice_same) ice_diff_list.append(ice_diff)
#CalculatetheaveragerankoftwotypesofICEscores. ice_same_list=torch.tensor(ice_same_list) ice_diff_list=torch.tensor(ice_diff_list) ice_same_rank=torch.argsort(torch.argsort(ice_same_list)) ice_diff_rank=torch.argsort(torch.argsort(ice_diff_list)) average_rank=(ice_same_rank+ice_diff_rank)/2
#Choosethemodelwiththehighestaveragerank. returnmodel_list[torch.argmax(average_rank)] ```

**Algorithm 1** PyTorch-style pseudocode for MixVal.

Hyperparameter Settings

In our main experiments, we follow the methodology of previous model selection studies [18; 29]. For simplicity, we tune a single hyperparameter for various UDA methods. In the case of two-hyperparameter validation experiments, as in MCC [25] and MDD [22], we also tune the bottleneck dimension, choosing from the candidate values \(\{256,512,1024,2048\}\). This variation is due to observations that the bottleneck dimension varies across different datasets in the official code of these UDA methods. For the validation of semantic segmentation tasks, we also consider two hyperparameters with the training iteration as an additional hyperparameter selected from the set \(\{10,000,12,000,14,000,16,000,18,000,20,000,22,000,24,000,26,000,28,000,30,000\}\), following SND [29]. Detailed hyperparameter settings are available in Table 11.

## Appendix C Analysis of Intra-Cluster and Inter-Cluster Probing

In MixVal, we use mixed samples to directly probe the intra-cluster and inter-cluster structures within the target representations learned by a UDA model. This strategy shares similar spirits with the well-known Linear Discriminant Analysis (LDA) [66], which optimizes an objective focused on minimizing intra-cluster variance while maximizing inter-cluster variance. Drawing inspiration from the LDA optimization, we explore a straightforward validation baseline that employs an LDA-like metric. In this context, let's denote the number of target samples as \(N\), the number of categories as \(K\), and the feature of a sample encoded by a UDA model as \(f\). The formulation for the LDA score is presented in Equation 1 below.

\[\begin{split}\bar{f}&=\frac{1}{N}\sum_{m=1}^{K}\sum _{i=1}^{N_{m}}f_{i}^{m}\qquad\bar{f}_{m}=\frac{1}{N_{m}}\sum_{i=1}^{N_{m}}f_{i }^{m}\qquad N=\sum_{m=1}^{K}N_{m}\\ D_{\mathrm{intra}}&=\frac{1}{N}\sum_{m=1}^{K}\sum _{i=1}^{N_{m}}\left\|f_{i}^{m}-\bar{f}_{m}\right\|_{2}^{2}\qquad D_{\mathrm{ inter}}=\frac{1}{K}\sum_{m=1}^{K}\left\|\bar{f}_{m}-\bar{f}\right\|_{2}^{2} \qquad\mathrm{LDA}=\frac{D_{\mathrm{inter}}}{D_{\mathrm{intra}}}\end{split}\] (1)

In our implementation, we utilize the predicted logits as features and compute variance using the \(L_{2}\) distance. We assess the LDA baseline against all target-only validation methods in both closed

\begin{table}
\begin{tabular}{l|c|c|c|c} \hline \hline UDA method & UDA Type & Hyperparameter & Search Space & Default Value \\ \hline ATDOC [27] & closed-set & loss coefficient & \(\{0.02,0.05,0.1,\) & \(0.2\) \\  & self-training & \(\lambda\) & \(0.2,0.5,1.0,2.0\}\) & \\ \hline BNM [24] & closed-set & loss coefficient & \(\{0.02,0.05,0.1,\) & \(1.0\) \\  & output regularization & \(\lambda\) & \(0.2,0.5,1.0,2.0\}\) & \\ \hline CDAN [9] & closed-set & loss coefficient & \(\{0.05,0.1,0.2,\) & \(1.0\) \\  & feature alignment & \(\lambda\) & \(0.5,1.0,2.0,5.0\}\) & \\ \hline MCC [25] & closed-set & temperature & \(1.0,1.5,2.0,\) & \(2.5\) \\  & output regularization & \(T\) & \(2.5,3.0,3.5,4.0\}\) & \\ \hline MDD [22] & closed-set & margin factor & \(\{0.5,1.0,2.0,\) & \(4.0\) \\  & output alignment & \(\gamma\) & \(3.0,4.0,5.0,6.0\}\) & \\ \hline SAFN [23] & closed/partial-set & loss coefficient & \(\{0.002,0.005,0.01,\) & \(0.05\) \\  & feature regularization & \(\lambda\) & \(0.02,0.05,0.1,0.2\}\) & \\ \hline PADA [15] & partial-set & loss coefficient & \(\{0.05,0.1,0.2,\) & \(1.0\) \\  & feature alignment & \(\lambda\) & \(0.5,1.0,2.0,5.0\}\) & \\ \hline DANCE [41] & open-partial-set & loss coefficient & \(\{0.02,0.05,0.1,\) & \(0.05\) \\  & self-supervision & \(\eta\) & \(0.2,0.5,1.0,2.0\}\) & \\ \hline SHOT [20] & source-free & loss coefficient & \(\{0.03,0.05,0.1,\) & \(0.3\) \\  & hypothesis transfer & \(\beta\) & \(0.3,0.5,1.0,3.0\}\) & \\ \hline DMRL [50] & closed-set & loss coefficient & \(\{0.1,0.2,0.5,\) & \(2.0\) \\  & _mixup_ training & \(\lambda\) & \(1.0,2.0,5,\) & \(10.0\) \\ \hline AdapSeg [11] & closed-set & loss coefficient & \(\{0.0001,0.0003,0.001,\) & \(0.0002\) \\  & output alignment & \(\lambda\) & \(0.003,0.01,\) & \(0.03\) \\ \hline AdvEnt [12] & closed-set & loss coefficient & \(\{0.0001,0.0003,0.001,\) & \(0.001\) \\  & output alignment & \(\lambda\) & \(0.003,0.01,0.03\}\) & \(0.001\) \\ \hline \hline \end{tabular}
\end{table}
Table 11: Summary of the considered UDA methods and their corresponding hyperparameters.

set UDA (Table 12) and partial-set UDA (Table 13). In both UDA scenarios, LDA outperforms existing validation methods in terms of average validation accuracy. This highlights the advantage of considering two effective assumptions, in contrast to the single assumption used in SND and Entropy. It's worth noting that while LDA performs well, it still falls short of MixVal's performance, underscoring the benefits of MixVal's direct probing approach using mixed samples compared to the indirect probing via measurement of raw predictions used by SND, Entropy, and LDA.

## Appendix D Full Validation Results

For classification tasks in our evaluation, we utilize the HOS score (\(\%\)) [62, 63] for open-partial-set UDA and accuracy (\(\%\)) for all other UDA tasks. In the case of segmentation tasks, we measure mIoU (\(\%\)) [11, 12]. To accommodate space constraints in this main text, we present the averaged validation results for UDA tasks that share the same target domain. For example, '\(\rightarrow\) Ar' represents the averaged results of three tasks on the _Office-Home_ benchmark, namely 'Cl\(\rightarrow\) Ar', 'Pr\(\rightarrow\) Ar', and 'Re\(\rightarrow\) Ar'. Additionally, please note that the 'avg' row signifies the average of the rows preceding it within each UDA method, while the 'AVG' row represents the average results of 'avg' rows across all considered UDA methods. For more detailed validation results for each specific UDA task, please refer to the corresponding tables, from Table 14 to Table 29.

\begin{table}
\begin{tabular}{l|c c c c c|c c c c c|c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{PADA [15]} & \multicolumn{3}{c|}{SAFN [23]} & \multicolumn{3}{c}{_Home_} \\  & \(\rightarrow\) Ar & \(\rightarrow\) Cl & \(\rightarrow\) Pr & \(\rightarrow\) Re & avg & \(\rightarrow\) Ar & \(\rightarrow\) Cl & \(\rightarrow\) Pr & \(\rightarrow\) Re & avg & **AVG** \\ \hline SourceVal & 57.21 & 41.90 & 64.48 & 71.98 & 58.87 & 66.82 & 54.71 & 74.41 & 76.48 & 68.11 & 63.49 \\ Entropy [42] & 60.08 & **64.51** & 53.16 & 62.47 & 55.56 & **71.75** & 55.62 & 76.36 & 76.59 & 70.08 & 62.82 \\ InfoMax [28] & 60.08 & **51.40** & 60.20 & 66.67 & 59.59 & 63.67 & 51.74 & 69.64 & 73.62 & 64.67 & 62.13 \\ SND [29] & **67.80** & 50.71 & 59.46 & 67.13 & 61.27 & **71.75** & 51.74 & 76.36 & 78.36 & 69.55 & 65.41 \\ Corr-C [43] & 61.34 & 45.65 & 54.90 & 62.25 & 55.04 & 71.23 & 55.70 & 76.94 & **79.13** & 70.75 & 63.40 \\ LDA & 64.52 & 46.51 & 69.47 & 72.67 & 63.29 & **71.75** & 54.39 & 73.93 & 77.10 & 69.29 & 66.29 \\ MixVal & 67.68 & 51.01 & **72.94** & **78.64** & **67.57** & 71.70 & **57.91** & **77.08** & 78.94 & **71.41** & **69.49** \\ \hline Worst & 56.29 & 39.76 & 50.49 & 79.31 & 51.46 & 62.48 & 49.91 & 68.50 & 73.62 & 63.63 & 57.55 \\ Best & 69.33 & 55.86 & 74.55 & 79.59 & 69.83 & 73.37 & 58.09 & 77.35 & 79.33 & 72.03 & **70.93** \\ \hline \hline \end{tabular}
\end{table}
Table 13: Validation accuracy (\(\%\)) of partial-set UDA on _Office-Home_.

\begin{table}
\begin{tabular}{l|c c c c|c c c c|c c c c c|c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{ATDOC [27]} & \multicolumn{3}{c|}{BSNM [24]} & \multicolumn{3}{c}{CDAN [9]} \\  & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg \\ \hline SourceVal & **66.63** & 52.54 & **78.57** & 76.61 & 68.59 & 64.24 & 50.74 & **77.53** & 74.76 & 66.83 & 55.00 & 42.65 & 69.05 & 68.81 & 58.99 \\ Entropy [42] & 63.67 & 55.83 & 76.54 & 78.36 & 68.06 & 62.68 & 54.49 & 74.15 & 77.64 & 68.14 & 67.66 & 57.56 & 76.37 & 77.45 & 69.76 \\ InfoMax [28] & 63.67 & 55.63 & 77.61 & 73.66 & 68.82 & 66.28 & 54.49 & 74.15 & 77.76 & 68.14 & 67.66 & 57.56 & 76.37 & 77.45 & 69.76 \\ SND [29] & 63.67 & 55.63 & 76.54 & 77.54 & 68.34 & 66.28 & 54.49 & 74.15 & 77.64 & 68.14 & 67.94 & 57.56 & 76.96 & 77.68 & **70.04** \\ Corr-C [43] & 63.51 & 50.39 & 73.89 & 73.88 & 68.52 & 54.80 & 15.47 & 68.97 & 70.59 & 60.76 & 53.82 & 41.21 & 64.96 & 77.65 & 65.91 \\ LDA & 63.67 & 55.63 & 76.54 & 77.54 & 68.34 & 66.28 & 54.49 & 74.15 & 77.64 & 68.14 & 67.66 & 57.56 & 76.37 & 77.45 & 69.76 \\ MixVal & 66.47 & **65.67** & **78.14** & **79.20** & **70.17** & **63.56** & **76.16** & **76.18** & **70.12** & **69.44** & 67.71 & **57.78** & 76.89 & **77.76** & 70.03 \\ \hline Worst & 62.89 & 39.79 & 73.89 & 68.25 & 58.10 & 45.37 & 86.96 & 70.59 & 53.09 & 63.58 & 34.21 & 64.78 & 67.65 & 58.66 \\ Best & 68.97 & 58.35 & 80.27 & 80.58 & 72.04 & 68.93 & 57.51 & 78.43 & 79.57 & 71.11 & 68.19 & 57.90 & 77.44 & 78.19 & 70.43 \\ \hline \hline \end{tabular}
\end{table}
Table 12: Validation accuracy (\(\%\)) of closed-set UDA on _Office-Home_.

\begin{table}
\begin{tabular}{l|c c c c c|c c c c c|c c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{MCC [25]} & \multicolumn{3}{c|}{MDD [22]} & \multicolumn{3}{c|}{SAFN [23]} & \multicolumn{3}{c}{_Home_} \\  & \(\rightarrow\) Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & \(\rightarrow\)Ar & \(\rightarrow\)Cl & \(\rightarrow\)Pr & \(\rightarrow\)Re & avg & **AVG** \\ \hline SourceVal & 66.56 & 55.39 & 79.55 & 80.90 & 70.89 & 62.53 & 54.43 & 72.57 & 55.65 & 69.63 & 53.14 & 3.366 & 67.57 & 74.56 & 65.77 & 66.26 \\ Entropy [42] & 69.29 & 59.33 & **80.63** & **80.96** & 72.55 & **66.54** & 57.63 & 77.27 & **77.45** & 69.72 & 59.85 & 46.41 & 72.51 & 73.18 & 62.99 & 68.63 \\ InfoMax [28] & 66.58 & 58.48 & 79.12 &

\begin{table}
\begin{tabular}{l|c c c c c c c c c c c c c c c} \hline Method & Ar \(\rightarrow\) Cl & Ar \(\rightarrow\) Pr & Ar \(\rightarrow\) Re & Cl \(\rightarrow\) Ar & Cl \(\rightarrow\) Pr & Cl \(\rightarrow\) Re & Pr \(\rightarrow\) Ar & Pr \(\rightarrow\) Cl & Pr \(\rightarrow\) Re & Re \(\rightarrow\) Ar & Re \(\rightarrow\) Cl & Re \(\rightarrow\) Pr & avg \\ \hline SourceVal & 56.93 & **77.00** & 77.74 & 57.64 & **73.33** & 69.36 & 56.45 & 42.38 & 77.19 & 73.22 & 52.90 & 82.26 & 66.37 \\ IWCV [30] & 46.46 & **77.00** & **79.30** & 63.86 & 61.34 & 62.54 & 63.95 & 42.38 & 78.01 & 71.86 & 55.65 & 83.92 & 65.52 \\ DEV [18] & 57.16 & **77.12** & **79.30** & 57.64 & 67.90 & **75.46** & **66.21** & **54.04** & 78.01 & 73.42 & 57.37 & 82.25 & 68.41 \\ RV [31] & **58.67** & **77.00** & **79.30** & **65.68** & **73.33** & **75.46** & 65.64 & 52.05 & **81.25** & **73.42** & **59.54** & 83.92 & **70.44** \\ \hline Entropy [42] & 53.40 & 67.04 & 78.04 & 63.41 & 71.44 & 73.59 & 63.58 & 52.69 & 80.95 & 71.86 & 57.37 & **83.96** & 68.14 \\ InfoMax [28] & 53.40 & 67.04 & 78.04 & 63.41 & 71.44 & 73.59 & 63.58 & 52.69 & 80.95 & 71.86 & 57.37 & **83.96** & 68.14 \\ SND [29] & 53.40 & 67.04 & 78.04 & 63.41 & 71.44 & 73.93 & 63.58 & 52.69 & 80.95 & 71.86 & 57.37 & **83.96** & 68.14 \\ SND [29] & 53.40 & 67.04 & 78.04 & 63.41 & 71.44 & 73.93 & 63.58 & 52.69 & 80.95 & 71.86 & 57.37 & **83.96** & 68.14 \\ Conv-C[43] & 46.46 & 67.06 & 74.82 & 49.73 & 61.34 & 62.54 & 56.45 & 42.38 & 74.41 & 68.11 & 47.26 & 78.51 & 60.76 \\ MaxVal & 56.30 & 72.90 & 78.75 & 64.66 & 71.44 & 74.52 & 64.32 & **54.04** & 81.09 & 73.09 & 58.19 & **83.96** & 69.44 \\ \hline Worst & 46.46 & 67.04 & 74.82 & 49.73 & 61.34 & 62.54 & 56.45 & 42.38 & 74.41 & 68.11 & 47.26 & 78.51 & 60.75 \\ Best & 58.67 & 77.00 & 80.61 & 67.16 & 74.16 & 76.75 & 66.21 & 54.04 & 81.36 & 73.42 & 59.82 & 84.12 & 71.11 \\ \hline \end{tabular}
\end{table}
Table 16: Accuracy \((\%)\) of CDAN [9], a closed-set UDA method, on _Office-Home_.

\begin{table}
\begin{tabular}{l|c c c c c c c c c c c c c c} \hline Method & Ar \(\rightarrow\) Cl & Ar \(\rightarrow\) Pr & Ar \(\rightarrow\) Re & Cl \(\rightarrow\) Ar & Cl \(\rightarrow\) Pr & Cl \(\rightarrow\) Re & Pr \(\rightarrow\) Ar & Pr \(\rightarrow\) Cl & Pr \(\rightarrow\) Re & Re \(\rightarrow\) Ar & Re \(\rightarrow\) Cl & Re \(\rightarrow\) Pr & avg \\ \hline SourceVal & 57.23 & 78.19 & **81.75** & 60.65 & 75.05 & **75.79** & 64.15 & 53.55 & 82.17 & **74.91** & 59.20 & 83.96 & 70.89 \\ IWCV [30] & **60.02** & 78.15 & 81.34 & 68.73 & **78.51** & 77.58 & 61.45 & **55.78** & 81.04 & 73.18 & 58.92 & 84.46 & 72.02 \\ DEV [18] & 57.16 & 78.15 & 81.34 & **69.10** & 73.01 & 76.80 & 64.15 & **57.85** & 82.17 & 73.18 & 59.20 & 84.46 & 71.38 \\ RV [31] & 59.34 & **78.53** & 80.77 & **69.10** & 77.83 & 78.22 & 67.20 & **57.85** & 82.24 & **74.91** & 59.20 & **85.54** & **72.56** \\ Entropy [42] & 59.31 & **78.53** & 81.59 & 68.67 & 77.83 & 78.79 & 67.20 & **57.85** & **82.51** & 73.79 & 60.82 & **85.54** & **72.55** \\ InfoMax [28] & **60.02** & 74.66 & **81.75** & 64.98 & 78.24 & 78.49 & 64.15 & 54.52 & 82.19 & 70.62 & 60.89 & 84.46 & 71.25 \\ SND [29] & 53.56 & 77.43 & 79.46 & 67.28 & 76.48 & 76.80 & 65.06 & 54.34 & 81.04 & 74.82 & 58.92 & 85.24 & 70.87 \\ Corr-C[43] & 53.56 & 77.43 & 79.46 & 67.28 & 76.48 & 76.80 & 65.06 & 54.34 & 81.04 & 74.82 & 58.92 & 85.24 & 70.87 \\ MaxVal & 59.08 & 77.81 & 81.61 & 68.40 & 78.45 & 78.40 & **67.56** & 57.65 & 82.21 & 73.41 & **61.00** & 85.15 & **72.56** \\ \hline Worst & 53.56 & 73.44 & 79.25 & 60.65 & 73.01 & 57.56 & 59.74 & 53.15 & 79.55 & 67.78 & 57.18 & 82.21 & 67.93 \\ Best & 60.02 & 78.53 & 81.75 & 69.22 & 78.51 & 78.79 & 67.90 & 58.49 & 82.51 & 74.91 & 61.35 & 85.74 & 73.14 \\ \hline \end{tabular}
\end{table}
Table 17: Accuracy \((\%)\) of MCC [22], a closed-set UDA method, on _Office-Home_.

\begin{table}
\begin{tabular}{l|c c c c c c c c c c c c c c c} \hline Method & Ar \(\rightarrow\) Cl & Ar \(\rightarrow\) Pr & Ar \(\rightarrow\) Re & Cl \(\rightarrow\) Ar & Cl \(\rightarrow\) Pr & Cl \(\rightarrow\) Re & Pr \(\rightarrow\) Ar & Pr \(\rightarrow\) Cl & Pr \(\rightarrow\) Re & Re \(\rightarrow\) Ar & Re \(\rightarrow\) Cl & Re \(\rightarrow\) Pr & avg \\ \hline SourceVal & 57.23 & 78.19 & **81.75** & 60.65 & 75.05 & **75.79** & 64.15 & 53.55 & 82.17 & **74.91** & 59.20 & 83.96 & 70.89 \\ IWCV [30] & **60.02** & 78.15 & 81.34 & 68.73 & **78.51** & 77.58 & 61.54 & **57.85** & 81.04 & 73.18 & 58.92 & 84.46 & 72.02 \\ DEV [18] & 57.16 & 78.15 & 81.34 & **69.10** & 73

\begin{table}
\begin{tabular}{l|c c c c c|c c c c c|c c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{ATDOC [27]} & \multicolumn{3}{c|}{BNM [24]} & \multicolumn{3}{c|}{CDAN [9]} \\  & \(\rm A\to D\to A\) & \(\rm W\to A\) & \(\rm w\to A\) & \(\rm avg\) & \(\rm A\to D\to A\) & \(\rm W\to A\) & \(\rm avg\) & \(\rm A\to D\to A\) & \(\rm W\to A\) & \(\rm avg\) \\ \hline SourceVal & 88.96 & **87.80** & 73.65 & 71.46 & 80.47 & **90.36** & **89.43** & 73.13 & 72.70 & 80.20 & 69.09 & 58.84 & 66.33 & 61.46 & 63.90 \\ IWCV [30] & 86.14 & 86.54 & 73.65 & 71.46 & **79.45** & 85.54 & **89.43** & 73.13 & 72.70 & 80.20 & 90.16 & 88.30 & 66.33 & 61.46 & 76.81 \\ RV [31] & 89.96 & 87.23 & **74.28** & **75.81** & **81.76** & 88.55 & **89.43** & 74.90 & 66.52 & 79.85 & 91.16 & 88.30 & **76.18** & 70.36 & 81.50 \\ Entropy [42] & 86.14 & **78.70** & 73.87 & 72.70 & 80.13 & 85.54 & 83.14 & 71.07 & 74.26 & 78.50 & 91.16 & **89.06** & 72.88 & 70.36 & 80.87 \\ InfoMax [28] & 86.14 & **87.80** & 73.87 & 72.70 & 80.13 & 85.54 & 83.14 & 71.07 & 69.97 & 77.43 & 91.16 & 88.30 & 72.88 & 70.36 & 80.68 \\ SND [29] & **92.37** & **87.80** & 73.87 & 72.70 & 81.69 & 85.54 & 83.14 & 74.62 & 74.26 & 79.39 & 92.37 & 88.55 & 72.88 & 70.22 & 81.01 \\ Corr-C [43] & 90.96 & 84.40 & 71.88 & 70.22 & 93.97 & 84.34 & 78.99 & 67.80 & 66.52 & 74.41 & 67.56 & 95.92 & 58.15 & 85.43 & 60.97 \\ MixVal & 90.96 & 86.54 & 73.75 & 73.47 & 81.81 & 86.48 & 87.00 & **75.64** & **74.29** & 80.85 & **92.64** & **99.06** & 75.08 & **70.38** & **81.79** \\ \hline Worst & 86.14 & 84.40 & 71.88 & 70.22 & 78.16 & 84.34 & 78.99 & 67.80 & 66.52 & 74.41 & 67.67 & 57.71 & 58.15 & 58.43 & 60.34 \\ Best & 92.37 & 87.80 & 75.04 & 75.58 & 82.70 & 90.36 & 89.43 & 75.75 & 75.29 & 82.71 & 92.77 & 89.06 & 76.18 & 70.57 & 82.15 \\ \hline \hline \end{tabular}
\end{table}
Table 21: Accuracy (\(\%\)) of CDAN [9], a closed-set UDA methods on _Office-31_.

\begin{table}
\begin{tabular}{l|c c c c c c c c c c c c c c} \hline \hline \multirow{2}{*}{Method} & \multicolumn{3}{c|}{ACC [25]} & \multicolumn{3}{c|}{MDD [22]} & \multicolumn{3}{c|}{SAHN [23]} \\  & \(\rm A\to D\to A\) & \(\rm W\to A\) & \(\rm avg\) & \(\rm A\to D\to A\) & \(\rm W\to D\to A\) & \(\rm avg\) & \(\rm A\to D\to A\) & \(\rm W\to D\to A\) & \(\rm W\to A\) & \(\rm avg\) \\ \hline SourceVal & 90.96 & 91.07 & 73.33 & 72.89 & **82.06** & 91.06 & 86.23 & 76.68 & 74.76 & 82.18 & 83.73 & 87.17 & 68.96 & 69.34 & 77.33 \\ IWCV [30] & 91.16 & 88.55 & 73.33 & 72.89 & 81.48 & 91.16 & 89.18 & 76.68 & 74.30 & 82.83 & 86.55 & 80.38 & 68.96 & **69.08** & 76.39 \\ DEV [18] & 89.16 & 93.08 & 73.33 & 72.06 & 81.91 & 91.16 & 89.18 & 76.68 & 74.62 & 82.91 & 86.55 & 80.38 & 68.96 & 67.45 & 75.84 \\ RW [31] & 89.16 & 93.08 & 73.33 & 72.06 & 81.91 & 91.16 & 89.18 & 76.68 & 74.62 & 82.91 & 86.55 & 80.38 & 68.96 & 67.45 & 75.84 \\ RW [31] & 89.16 & 93.08 & 74.42 & 73.52 & 82.85 & **92.57** & 86.79 & 73.94 & **74.97** & 82.07 & 90.93 & 87.17 & 68.76 & 86.62 & 78.85 \\ Entropy [42] & 90.56 & **93.46** & **74.83** & 73.02 & 82.97 & **92.57** & 90.82 & **78.03** & **74.97** & 84.00 & **91.57** & 85.66 & 67.20 & 69.26 & 78.42 \\ InfoMax [28] & 89.16 & 88.55 & 74.16 & **73.70** & 81.39 & **92.57** & 90.82 & **78.03** & **74.97** & 84.00 & **91.57** & **87.42** & 67.02 & 69.26 & 78.86 \\ SND [29] & **91.97** & **93.46** & **74.83** & 73.02 & 83.32 & 92.17 & 90.82 & **78.03** & **74.97** & 84.00 & 89.96 & 85.66 & 67.20 & 69.26 & 78.02 \\ Corr-C [43] & 91.37 & **93.46** & **74.83** & 73.02 & 83.17 & 91.57 & 85.66 & 73.91 & 74.58 & 81.43 & 86.75 & 80.38 & 67.09 & **69.68** & 75.98 \\ MixVal & 91.77 & 93.21 & 74.74 & 73.44 & 83.29 & 91.77 & **91.74** & 77.35 & 74.58 & 83.36 & 89.96 & 86.33 & **69.91** & 93.19 & **79.00** \\ \hline Worst & 86.75 & 87.17 & 71.18 & 69.93 & 78.76 & 87.35 & 85.66 & 73.91 & 72.20 & 79.78 & 83.73 & 80.38 & 67.09 & 67.45 & 74.66 \\ Best & 91.97 & 93.46 & 74.83 & 74.01 & 83.57 & 92.57 & 92.20 & 78.03 & 75.01 & 84.45 & 91.57 & 87.42 & 70.43 & 69.68 & 79.78 \\ \hline \hline \end{tabular}
\end{table}
Table 19: Accuracy (\(\%\)) of SAFN [23], a closed-set UDA method, on _Office-Home_.

\begin{table}
\begin{tabular}{l|c c c c c c c c c c c} \hline \hline Method &

[MISSING_PAGE_EMPTY:19]