# Night-to-Day Translation via Illumination Degradation Disentanglement

Anonymous Author(s)

Affiliation

Address

email

###### Abstract

Night-to-Day translation (Night2Day) aims to achieve day-like vision for nighttime scenes. However, processing night images with complex degradations remains a significant challenge under unpaired conditions. Previous methods that uniformly mitigate these degradations have proven inadequate in simultaneously restoring daytime domain information and preserving underlying semantics. In this paper, we propose **N2D3** (**Night-to-**D**ay via **D**egradation **D**isentanglement) to identify different degradation patterns in nighttime images. Specifically, our method comprises a degradation disentanglement module and a degradation-aware contrastive learning module. Firstly, we extract physical priors from a photometric model based on Kubelka-Munk theory. Then, guided by these physical priors, we design a disentanglement module to discriminate among different illumination degradation regions. Finally, we introduce the degradation-aware contrastive learning strategy to preserve semantic consistency across distinct degradation regions. Our method is evaluated on two public datasets, **demonstrating a significant improvement of 5.4 FID on BDD100K and 10.3 FID on Alderley**.

## 1 Introduction

Nighttime images often suffer from severe information loss, posing significant challenges to both human visual recognition and computer vision tasks including detection, segmentation, _etc._. In contrast, daylight images exhibit rich content and intricate details. Achieving day-like nighttime vision remains a primary objective in nighttime perception, sparking numerous pioneering works . Night-to-Day image translation (Night2Day) offers a comprehensive solution to achieve day-like vision at night. The primary goal is to transform images from nighttime to daytime while maintaining their underlying semantic structure. However, achieving this goal is challenging. It requires to process complex degraded images using unpaired data, which raises additional difficulties compared to other image translation tasks.

Recently, explorations have been made in Night2Day. Early approaches, such as ToDayGAN, demonstrated the effectiveness of cycle-consistent learning in maintaining semantic structure . Subsequent methods incorporated auxiliary structure regularization techniques, including perceptual loss and uncertainty regularization, to better preserve the original structure . Furthermore, some methods utilized daytime images with nearby GPS locations to aid in coarse structure regularization . However, these methods often neglect the complex degradations at nighttime, applying structure regularization uniformly and resulting in severe artifacts. To address this issue, more recent approaches adopt auxiliary human annotations to maintain semantic consistency, such as segmentation maps and bounding boxes . Despite their potential, these methods are labor-intensive and challenging, especially since many nighttime scenes are beyond human cognition.

The critical limitation of the aforementioned methods is the disregard for complex degraded regions. Specifically, different regions in nighttime images possess varying characteristics, such as extreme darkness, well-lit regions, light effects, _etc._ Treating all these degraded regions equally could adversely impact the results. As illustrated in Figure 1, our key insight emphasizes that nighttime images suffer from various degradations, necessitating customizing restoration for different degradation types. Intuitively, we manage to disentangle nighttime images into patches according to the recognized degradation type and learn individual restoration patterns for them to enhance the overall performance.

Motivated by this point, we propose N2D3 (**N**ight to **D**ay via **D**egradation **D**isentanglement), which utilizes Generative Adversarial Networks (GANs) to bridge the domain gap between nighttime and daytime in a degradation-aware manner, as illustrated in Figure 2. There are two modules in N2D3, including physical-informed degradation disentanglement and degradation-aware contrastive learning, which are employed to preserve the semantic structure of nighttime images. In the disentanglement of nighttime degradation, a photometric model tailored to nighttime scenes is conducted to extract physical priors. Subsequently, the illuminance and physical priors are integrated to disentangle regions into darkness, well-lit, high-light, and light effects. Building on this, degradation-aware contrastive learning is designed to constrain the similarity of the source and generated images in different regions. It comprises disentanglement-guided sampling and reweighting strategies. The sampling strategy mines valuable anchors and hard negative examples, while the reweighting process assigns their weights. They enhance vanilla contrastive learning by prioritizing valuable patches with appropriate attention. Ultimately, our method yields highly faithful results that are visually pleasing and beneficial for downstream vision tasks including keypoint matching and semantic segmentation.

Our contributions are summarized as follows:

(1) We propose the N2D3 translation method based on the illumination degradation disentanglement module, which enables degradation-aware restoration of nighttime images.

(2) We present a novel degradation-aware contrastive learning module to preserve the semantic structure of generated results. The core design incorporates disentanglement-guided sampling and reweighting strategies, which greatly enhance the performance of vanilla contrastive learning.

(3) Experimental results on two public datasets underscore the significance of considering distinct degradation types in nighttime scenes. Our method achieves state-of-the-art performance in visual effects and downstream tasks.

## 2 Related Work

**Unpaired Image-to-Image Translation.** Unpaired image-to-image translation addresses the challenge of lacking paired data, providing an effective self-supervised learning strategy. To overcome the efficiency limitations of traditional cycle-consistency learning, Park _et al_., first introduces contrastive learning to this domain, achieving efficient one-sided learning. Following this work, several studies have improved the contrastive learning by generating hard negative examples , re-weighting positive-negative pairs , and selecting key samples . Furthermore, other constraints, such as density  and path length , have been explored in unpaired image translation. However, all these works neglect physical priors in the nighttime, leading to suboptimal results in Night2Day.

Figure 1: Illustration of our motivation. (a) The disentanglement process leverages physical priors. (b) The image patches are restored individually for each degradation type. (c) The proposed Disentangled Regularization improves the overall performance.

**Nighttime Domain Translation.** Domain translation techniques have been applied to address adverse nighttime conditions. An early contribution is made by Anoosheh _et al._, which demonstrates the effectiveness of cycle-consistent learning in Night2Day. Following this, many works incorporate different modules into cycle-consistent learning to enhance structural modeling capabilities. Zheng _et al._ incorporate a fork-shaped encoder to enhance visual perceptual quality. AUGAN employs uncertainty estimation to mine useful features in nighttime images. Fan _et al._ explore inter-frequency relation knowledge to streamline the Night2Day process. Xia _et al._ utilize nearby GPS locations to form paired night and daytime images, providing weak supervision. Some other studies incorporate human annotations to impose structural constraints, overlooking the practical difficulty of acquiring such annotations at nighttime with multiple degradations . To address the concerns of the aforementioned methods, the proposed N2D3 explores patch-wise contrastive learning with physical guidance, so as to achieve degradation-aware Night2Day. N2D3 is free of human annotations and offers comprehensive structural modeling to provide faithful translation results.

## 3 Methods

Given nighttime image \(_{}\) and daytime image \(_{}\), the goal of Night2Day is to translate images from nighttime to daytime while preserving content semantic consistency. This involves the construction of a mapping function \(\) with parameters \(\), which can be formulated as \(_{}:_{}_{}\). Our method N2D3 is illustrated in Figure 2. To train a generator for Night2Day, we employ GANs as the overall learning framework to bridge the domain gap between nighttime and daytime. Our core design, consisting of the degradation disentanglement module and the degradation-aware contrastive learning module, aims to preserve the structure from the source images and suppress artifacts.

In this section, we first introduce physical priors in the nighttime environment, and then describe the degradation disentanglement module and the degradation-aware contrastive learning module, respectively.

### Physical Priors for Nighttime Environment

The illumination degradations at night are primarily categorized as darkness, well-lit regions, highlight regions, and light effects. As shown in Figure 3, well-lit represents the diffused reflectance under normal light, while the light effects denote phenomena such as flare, glow, and specular reflections. Intuitively, these regions can be disentangled through the analysis of illumination distribution. Among these degradation types, darkness and high-light are directly correlated with illuminance and can be effectively disentangled through illumination estimation.

As a common practice, we estimate the illuminance map \(L\) by utilizing the maximum RGB channel of image \(_{}\) as \(L=_{c R,G,B}_{}^{c}\). Then k-nearest neighbors  is employed to acquire three clusters representing darkness, well-lit, and high-light regions. These clusters are aggregated as masks \(M_{d}\), \(M_{n}\), \(M_{h}\). However, the challenge arises with light effects that are mainly related to

Figure 2: The overall architecture of the proposed N2D3 method. The training phase contains the physical prior informed degradation disentanglement module and degradation-aware contrastive learning module. They are utilized to optimize the ResNet-based generator which is the main part in the inference phase.

the illumination. Light effects regions tend to intertwine with well-lit regions when using only the illumination map, as they often share similar illumination densities. To disentangle light effects from well-lit regions, we need to introduce additional physical priors.

To extract the physical priors for disentangling light effects, we develop a photometric model derived from Kubelka-Munk theory . This model characterizes the spectrum of light \(E\) reflected from an object as follows:

\[E(,x)=e(,x)(1-_{f}(x))^{2}R_{}(,x)+e(,x )_{f}(x),\] (1)

here \(x\) represents the horizontal component for analysis, while the analysis of the vertical component \(y\) is the same as the horizontal component. \(\) corresponds to the wavelength of light. \(e(,x)\) signifies the spectrum, representing the illumination density and color. \(_{f}\) stands for the Fresnel reflectance coefficient. \(R_{}\) is the material reflectivity function, formulated as follows at a specific location \(x=x_{0}\):

\[R()=a()--1},a()=1+,\] (2)

where \(k()\) and \(s()\) denote the absorption and scattering coefficients, respectively. This formulation implies that for any local pixels, the material reflectivity is determined if the material is given. Assuming \(C\) is the material distribution function, which describes the material type varying across locations, the material reflectivity \(R_{}\) can be formulated as:

\[R_{}(,x)=R()C(x).\] (3)

Since the mixture of light effects and well-lit regions has been obtained previously, the core of disentangling light effects from well-lit regions lies in separating the illumination \(e(,x)\) and reflectance components \(R()C(x)\). Note that the Fresnel reflectance coefficient \(_{f}(x)\) approaches 0 in reflectance-dominating well-lit regions, while \(_{f}(x)\) approaches 1 in illumination-dominating light effects regions. According to Equation (1), the photometric model for the mixture of light effects and well-lit regions is formulated as:

\[E(,x)=e(,x),&x\\ e(,x)R()C(x),&x,\] (4)

where \(\) denotes the reflectance-dominating well-lit regions.

Subsequently, we observe that the following color invariant response to the regions with high color saturation, which is suitable to extract the illumination:

\[N_{^{m}x^{n}}=}{^{m-1} x ^{n-1}}\{\},\] (5)

This invariant has the following characteristics:

\[ N_{^{m}x^{n}}&=}{^{m-1} x^{n-1}} \{ \}\\ &=}{^{m-1} x^{n-1}} \{+\}\\ &=}{^{m-1} x^{n}} \{ \}.\] (6)

Figure 3: The first row displays nighttime images, while the second row shows the corresponding degradation disentanglement results. The color progression from **blue**, light blue, green to yellow corresponds to the following regions: darkness, well-lit, light effects, and high-light, respectively.

Equation (5) to Equation (6) demonstrate that the invariant \(N_{^{n}x^{n}}\) captures the features only related to illumination \(e(,x)\). Consequently, we assert that \(N_{^{m}x^{n}}\) functions as a light effects detector because light effects are mainly related to the illumination. It allows us to design the illumination disentanglement module based on this physical prior.

### Degradation Disentanglement Module

In this subsection, we will elucidate how to incorporate the invariant for extracting light effects into the disentanglement in computation. As common practice, the following second and third-order components, both horizontally and vertically, are taken into account in the practical calculation of the final invariant, which is denoted as \(N\):

\[N=^{2}+N_{ x}^{2}+N_{ y}^{2}+N_{  y}^{2}}.\] (7)

here \(N_{ x}\) and \(N_{ x}\) can be computed through \(E(,x)\) by simplifying Equation (5). The calculation of \(N_{ y}\) and \(N_{ y}\) are the same. Specifically,

\[N_{ x}=E-E_{}E_{x}}{E^{2}},N_{ x }=E^{2}-E_{}E_{x}E-2E_{ x }E_{}E+2E_{}^{2}E_{x}}{E^{3}},\] (8)

where \(E_{x}\) and \(E_{}\) denote the partial derivatives of \(x\) and \(\).

To compute each component in the invariant \(N\), we develop a computation scheme starting with the estimation of \(E\) and its partial derivatives \(E_{}\) and \(E_{}\) using the Gaussian color model:

\[E(x,y)\\ E_{}(x,y)\\ E_{}(x,y)=0.06,&0.63,&0.27\\ 0.3,&0.04,&-0.35\\ 0.34,&-0.6,&0.17R(x,y)\\ G(x,y)\\ B(x,y),\] (9)

where \(x,y\) are pixel locations of the image. Then, the spatial derivatives \(E_{x}\) and \(E_{y}\) are calculated by convolving \(E\) with Gaussian derivative kernel \(g\) and standard deviation \(\):

\[E_{x}(x,y,)=_{t}E(t,y),\] (10)

where \(t\) denotes the index of the horizontal component \(x\) and \(\) represents set of integers. The spatial derivatives for \(E_{ x}\) and \(E_{ x}\) are obtained by applying Equation (10) to \(E_{}\) and \(E_{}\). Then invariant \(N\) can be obtained following Equation (8) and Equation (7).

To extract the light effects, ReLU and normalization functions are first applied to filter out minor disturbances. Then, by filtering invariant \(N\) with the well-lit mask \(M_{n}\), we obtain the light effects from the well-lit regions. The operations above can be formulated as:

\[M_{le}=() M_{n},\] (11)

while the well-lit mask are refined: \(M_{n} M_{n}-M_{le}\).

With the initial disentanglement in Section 3.1, we obtain the final disentanglement: \(M_{d}\), \(M_{n}\), \(M_{h}\) and \(M_{le}\). All the masks are stacked to obtain the disentanglement map. Through the employment of the aforementioned techniques and processes, we successfully achieve the disentanglement of various degradation regions.

### Degradation-Aware Contrastive Learning

For unpaired image translation, contrastive learning has validated its effectiveness for the preservation of content. It targets to maximize the mutual information between patches in the same spatial location from the generated image and the source image as below:

\[(v,v^{+},v^{-})=-/)}{(v v^{+}/ )+_{n=1}^{Q}(v v_{n}^{-}/)},\] (12)

\(v\) is the anchor that denotes the patch from the generated image. The positive example \(v^{+}\) corresponds to the source image patch with the same location as the anchor \(v\). The negative examples \(v^{-}\) represent patches with locations distinct from that of the anchor \(v\). \(Q\) denotes the total number of negative examples. In our work, the key insight of degradation-aware contrastive learning lies in two folds: (1) How to sample the anchor, positive, and negative examples. (2) How to manage the focus on different negative examples.

**Degradation-Aware Sampling.** In this paper, N2D3 selects the anchor, positive, and negative patches under the guidance of the disentanglement results. Initially, based on the disentanglement mask obtained in the Section 3.2, we compute the patch count for different degradation types, denoting as \(K_{s},s\). Then, within each degradation region, the anchors \(v\) are randomly selected from the patches of generated daytime images \(I_{}\). The positive examples \(v^{+}\) are sampled from the same locations with the anchors in the source nighttime images \(I_{}\), and the negative examples \(v^{-}\) are randomly selected from other locations of \(I_{}\). For each anchor, there is one corresponding positive example and \(K_{s}\) negative examples. Subsequently, the sample set with the same degradation type will be assigned weights and the contrastive loss will be computed in the following steps.

**Degradation-Aware Reweighting.** Despite the careful selection of anchor, positive, and negative examples, the importance of anchor-negative pairs still differs within the same degradation. A known principle of designing contrastive learning is that the hard anchor-negative pairs (_i.e._, the pairs with high similarity) should assign higher attention. Thus, weighted contrastive learning can be formulated as:

\[(v,v^{+},v^{-},w_{n})=-/)}{(v v^{ +}/)+_{n=1}^{Q}w_{n}(v v_{n}^{-}/)},\] (13)

\(w_{n}\) denotes the weight of the \(n\)-th anchor-negative pairs.

The contrastive objective is depicted in the _Similarity Matrix_ in Figure 2. The patches in different regions are obviously easy examples. We suppress their weights to 0, which transforms the similarity matrix into a blocked diagonal matrix with \(diag(A_{1},,A_{4})\). Within each degradation matrix \(A_{s},s\), a soft reweighting strategy is implemented. Specifically, for each anchor-negative pair, we apply optimal transport to yield an optimal transport plan, serving as a reweighting matrix associated with the disentangled results. It can adaptively optimize and avoid manual design. The reweight matrix for each degradation type is formulated as:

\[_{w_{ij},i,j[1,K_{s}]}&[_{i =1}^{K_{s}}_{j=1,i j}^{K_{s}}w_{ij} v_{j}^{-}/ )}],\\ &_{i=1}^{K_{s}}w_{ij}=1,_{j=1}^{K_{s}}w_{ij}=1,i,j[1,K _{s}],\] (14)

The aforementioned operations transform the contrastive objective to the _Block Diagonal Similarity Matrix_ depicted in Figure 2. As a common practice, our degradation-aware contrastive loss is applied to the \(S\) layers of the CNN feature extractor, formulated as:

\[_{DegNCE}()=_{l=1}^{S}(v,v^{+},v^{-},w_{n}).\] (15)

### Other Regularizations

As a common practice, GANs are employed to bridge the domain gap between daytime and nighttime. The adversarial loss is formulated as:

\[_{adv}()&=||D( _{})-1||_{2}^{2},\\ _{adv}(D)&=||D(_{}) -1||_{2}^{2}+||D(_{})||_{2}^{2},\] (16)

where \(D\) denotes the discriminator network. The final loss function is formatted as :

\[()&= _{adv}()+_{DegNCE}(),\\ (D)&=_{adv}(D).\] (17)Experiments

### Experimental Settings

**Datasets.** Experiments are conducted on the two public datasets BDD100K  and Alderley . **Alderley** dataset consists of images captured along the same route twice: once on a sunny day and another time during a stormy rainy night. The nighttime images in this dataset are often blurry due to the rainy conditions, which makes Night2Day challenging. **BDD100K** dataset is a large-scale high-resolution autonomous driving dataset. It comprises 100,000 video clips under various conditions. For each video, a keyframe is selected and meticulously annotated with details. We reorganized this dataset based on its annotations, resulting in 27,971 night images for training and 3,929 night images for evaluation.

**Evaluation Metric.** Following common practice, we utilize the _Frechet Inception Distance_ (FID) scores  to assess whether the generated images align with the target distribution. This assessment helps determine if a model effectively transforms images from the night domain to the day domain. Additionally, we seek to understand the extent to which the generated daytime images maintain structural consistency compared to the original inputs. To measure this, we employ SIFT scores, mIoU scores and LPIPS distance .

**DownStream Vision Task.** Two downstream tasks are conducted. In the Alderley dataset, GPS annotations indicate the locations of two images, one in the nighttime and the other in the daytime, as the same. We calculate the number of SIFT-detected key points between the generated daytime images and their corresponding daytime images to measure if the two images represent the same location. The BDD100K dataset includes 329 night images with semantic annotations. We employ Deeplabv3 pretrained on the Cityscapes dataset as the semantic segmentation model , then perform inference on our generated daytime images without any additional training and compute the mIoU (mean Intersection over Union).

### Results on Alderley

We first apply Night2Day on the Alderley dataset, a challenging collection of nighttime images captured on rainy nights. In Figure 4, we present a visual comparison of the results. CycleGAN  and CUT  manage to preserve the general structural information of the entire image but often lose many fine details. ToDayGAN , ForkGAN , Decent , and Santa  tend to miss important elements such as cars in their results.

In Table 1, thirteen translation methods and three enhancement methods are compared, considering both visual effects and keypoint matching metrics. Our method showcases **an improvement of 10.3

  Dataset &  &  \\  Methods & FID\(\) & LPIPS\(\) & SIFT\(\) & FID\(\) & LPIPS\(\) & mIoU\(\) \\  Original & Conf./Jour. & 210 & - & 3.12 & 101 & - & 15.63 \\  CycleGAN & ICCV 2017 & 167 & 0.706 & 3.36 & 51.7 & 0.477 & 13.42 \\ StarGAN & CVPR 2018 & 117 & - & 3.28 & 68.3 & - & - \\ ToDayGAN & ICRA 2019 & 104 & 0.770 & 4.14 & 43.8 & 0.577 & 16.77 \\ UGAIT & ICLR 2020 & 170 & - & 2.51 & 72.2 & - & - \\ CUT & ECCV 2020 & 64.7 & 0.707 & 6.78 & 55.5 & 0.583 & 9.30 \\ ForkGAN & ECCV 2020 & 61.2 & 0.759 & 12.1 & 37.6 & 0.581 & 11.81 \\ AUGAN & BMVC 2021 & 65.2 & - & - & 38.6 & - & - \\ MoNCE & CVPR 2022 & 72.7 & 0.737 & 6.35 & 40.2 & 0.502 & 17.21 \\ Decent & NIPS 2022 & 76.5 & 0.768 & 6.31 & 40.3 & 0.582 & 10.49 \\ Santa & CVPR 2023 & 67.1 & 0.757 & 6.93 & 36.9 & 0.559 & 11.03 \\ N2D-LPNet & CVPR 2023 & - & - & - & 69.1 & - & - \\  EnlightenGAN  & TIP 2021 & 209.8 & - & 2.00 & 103.5 & - & 16.10 \\ Zero-Dec  & TPAMI 2022 & 246.4 & - & 4.34 & 90.5 & - & 15.90 \\ DeLight  & ECCV 2022 & 222.9 & - & 3.07 & 113.8 & - & 14.48 \\ LLformer  & AAAI 2023 & 275.6 & - & 7.62 & 123.1 & - & 15.28 \\ WCDM  & ToG 2023 & 239.6 & - & 7.10 & 124.3 & - & 16.32 \\ GSAD  & NIPS 2023 & 214.7 & - & 6.29 & 116.0 & - & 15.76 \\  N2D3(Ours) & - & **50.9** & **0.650** & **16.62** & **31.5** & **0.466** & **21.58** \\  

Table 1: The quantitative results on Alderley and BDD100k. \(\) means lower result is better. \(\) means higher is better.

in FID scores and 4.52 in SIFT scores** compared to the previous state-of-the-art. This suggests that N2D3 successfully achieves photorealistic daytime image generation, underscoring its potential for robotic localization applications. The qualitative comparison results are demonstrated in Figure 4. In conclusion, N2D3 achieves top scores in both FID and LPIPS metrics, demonstrating its superiority in the Night2Day task. N2D3 excels in generating photorealistic daytime images while effectively preserving structures, even in challenging scenarios such as rainy nights in the Alderley.

### Results on BDD100K

We conducted experiments on a larger-scale dataset, BDD100K, focusing on more general night scenes. The qualitative results can be found in Figure 5. CycleGAN, ToDayGAN, and CUT succeed in preserving the structure in well-lit regions. ForkGAN, Santa, and Decent demonstrate poor performance in such challenging scenes. Regretfully, none of them excel in handling light effects and exhibit weak performance in maintaining global structures. With a customized design specifically addressing light effects, our method successfully preserves the structure in all regions.

The quantitative results are presented in Table 1. As the scale of the dataset increases, all the compared methods show an improvement in their performance. Notably, N2D3 demonstrates the best performance with **a significant improvement of 5.4 in FID scores**, showcasing its ability to handle a broader range of nighttime scenes and establishing itself as the most advanced method in this domain.

We also investigate the potential of Night2Day in enhancing downstream vision tasks in nighttime environments using the BDD100K dataset. The quantitative results are summarized in Table 1. The enhancement methods demonstrate a slight improvement in segmentation results, while some image-to-image translation methods have a negative impact on performance. N2D3 exhibits the best performance in enhancing nighttime semantic segmentation with **a remarkable improvement of 5.95 in mIoU** compared to inferring the segmentation model directly on nighttime images.

In conclusion, N2D3 achieves top scores in both FID and LPIPS metrics, establishing itself as the most advanced method for the Night2Day task. It excels in generating photorealistic daytime images while preserving local and global structures. Moreover, the substantial improvement in nighttime semantic segmentation highlights its benefits for downstream tasks and its potential for wide-ranging applications.

Figure 4: The qualitative comparison results on the Alderley dataset.

Figure 5: The qualitative comparison results on the BDD100K dataset.

### Ablation Study

**Ablation on the main component of degradation-aware contrastive learning.** The core design of the degradation-aware contrastive learning module relies on two main components: (a) degradation-aware sampling, and (b) degradation-aware reweighting. As shown in Table 2, when degradation-aware sampling is exclusively activated, there is a noticeable decrease in FID on both datasets compared to the baseline (no components activated). Notably, the combination of degradation-aware sampling and reweighting achieves the lowest FID on both BDD100K and Alderley, indicating the effectiveness of degradation-aware sampling in conjunction with degradation-aware reweighting.

**Ablation on the number of patches in the degradation-aware sampling.** To explore the impact of the number of sampling patches in our method, we conduct an ablation study on the number of sampling patches with settings of 64, 128, 256, 512, and 1024 for degradation-aware sampling. The FID and LPIPS scores are evaluated, as shown in Figure 6. The optimal performance is achieved with 256 patches, and increasing the number of sampling patches beyond this point leads to a degradation in performance.

**Ablation on the type of the invariant in disentanglement.** To explore different invariants for obtaining degradation-disentangled prototypes, we conduct an ablation study on the type of invariant. As shown in Table 2, when \(L\) is enabled, the FID decreases from 55.5 to 49.1 on BDD100K and from 64.7 to 62.9 on Alderley. This suggests that incorporating illuminance maps helps in reducing the perceptual gap between generated and source nighttime images. When \(N\) is activated, there is a consistent improvement in FID on both datasets, indicating that considering physical priors invariant contributes to more realistic image generation. The combination of both illuminance map and physical prior invariant results in the lowest FID on both datasets, showcasing the complementary nature of these degradation types in improving contrastive learning.

## 5 Conclusion

This paper introduces a novel solution for the Night2Day image translation task, focusing on translating nighttime images to their corresponding daytime counterparts while preserving semantic consistency. To achieve this objective, the proposed method begins by disentangling the degradation presented in nighttime images, which is the key insight of our method. To achieve this, we contribute a degradation disentanglement module and a degradation-aware contrastive learning module. Our method outperforms the existing state-of-the-art, which shows the effectiveness of N2D3 and the superiority of the insight to disentangle the degradation.

   &  &  &  &  &  \\  (a) & (b) & FID & LPIPS & FID & LPIPS & SIFT & L & N & FID & LPIPS & FID & LPIPS & SIFT \\  \(\) & \(\) & 55.5 & 0.583 & 64.7 & 0.707 & 6.78 & \(\) & 55.5 & 0.583 & 64.7 & 0.707 & 6.78 \\ \(\) & \(\) & 36.9 & 0.495 & 56.6 & 0.698 & 16.52 & \(\) & 49.1 & 0.592 & 62.9 & 0.726 & 9.83 \\ \(\) & \(\) & 31.5 & 0.466 & 50.9 & 0.650 & 16.62 & \(\) & 31.5 & 0.466 & 50.9 & 0.650 & 16.62 \\  

Table 2: The quantitative results of ablation on the main component of degradation-aware contrastive learning. (a) denotes the degradation-aware sampling, and (b) denotes the degradation-aware reweighting. \(L\) and \(N\) denotes the invariant types.

Figure 6: The quantitative results of ablation on the number of patches of the degradation-aware sampling.