# No-Regret Online Prediction with Strategic Experts

Omid Sadeghi   Maryam Fazel

University of Washington

Seattle, WA 98195

{omids,mfazel@uw.edu}

###### Abstract

We study a generalization of the online binary prediction with expert advice framework where at each round, the learner is allowed to pick \(m 1\) experts from a pool of \(K\) experts and the overall utility is a modular or submodular function of the chosen experts. We focus on the setting in which experts act strategically and aim to maximize their influence on the algorithm's predictions by potentially misreporting their beliefs about the events. Among others, this setting finds applications in forecasting competitions where the learner seeks not only to make predictions by aggregating different forecasters but also to rank them according to their relative performance. Our goal is to design algorithms that satisfy the following two requirements: 1) _Incentive-compatible_: Incentivize the experts to report their beliefs truthfully, and 2) _No-regret_: Achieve sublinear regret with respect to the true beliefs of the best-fixed set of \(m\) experts in hindsight. Prior works have studied this framework when \(m=1\) and provided incentive-compatible no-regret algorithms for the problem. We first show that a simple reduction of our problem to the \(m=1\) setting is neither efficient nor effective. Then, we provide algorithms that utilize the specific structure of the utility functions to achieve the two desired goals.

## 1 Introduction

Learning from a constant flow of information is one of the most prominent challenges in machine learning. In particular, online learning requires the learner to iteratively make decisions and at the time of making each decision, the outcome associated with it is unknown to the learner. The _experts problem_ is perhaps the most well-known problem in online learning . In this problem, the learner aims to make predictions about a sequence of \(T\) binary events. To do so, the learner has access to the advice of \(K\) experts who each have internal beliefs about the likelihood of each event. At each round \(t[T]\), the learner has to choose one among the advice of \(K\) experts and upon making her choice, the \(t\)-th binary event is realized and a loss bounded between zero and one is revealed. The goal of the learner is to have no regret, i.e., to perform as well as the best-fixed expert in hindsight.

In many applications, however, the experts are strategic and wish to be selected by the learner as often as possible. To this end, they may strategically misreport their beliefs about the events. For instance, FiveThirtyEight1 aggregates different pollsters according to their past performance to make a single prediction for elections and sports matches. To do so, FiveThirtyEight maintains publicly available pollster ratings2. A low rating can be harmful to the pollster's credibility and adversely impact their revenue opportunities in the future. Therefore, instead of maximizing their expected performance by reporting their predictions truthfully, the pollsters may decide to take risks and report more extreme beliefs to climb higher on the leaderboard. Therefore, it is important to design algorithms that not only achieve _no-regret_ but also motivate the experts to report their true beliefs (_incentive-compatible_).

Otherwise, the quality of the learner's predictions may be harmed.

As we have mentioned in Section 1.1, all the previous works on this topic have focused on the standard experts problem where the goal is to choose a _single_ expert among the \(K\) experts. In the offline setting, this is equivalent to a forecasting competition in which only the single highest-ranked forecaster wins and receives prizes. However, in many applications, a _set_ of top-performing forecasters are awarded perks and benefits. For instance, in the Good Judgement Project, a recent geopolitical forecasting tournament, the top \(2\%\) of forecasters were given the "superforecaster" status and received benefits such as paid conference travel and employment opportunities . Similarly, in the latest edition of Kaggle's annual machine learning competition to predict the match outcomes of the NCAA March Madness college basketball tournament (called "March Machine Learning Mania 2023"3), the top 8 forecasters on the leaderboard received monetary prizes.

Variants of the \(m\)-experts problem have been previously studied in [6; 7; 8; 9], however, all of these works focused only on providing no-regret algorithms for the problem and the incentive compatibility considerations were not taken into account. To the best of our knowledge, this is the first work that focuses on the strategic \(m\)-experts problem where the experts may misreport their true beliefs to increase their chances of being chosen by the learner.

For the setting with modular utilities, perhaps the simplest approach to learning well compared to the best-fixed set of \(m\) experts while maintaining incentive compatibility is to run the incentive-compatible WSU algorithm of  for the standard experts problem (the setting with \(m=1\)) over the set of \({K m}\) meta-experts where each meta-expert corresponds to one of the sets of size \(m\). This approach has two major drawbacks: 1) There are exponentially many meta-experts and maintaining weights per each meta-expert and running the WSU algorithm is computationally expensive, and 2) The dependence of the regret bound on \(m\) is sub-optimal. Therefore, for our setting, it is preferable to design algorithms that are tailored for the \(m\)-experts problem.

### Related work

Prior works have studied the experts problem under incentive compatibility considerations for two feedback models: In the full information setting, the learner observes the reported prediction of all experts at each round. In the partial information setting, however, the learner is restricted to choosing a single expert at each round and does not observe the prediction of other experts.  considered algorithms that maintain weights over the experts and choose experts according to these weights. They assumed that experts' incentives are only affected by the unnormalized weights of the algorithm over the experts. However, since the probability of an expert being chosen by the learner equals her normalized weight, the aforementioned assumption might not be suitable. Later on,  made the assumption that at each round \(t[T]\), incentives are tied to the expert's normalized weight (i.e., the probability of being chosen at round \(t+1\)) and studied this problem under both feedback models. They proposed the WSU and WSU-UX algorithms for the full information and partial information settings respectively where both algorithms are incentive-compatible and they obtained \((K})\) and \((T^{2/3}(KK)^{1/3})\) regret bounds for the algorithms. Then,  considered _non-myopic_ strategic experts where the goal of each expert is to maximize a conic combination of the probabilities of being chosen in all subsequent rounds (not just the very next round). They showed that the well-known Follow the Regularized Leader (FTRL) algorithm with the negative entropy regularizer obtains a regret bound of \((K})\) while being \((})\) approximately incentive-compatible, i.e., it is a strictly dominated strategy for any expert to make reports \((})\) distant from their true beliefs.

For the non-strategic \(m\)-experts problem with modular utilities,  proposed the Component Hedge (CH) algorithm and obtained a regret bound of \(()}+m()\) where \(^{*}\) is the cumulative loss of the best-chosen set in hindsight. They also gave a matching lower bound for this problem.  studied the FTPL algorithm with Gaussian noise distribution and provided an \((m()})\) regret bound for this setting. For the non-strategic \(m\)-experts problem with submodular utility functions,  proposed the online distorted greedy algorithm (with dual averaging algorithm as the algorithm \(_{i}\) for \(i=1,,m\)) whose regret bound is \((()})\). More recently,  studied the \(m\)-experts problem under various choices of the utility function (sum-reward, max-reward, pairwise-reward and monotone reward). In particular, for the setting with modular utilities (sum-reward), they proposedan algorithm that matches the optimal regret bound of the CH algorithm while being computationally more efficient.

### Contributions

In this paper, we focus on a generalization of the experts problem (called "\(m\)-experts problem") where at each round, instead of picking a single expert, we are allowed to pick \(m 1\) experts and our utility is either a modular or submodular function of the chosen experts. In particular, at round \(t[T]\) and for a set of experts \(S_{t}[K]\), the utility function is defined as \(f_{t}(S_{t})=|}{m}-_{i S_{t}}_{i,t}\) and \(f_{t}(S_{t})=1-_{i S_{t}}_{i,t}\) in the modular and submodular cases respectively where \(_{i,t}\) is the loss of expert \(i\) at round \(t\). The goal is to design algorithms that perform as well as the best-fixed set of \(m\) experts in hindsight (_no-regret_) and incentivize the experts to report their beliefs about the events truthfully (_incentive-compatible_).

Towards this goal, we build upon the study of the Follow the Perturbed Leader (FTPL) algorithm for the \(m\)-experts problem with modular utility functions by  and derive a sufficient condition for the perturbation distribution to guarantee approximate incentive compatibility. Furthermore, we show how this condition is related to the commonly used bounded hazard rate assumption for noise distribution. In particular, we show that while FTPL with Gaussian perturbations is not incentive-compatible, choosing Laplace or hyperbolic noise distribution guarantees approximate incentive compatibility.

Moreover, inspired by Algorithm 1 of  for online monotone submodular maximization subject to a matroid constraint, we first introduce a simpler algorithm (called the "online distorted greedy algorithm") for the special case of cardinality constraints. This algorithm utilizes \(m\) incentive-compatible algorithms for the standard experts problem (i.e., \(m=1\) setting) and outputs their combined predictions. We provide \((1-)\)-regret bounds for the algorithm where \(c\) is the average curvature of the submodular utility functions. Therefore, applying the algorithm to the setting where the utility functions are modular (i.e., \(c=0\)), the approximation ratio is \(1\). For submodular utility functions, the algorithm achieves the optimal \(1-\) approximation ratio.

Finally, we validate our theoretical results through experiments on data gathered from a forecasting competition run by FiveThirtyEight in which forecasters make predictions about the match outcomes of the recent \(2022\)-\(2023\) National Football League (NFL).

## 2 Preliminaries

**Notation.** The set \(\{1,2,,n\}\) is denoted by \([n]\). For vectors \(x_{t},y^{n},x_{i,t}\) and \(y_{i}\) denote their \(i\)-th entry respectively. Similarly, for a matrix \(A^{n n}\), we use \(A_{i,j}\) to indicate the entry in the matrix's \(i\)-th row and \(j\)-th column. The inner product of two vectors \(x,y^{n}\) is denoted by either \( x,y\) or \(x^{T}y\). For a set function \(f\), we use \(f(j|A)\) to denote \(f(A\{j\})-f(A)\).

A set function \(f\) defined over the ground set \(V\) is monotone if for all \(A B V\), \(f(A) f(B)\) holds. \(f\) is called submodular if for all \(A B V\) and \(j B\), \(f(j|A) f(j|B)\) holds. In other words, the marginal gain of adding the item \(j\) decreases as the base set gets larger. This property is known as the diminishing returns property. If equality holds in the above inequality for all \(A\), \(B\), and \(j\), the function is called modular. As mentioned in Section 1.2, at round \(t[T]\) and for a set of experts \(S[K]\), the submodular utility function is defined as \(f_{t}(S_{t})=1-_{i S_{t}}_{i,t}\) where \(_{i,t}\) is the loss of expert \(i\) at round \(t\). To show that this function is submodular, note that we have:

\[f(A\{j\})-f(A)=(1-_{j,t})_{i A}_{i,t}(1-_{j,t}) _{i B}_{i,t}=f(B\{j\})-f(B),\]

where the inequality follows from \(_{i,t}\) for \(i B A\).

For a normalized monotone submodular set function \(f\) (i.e., \(f()=0\)), the curvature \(c_{f}\) is defined as :

\[c_{f}=1-_{j V})}{f(\{j\})}.\]

It is easy to see that \(c_{f}\) always holds. \(c_{f} 1\) is due to monotonicity of \(f\) and \(c_{f} 0\) follows from \(f\) being submodular. Curvature characterizes how submodular the function is. If \(c_{f}=0\), the function is modular, and larger values of \(c_{f}\) correspond to the function exhibiting a stronger diminishing returns structure.

\(m\)-experts problem

We introduce the \(m\)-experts problem in this section. In this problem, there are \(K\) experts available and each expert makes probabilistic predictions about a sequence of \(T\) binary outcomes. At round \(t[T]\), expert \(i[K]\) has a private belief \(b_{i,t}\) about the outcome \(r_{t}\{0,1\}\), where \(r_{t}\) and \(\{b_{i,t}\}_{i=1}^{K}\) are chosen arbitrarily and potentially adversarially. Expert \(i\) reports \(p_{i,t}\) as her prediction to the learner. Then, the learner chooses a set \(S_{t}\) containing \(m\) of the experts. Upon committing to this action, the outcome \(r_{t}\) is revealed, and expert \(i\) incurs a loss of \(_{i,t}=(b_{i,t},r_{t})\) where \(:\{0,1\}\) is a bounded loss function. In this paper, we focus on the quadratic loss function defined as \((b,r)=(b-r)^{2}\). The utility of the learner at round \(t\) is one of the following:

\(\) **Modular utility function:**\(f_{t}(S_{t})=|}{m}-_{i S_{t}}_{i,t}=|}{m}-_{i S_{t}}(b_{i,t},r_{t})\).

\(\) **Submodular utility function:**\(f_{t}(S_{t})=1-_{i S_{t}}_{i,t}=1-_{i S_{t}}(b_{i,t},r_{ t})\).

It is easy to see that \(f_{t}\) is monotone in both cases and \(f_{t}(S_{t})\) holds. Note that the utility at each round is defined with respect to the true beliefs of the chosen experts rather than their reported beliefs.

The goal of the learner is twofold:

1) Minimize the \(\)-regret defined as \(\)-\(R_{T}=_{S[K]:|S|=m}_{t=1}^{T}f_{t}(S )-_{t=1}^{T}f_{t}(S_{t})\), where the expectation is taken with respect to the potential randomness of the algorithm. For the modular utility function, \(=1\) and for the submodular setting, we set \(=1-}{e}\) (where \(f=_{t=1}^{T}f_{t}\)) which is the optimal approximation ratio for any algorithm making polynomially many queries to the objective function.

2) Incentivize experts to report their private beliefs truthfully. To be precise, at each round \(t[T]\), each expert \(i[K]\) acts strategically to maximize their probability of being chosen at round \(t+1\) and the learner's algorithm is called incentive-compatible if expert \(i\) maximizes this probability by reporting \(p_{i,t}=b_{i,t}\). To be precise, we define the incentive compatibility property below.

**Definition 1**.: _An online learning algorithm is incentive-compatible if for every \(t[T]\), every expert \(i[K]\) with belief \(b_{i,t}\), every report \(p_{i,t}\), reports of other experts \(p_{-i,t}\), every history of reports \(\{p_{j,s}\}_{j[K],s<t}\), and outcomes \(\{r_{s}\}_{s<t}\), we have:_

\[_{r_{t}(b_{i,t})}_{i,t+1}\,|\, \,b_{i,t},p_{-i,t},\{p_{j,s}\}_{j[K],s<t},\{r_{s}\}_{s<t}\] \[_{r_{t}(b_{i,t})}_{i,t+1} \,|\,\,p_{i,t},p_{-i,t},\{p_{j,s}\}_{j[K],s<t},\{r_{s}\}_{s<t},\]

_where \((b)\) denotes a Bernoulli distribution with probability of success \(b\) and \(_{i,t+1}\) is the probability of expert \(i\) being chosen at round \(t+1\)._

In other words, an online learning algorithm is incentive-compatible if it is in the best interest of the experts to report their private beliefs truthfully to maximize the probability of being chosen for the next round.

As mentioned earlier, we focus on the quadratic loss function in this paper. The quadratic loss function is an instance of proper loss functions , i.e., the following holds:

\[_{r(b)}[(p,r)]_{r(b) }[(b,r)]\,\, p b,\]

i.e., each expert minimizes her expected loss (according to their true belief \(b\)) by reporting truthfully.

### Motivating applications

Several interesting motivating applications could be cast into our framework. We mention two classes of such applications below.

\(\) _Forecasting competitions_: In this problem, there are a set of \(K\) forecasters who aim to predict the outcome of sports games or elections (between two candidates). At each round \(t[T]\), information on the past performance of the two opposing teams or candidates is revealed and forecasters provide a probabilistic prediction (as a value between \(\)) about which team or candidate will win. The learner can choose up to \(m\) forecasters at each round and her utility is simply the average of the utilities of chosen experts.

\(\) _Online paging problem with advice_: There is a library \(\{1,,N\}\) of \(N\) distinct files. A cache with limited storage capacity can store at most \(m\) files at any time. At each round \(t[T]\), a user arrives and requests one file. The learner has access to a pool of \(K\) experts where each expert \(i[K]\) observes the user history and makes a probabilistic prediction \(p_{i,t}^{N}\) for the next file request (where \(1^{T}p_{i,t}=1\)). For instance, \(p_{i,t}=e_{j}\) if expert \(i\) predicts the file \(j[N]\) where \(e_{j}\) is the \(j\)-th standard basis vector. Also, \(r_{t}=e_{j}\) if the \(j\)-th file is requested at round \(t[T]\). The learner can choose \(m\) of these experts at each round and put their predictions in the cache. The learner's prediction for round \(t\) is correct if and only if one of the \(m\) chosen experts has correctly predicted the file. Thus, the loss of expert \(i\) can be formulated as \(_{i,t}=\|p_{i,t}-r_{t}\|_{2}^{2}\) and the utility at round \(t\) could be written as \(f_{t}(S_{t})=2-_{i S_{t}}_{i,t}\) which is exactly our submodular utility function. Note that this is a slight generalization of our framework where instead of binary outcomes, we consider nonbinary (categorical) outcomes. All our results could be easily extended to this setting as well.

### Naive approach

The WSU algorithm of  for the standard experts problem is derived by drawing a connection between online learning and wagering mechanisms. The framework of one-shot wagering mechanisms was introduced by  and is as follows: There are \(K\) experts and each expert \(i[K]\) holds a belief \(b_{i}\) about the likelihood of an event. Expert \(i\) reports a probability \(p_{i}\) and a wager \(_{i} 0\). A wagering mechanism \(\) is a mapping from the reports \(p=(p_{1},,p_{K})\), wagers \(=(_{1},,_{K})\) and the realization \(r\) of the binary event to the payments \(_{i}(p,,r)\) to expert \(i\). It is assumed that \(_{i}(p,,r) 0\)\( i[K]\), i.e., no expert loses more than her wager. A wagering mechanism is called budget-balanced if \(_{i=1}^{K}_{i}(p,,r)=_{i=1}^{K}_{i}\). [17; 18] introduced a class of incentive-compatible budget-balanced wagering mechanisms called the Weighted Score Wagering Mechanisms (WSWMs) which is defined as follows: For a fixed proper loss function \(\) bounded in \(\), the payment to expert \(i\) is

\[_{i}(p,,r)=_{i}1-(p_{i},r)+_{j=1}^{K}_{ j}(p_{j},r).\]

The proposed algorithm in  is called Weighted-Score Update (WSU) and the update rule for the weights of the experts \(\{_{t}\}_{t=1}^{T}\) is the following:

\[_{i,t+1}=_{i}(p_{t},_{t},r_{t})+(1-)_{i,t},\]

where \(_{i,1}=\)\( i[K]\). In other words, the normalized weights of the experts at round \(t\) are interpreted as the wager of the corresponding expert, and the normalized weights at round \(t+1\) are derived using a convex combination of the weights at the previous round and the payments in WSWM. Note that since WSWM is budget-balanced, the derived weights at each round automatically sum to one and there is no need to normalize the weights (which might break the incentive compatibility). Also, considering the incentive compatibility of WSWM, the WSU algorithm is incentive-compatible as well.

The update rule of WSU could be rewritten as follows:

\[_{i,t+1}=_{i,t}1-_{i,t}+_{j=1}^{K}_{j,t}_{j,t} +(1-)_{i,t}=_{i,t}(1- L_{i,t}),\]

where \(L_{i,t}=_{i,t}-_{j=1}^{K}_{j,t}_{j,t}\). Therefore, the WSU update rule is similar to that of the Multiplicative Weights Update (MWU) algorithm  with the relative loss \(L_{i,t}\) instead of \(_{i,t}\) in the formula.

A simple approach to solving the \(m\)-experts problem with modular utilities (\(_{S,t}=_{j S}_{j,t}\)) is to define an "expert" for each of the possible \(\) sets of size \(m\) and apply the incentive-compatible WSU algorithm of  for the standard experts problem to this setting. Note that we still define incentive compatibility with respect to individual experts (instead of the \(\) meta-experts). To be precise, we define \(_{i,t}=_{S:|S|=m,i S}_{S,t}\). We can show the following:

\[_{i,t+1}=_{S:|S|=m,i S}_{S,t+1}=_{i,t}(1-L_{i,t} )-_{s i}(_{S:|S|=m,\{i,s\} S}_{S,t}) _{s,t}.\]

Given that \(_{i,t+1}\) is linear in \(L_{i,t}\), \(L_{i,t}=_{i,t}-_{j=1}^{K}_{j,t}_{j,t}\) is linear in \(_{i,t}\), and the loss function is proper, we can conclude that incentive compatibility holds in this setting as well.

We summarize the result of this approach in the theorem below.

**Theorem 1**.: _If we apply the WSU algorithm of  to a standard experts problem with \(\) experts corresponding to each \(S\) with \(|S|=m\), and set \(=)}{T}}\), the algorithm is incentive-compatible and its regret is bounded as follows:_

\[[R_{T}]()}).\]

This approach has two major drawbacks:

1) Computational complexity of maintaining weights for each \(\) feasible sets. In particular, we have to do exponentially many queries to the objective function at each round to update these weights.

2) The regret bound has a \(\) dependence on the number of experts \(m\) that is suboptimal.

In the subsequent sections, we propose two efficient algorithmic frameworks that exploit the modular or submodular structure of the utility function and obtain the desired regret and incentive compatibility guarantees.

## 4 Follow the Perturbed Leader (FTPL) algorithm

In this section, we study the well-known Follow the Perturbed Leader (FTPL) algorithm for the \(m\)-experts problem with modular utility functions and study its regret and incentive compatibility guarantees. The algorithm is as follows: At each round \(t[T]\), we first take \(K\) i.i.d. samples \(\{_{i,t}\}_{i=1}^{K}\) from the noise distribution \(\). In particular, we focus on zero-mean symmetric noise distributions from the exponential family, i.e., \(f(_{i,t})(-(_{i,t}))\) where \(:_{+}\) is symmetric about the origin. At round \(t\), we simply keep track of \(_{s=1}^{t-1}_{i,s}+_{i,t}\) for each \(i\) (where \(\) is the step size) and pick the \(m\) experts for whom this quantity is the smallest.  previously studied the FTPL algorithm for a class of problems that includes the \(m\)-experts problem. However, they only focused on the setting with zero-mean Gaussian perturbations. In contrast, we not only extend this analysis to all zero-mean symmetric noise distributions from the exponential family, but we also analyze the incentive compatibility guarantees of the algorithm and determine a sufficient condition for the perturbation distribution under which the algorithm is approximately incentive-compatible. This condition is provided below.

**Condition 1**.: _For all \(z\), \(|^{}(z)| B\) holds for some constant \(B>0\)._

We have \((z)=|z|\) for Laplace distribution. Therefore, \(^{}(z)=(z)\) and \(B=1\). For symmetric hyperbolic distribution, \((z)=}\) holds. So, \(|^{}(z)|=}} 1\) and \(B=1\).

Condition 1 is closely related to a boundedness assumption on the hazard rate of the perturbation distribution. We first define the hazard rate below.

**Definition 2**.: _The hazard rate of \(\) at \(z\) is defined as_

\[_{}(z)=}(z)}{1-F_{}(z)},\]

_where \(f_{}\) and \(F_{}\) are the probability density function (pdf) and the cumulative density function (cdf) of the noise distribution \(\). The maximum hazard rate of \(\) is \(_{}=_{z}_{}(z)\)._

The hazard rate is a statistical tool used in survival analysis that measures how fast the tail of a distribution decays. The theorem below shows the connection between Condition 1 and the bounded hazard rate assumption.

**Theorem 2**.: _If Condition 1 holds for the perturbation distribution \(\) with the constant \(B>0\), we have \(_{} B\)._

However, there are distributions with bounded hazard rates for which \(_{z}|^{}(z)|\) is unbounded (i.e., Condition 1 does not hold). For instance, consider the standard Gumbel distribution. In this case, \((z)=z+(-z)\). Therefore, we have \(^{}(z)=1-(-z)\). So, if \(z-\), \(|^{}(z)|\). Therefore, Condition 1 is strictly stronger than the bounded hazard rate assumption for the noise distribution \(\).

We show how Condition 1 guarantees an approximate notion of incentive compatibility for FTPL.

**Theorem 3**.: _For the FTPL algorithm with a noise distribution satisfying Condition 1 with a constant \(B>0\), at round \(t[T]\), for an expert \(i[K]\), the optimal report from the expert's perspective \(p_{i,t}^{*}\) is at most \(\) away from her belief \(b_{i,t}\), i.e., the following holds:_

\[|p_{i,t}^{*}-b_{i,t}|.\]

Note that while we focused on the incentive structure in which at each round \(t[T]\), experts wish to maximize their probability of being chosen at round \(t+1\), the same argument could be applied to a more general setting where the goal is to maximize a conic combination of probabilities of being chosen at all subsequent round \(s>t\). Therefore, FTPL is approximately incentive compatible with respect to this more general incentive structure as well.

Theorem 3 allows us to bound the regret of the FTPL algorithm with respect to the true beliefs of the experts. First, note that FTPL obtains the following bound with respect to the reported beliefs of the experts.

**Theorem 4**.: _For the FTPL algorithm with noise distribution \(\) satisfying Condition 1 with the constant \(B>0\), if we set \(=)}}\), the following holds:_

\[[_{t=1}^{T}_{i S_{t}}(p_{i,t},r_{t})-_ {S:|S|=m}_{t=1}^{T}_{j S}(p_{j,t},r_{t})] ()}).\]

Using the result of Theorem 3, we have \(|p_{i,t}-b_{i,t}|=|p_{i,t}^{*}-b_{i,t}|\). Moreover, one can easily show that the quadratic loss function is \(2\)-Lipschitz. Therefore, for all \(t[T]\) and \(i[K]\), we have:

\[|(p_{i,t},r_{t})-(b_{i,t},r_{t})|.\]

Putting the above results together, we can obtain the following regret bound for the FTPL algorithm.

\[[1R_{T}]=[_{t=1}^{T}_{i S_{t} }(b_{i,t},r_{t})-_{S:|S|=m}_{t=1}^{T}_{j S}( b_{j,t},r_{t})]()})+.\]

Given that \(=)}}\) in Theorem 4, the expected regret bound is \(()})\). This result is summarized in the following theorem.

**Theorem 5**.: _For the FTPL algorithm with noise distribution \(\) satisfying Condition 1 with the constant \(B>0\), if we set \(=)}}\), the regret bound is \(()})\)._

In order to ensure approximate incentive compatibility, the probability density function of the noise distribution \(f\) needs to be such that \(\) does not grow to infinity for very large \(z\). One way to enforce this condition is via a Lipschitzness assumption on \( f\). Condition 1 implies that \( f\) is \(B\)-Lipschitz. That is why smaller values of \(B\) lead to better approximate incentive compatibility which in turn results in smaller regret bounds (given that the term \(4TC\) appears in the regret bound where \(C\) is the bound on the approximate incentive-compatibility derived in Theorem 3).

We can use the FTPL algorithm to obtain results for the partial information setting as well.  showed that if the hazard rate of the noise distribution is bounded by \(B\), applying the FTPL algorithm to the partial information setting for the \(1\)-expert problem leads to \(()\) regret bounds. Using the result of Theorem 2, we know that if Condition 1 holds, the hazard rate is bounded. Therefore, if the noise distribution satisfies Condition 1, FTPL applied to the \(m\)-experts problem is approximately incentive-compatible and achieves \(()})\) regret bound.

## 5 Online distorted greedy algorithm

In this section, we study the setting where the utility function is submodular. In this case, we have \(f_{t}(S_{t})=1-_{i S_{t}}_{i,t}=1-_{i S_{t}}(b_{i,t},r _{t})\). The problem in this setting could bewritten as an online monotone submodular maximization problem subject to a cardinality constraint of size \(m\).  proposed the online greedy algorithm for this problem whose \((1-)\)-regret is bounded by \(()\). The algorithm works as follows: There are \(m\) instantiations \(_{1},,_{m}\) of no-regret algorithms for the \(1\)-expert problem. At each round \(t[T]\), \(_{i}\) selects an expert \(v_{i,t}[K]\) and the set \(S_{t}=\{v_{1,t},,v_{m,t}\}\) is selected. \(_{i}\) observes the reward \(f_{t}(v_{i,t}|S_{i-1,t})\) where \(S_{j,t}=\{v_{1,t},,v_{j,t}\}\).

Inspired by Algorithm 1 of  for online monotone submodular maximization subject to a matroid constraint, we propose the online distorted greedy in Algorithm 1 for the special case of a cardinality constraint. The algorithm is similar to the online greedy algorithm of  discussed above. However, in the online distorted greedy algorithm, after choosing the set \(S_{t}\) and observing the function \(f_{t}\), we first compute the modular lower bound \(h_{t}\) defined as \(h_{t}(S)=_{i S}f_{t}(i|[K]\{i\})\). We define \(g_{t}=f_{t}-h_{t}\). Note that \(g_{t}\) is monotone submodular as well. The reward of \(_{i}\) for choosing \(v_{i,t}\) at round \(t\) is \((1-)^{m-i}g_{t}(v_{i,t}|S_{i-1,t})+h_{t}(v_{i,t})\) (in case \(v_{i,t} S_{i-1,t}\), we repeatedly take samples from the weight distribution of \(_{i}\) over the experts until we observe an expert not in the set \(S_{i-1,t}\)). This technique was first introduced by  for the corresponding offline problem and it allows us to obtain \((1-}{e})\)-regret bounds (where \(f=_{t=1}^{T}f_{t}\)) with the optimal approximation ratio (optimality was shown by ) instead of the \((1-)\)-regret bounds for the online greedy algorithm.

One particular choice for \(\{_{i}\}_{i=1}^{m}\) is the WSU algorithm of . We summarize the result for this choice in the theorem below.

**Theorem 6**.: _For all \(i[m]\), let \(_{i}\) be an instantiation of the WSU algorithm of  for the 1-expert problem and denote \(f=_{t=1}^{T}f_{t}\). The online distorted greedy algorithm applied to the \(m\)-experts problem obtains the following regret bound:_

\[[(1-}{e})R_{T}]_{i=1}^{m}R_{T}^{(i)},\]

_where \(R_{T}^{(i)}\) is the regret of algorithm \(_{i}\). If \(c_{f}=0\), the algorithm is incentive-compatible._

If \(c_{f}(0,1]\), we can use the online greedy algorithm of  instead to ensure incentive compatibility while maintaining similar bounds for the \((1-)\)-regret.  provided \(()\) regret bounds for the WSU algorithm. If we plug in this bound in the result of Theorem 6, the regret bound of the online distorted greedy algorithm is \((m)\). However, this bound depends linearly on \(m\) which is suboptimal. To remedy this issue, we first provide an adaptive regret bound for the WSU algorithm below.

**Theorem 7**.: _The regret of the WSU algorithm of  is bounded by \((| K}+ K)\) where \(|L_{T}|\) is the cumulative absolute loss of the algorithm._

Note that the bound in Theorem 7 adapts to the hardness of the problem. In the worst case, we have \(|L_{T}|=T\) and recover the \(()\) bound proved in . However, for smaller values of \(|L_{T}|\), the bound in Theorem 7 improves that of . For the non-strategic setting with modular utilities,  proposed the Component Hedge (CH) algorithm and obtained a regret bound of \(()}+m()\) where \(^{*}\) is the cumulative loss of the best-chosen set in hindsight. They also gave a matching lower bound for this problem. Applying the same analysis as in Theorem 7 to the setting of the naive approach with \(\) meta-experts, we can show that the regret bound of WSU matches the aforementioned lower bound.

We can use the above adaptive regret bound to improve the regret bound of the online distorted greedy algorithm. First, note that at round \(t[T]\), the sum of the absolute value of losses incurred by \(\{_{i}\}_{i=1}^{m}\) is bounded as follows:

\[_{i=1}^{m}(1-)^{m-i}g_{t}(v_{i,t}|S_{i-1,t})+h_{t}(v_{i, t})_{i=1}^{m}g_{t}(v_{i,t}|S_{i-1,t})+h_{t}(v_{i, t})}_{=f_{t}(v_{i,t}|S_{i-1,t})}=f_{t}(S_{t}) 1.\]

Therefore, if we denote the cumulative absolute losses incurred by \(_{i}\) with \(|L_{T}^{(i)}|\), we have:

\[_{i=1}^{m}|L_{T}^{(i)}| T.\]Using the result of Theorem 7, we know that the regret bound of the online distorted greedy algorithm is \(_{i=1}^{m}^{(i)}| K}+m K\). \(_{i=1}^{m}^{(i)}|}\) is maximized when \(|L_{T}^{(i)}|=\) for all \(i[m]\). Thus, in the worst case, the expected \((1-}{c})\)-regret bound is \((+m K)\).

While we focused on submodular utility functions in this section, we can also apply the online distorted greedy algorithm to the setting with modular utilities. In this case, we have \(c_{f}=0\), and therefore, the algorithm is incentive-compatible and its \(1\)-regret is bounded by \((+m K)\). Unlike the FTPL algorithm that is only approximately incentive-compatible, the online distorted greedy algorithm applied to modular utility functions is incentive-compatible. However, this comes at the price of an extra \(\) term in the regret bound.

## 6 Experiments

In this section, we evaluate the performance of our proposed algorithms for modular utility functions on a publicly available dataset from a FiveThirtyEight forecasting competition4 in which forecasters make predictions about the match outcomes of the \(2022\)-\(2023\) National Football League (NFL). Before each match, FiveThirtyEight provides information on the past performance of the two opposing teams. Forecasters observe this information and make probabilistic predictions about the likelihood of each team winning the match. Considering that there are 284 different matches in the dataset, we set \(T=284\). Out of the 9982 forecasters who participated in this competition, only 274 made predictions for every single match. We consider two cases: \(K=20\) and \(K=100\). To reduce variance, for each case, we sample 5 groups of \(K\) forecasters from the 274 and run FTPL and Online Distorted Greedy (ODG) 10 times. We set \(m=5\). Given that FTPL is only approximately incentive-compatible and according to the result of Theorem 3, the reported beliefs could be \(\) distant from the true beliefs, we add a uniformly random value in the range \([,]\) to the true beliefs to model this fact. We use the standard Laplace distribution as the perturbation for FTPL. Hence, we set \(B=1\). For both algorithms, the step size \(\) is chosen according to our theoretical results. In Figure 1, we plot the average regret \(_{S[K]:|S|=m}_{=1}^{t}f_{ }(S)-_{=1}^{t}f_{}(S_{})\) of the two algorithms over time (along with error bands corresponding to \(20\)th and \(80\)th percentiles) along with that of the FiveThirtyEight aggregated predictions for \(K=20\) and \(K=100\) settings. Note that while our proposed algorithms choose \(m\) predictions at each round \(t[T]\), the FiveThirtyEight aggregated prediction is a single scalar value. The plots suggest that while the regret of all three algorithms converges to zero as \(t\) gets larger, both our proposed algorithms have superior performance compared to that of the FiveThirtyEight predictions.

## 7 Conclusion and future directions

In this paper, we studied the _\(m\)-experts_ problem, a generalization of the standard binary prediction with expert advice problem where at each round \(t[T]\): 1) The algorithm is allowed to pick \(m 1\) experts and its utility is a modular or submodular function of the chosen experts, and 2) The experts are strategic and may misreport their true beliefs about the \(t\)-th event to increase their probability of being chosen at the next round (round \(t+1\)). The goal is to design algorithms that incentivize experts to report truthfully (i.e., incentive-compatible) and obtain sublinear regret bounds with respect to the true beliefs of the experts (i.e., no-regret). We proposed two algorithmic frameworks for this problem. In Section 4, we introduced the Follow the Perturbed Leader (FTPL) algorithm. Under a certain condition for the noise distribution (Condition 1), this algorithm is approximately incentive-compatible and achieves sublinear regret bounds for modular utility functions. Moreover, in Section 5, we proposed the online distorted greedy algorithm that applies to both modular and submodular utility functions. This algorithm is incentive-compatible but its regret bound is slightly worse than that of FTPL.

This work could be extended in several interesting directions. First, none of the algorithms discussed here or in prior works have taken into account the properties of the quadratic loss function. In particular, this loss function is exp-concave, and  showed that for exp-concave loss functions in the \(1\)-expert problem, the regret bound could be improved to \(( K)\) using the Hedge algorithm without the incentive compatibility property. Designing incentive-compatible algorithms with similarly improved regret bounds for the \(1\)-expert and \(m\)-experts problems is yet to be done. In order to obtain the \(O( K)\) regret bound for the \(1\)-expert problem (with squared loss) using the Hedge algorithm, the algorithm makes a single prediction \(_{i=1}^{K}_{i,t}p_{i,t}\) at round \(t[T]\) and its loss is \((_{i=1}^{K}_{i,t}p_{i,t}-r_{t})^{2}\). In other words, choosing an expert \(i[K]\) with probability \(_{i,t}\) at round \(t\) is not good enough to obtain the improved \(( K)\) regret bound. Moving on to the \(m\)-expert problem, the main challenge for obtaining regret bounds better than \(()\) is to decide how to aggregate the \(K\) predictions as \(m\) scalar values. Second, while we focused on the particular choice of quadratic loss functions, the setting could be extended to other loss functions as well. It is not clear to what extent our results hold when moving beyond the quadratic loss function. Finally,  introduced a framework for augmenting online algorithms for various online problems with predictions or pieces of advice. An interesting future research direction is to extend this setting to the case where the predictions are given by strategic experts and study incentive compatibility guarantees for online problems beyond the \(m\)-experts problem.