# Asynchronous Proportional Response Dynamics: Convergence in Markets with Adversarial Scheduling

Yoav Kolumbus

Cornell University

yoav.kolumbus@cornell.edu &Menahem Levy

The Hebrew University of Jerusalem

menahem.levy@mail.huji.ac.il &Noam Nisan

The Hebrew University of Jerusalem

noam@cs.huji.ac.il

###### Abstract

We study Proportional Response Dynamics (PRD) in linear Fisher markets, where participants act asynchronously. We model this scenario as a sequential process in which at each step, an adversary selects a subset of the players to update their bids, subject to liveness constraints. We show that if every bidder individually applies the PRD update rule whenever they are included in the group of bidders selected by the adversary, then, in the generic case, the entire dynamic converges to a competitive equilibrium of the market. Our proof technique reveals additional properties of linear Fisher markets, such as the uniqueness of the market equilibrium for generic parameters and the convergence of associated no swap regret dynamics and best response dynamics under certain conditions.

## 1 Introduction

A central notion in the study of markets is the _equilibrium_: a state of affairs where no single party wishes to unilaterally deviate from it. The main benefit of focusing on the notion of equilibria lies in what it ignores: how the market can reach an equilibrium (if at all). This latter question is obviously of much interest as well, especially when considering computational aspects,1 and a significant amount of research has been dedicated to the study of "market dynamics" and their possible convergence to an equilibrium. Almost all works that study market dynamics consider synchronous dynamics.

**Synchronous Dynamics:** At each time step \(t\), all participants simultaneously update their behavior based on the state at time \(t-1\).

Such synchronization is clearly difficult to achieve in real markets, and so one might naturally wonder to what extent full synchrony is needed or whether convergence of market dynamics occurs even asynchronously. There are various possible levels of generality of asynchrony to consider. The simplest model considers a sequential scenario in which, at every time step \(t\), an _adversary_ chooses a single participant, and only this participant updates their behavior based on the state at time \(t-1\). The adversary is constrained to adhere to some liveness condition, such as scheduling every participant infinitely often or at least once every \(T\) steps. In the most general model , the adversary may also introduce message delays, leading players to respond to dated information. In this paper, we focus on an intermediate level of permissible asynchrony where updates may occur in an arbitrary asynchronous manner, but message delays are always shorter than the granularity of activation. In our proofs, the adversary's goal is to select the schedule of strategy updates by the players in a way that prevents the dynamic from converging to a market equilibrium.

**Activation Asynchrony:2** Every time step \(t\), an arbitrary subset of participants is chosen by the adversary and all of these participants update their behavior based on the state at time \(t-1\). The adversary must adhere to the liveness condition where for every participant some set that includes them must be chosen at least once every \(T\) consecutive steps.

The market dynamics that we study in this paper are linear Fisher markets  with proportional response dynamics (PRD), a model that has received much previous attention  and for which synchronous convergence to equilibrium is known. While there are a few asynchronous convergence results known for other dynamics, specifically for tatonnement dynamics , there are no such results known for proportional response dynamics, and achieving such results has been mentioned as an open problem in .

**Fisher Markets with Linear Utilities:** There are \(n\) players and \(m\) goods. Each player \(i\) has a budget \(B_{i}\) and each good \(j\) has, w.l.o.g., a total quantity of one. Buyer \(i\)'s utility from getting an allocation \(x_{i}=(x_{i1},...,x_{im})\) is given by \(u_{i}(x_{i})=_{j}a_{ij}x_{ij}\), where the parameters \(a_{ij} 0\) are part of the definition of the market. A market equilibrium is an allocation \(X=(x_{ij})\) (where \(0 x_{ij} 1\)) and a pricing \(p=(p_{j})\) with the following properties. (1) Market clearing: for every good \(j\) it holds that \(_{i}x_{ij}=1\); (2) budget feasibility: for every player \(i\) it holds that \(_{j}x_{ij}p_{j} B_{i}\); and (3) utility maximization: for every player \(i\) and every alternative allocation \(y=(y_{1},...,y_{m})\) with \(_{j}y_{j}p_{j} B_{i}\) we have that \(u_{i}(x_{i}) u_{i}(y)\).

**Proportional Response Dynamics:** At each time step \(t\), each player \(i\) will make a bid \(b^{t}_{ij} 0\) for every good \(j\), where \(_{j}b^{t}_{ij}=B_{i}\). In the first step, the bid is arbitrary. Once bids for time \(t\) are announced, we calculate \(p^{t}_{j}=_{i}b^{t}_{ij}\) and allocate the goods proportionally: \(x^{t}_{ij}=b^{t}_{ij}/p^{t}_{j}\), providing each player \(i\) with utility \(u^{t}_{i}=_{j}a_{ij}x^{t}_{ij}\). At this point, player \(i\) updates its bids for the next step by bidding on each good proportionally to the utility obtained from that good: \(b^{t+1}_{ij}=B_{i} a_{ij}x^{t}_{ij}/u^{t}_{i}\).

From the perspective of the player, proportional response updates can be thought of as a simple parameter-free online learning heuristic, with some similarity to regret-matching  in its proportional updates, but one that considers the utilities directly, rather than the more sophisticated regret vector loss.

It is not difficult to see that a fixed point of this proportional response dynamic is indeed an equilibrium of the Fisher market. Significantly, it was shown in  that this dynamic does converge, in the synchronous model, to an equilibrium. As mentioned, the question of asynchronous convergence was left open. We provide the first analysis of proportional response dynamics in the asynchronous setting, and provide a positive answer to this open question in our "intermdiate" level of asynchrony.

**Theorem 1**.: _For linear Fisher markets, proportional response dynamics with adversarial activation asynchrony, where each player is activated at least once every \(T\) steps, approach the set of market equilibrium bid profiles. The prices in the dynamics converge to the unique equilibrium prices._

The dynamics approaching the set of equilibria means that the distance between the bids at time \(t\) and the set of market equilibrium bid profiles converges to zero as \(t\). Additionally, in Section 7, we show that for generic parameters (i.e., except for measure zero of possible \((a_{ij})\)'s), the market equilibrium bid profile is unique, and thus Theorem 1 implies convergence of the bids to a point in the strategy space. We do not know whether the genericity condition is required for asynchronous convergence of the bids to a point, and we leave this as a minor open problem. We did not analyze the rate of convergence to equilibrium; we leave such analysis as a second open problem. Our main open problem, however, is the generalization to full asynchrony with message delays.

**Open Problem:** Does such convergence occur also in the full asynchronous model where the adversary may introduce arbitrary message delays?

Our techniques rely on considering an associated game obtained by using "modified" utility functions for each of the players: \(_{i}(b)=_{j}b_{ij}(a_{ij})+_{j}p_{j}(1-(p_{j}))\). We show that a competitive market equilibrium (with the original utility functions) corresponds to a Nash equilibrium in the associated game.3 These modified utility functions are an adaptation to an individual utility of afunction \((b)=_{ij}b_{ij}(a_{ij})+_{j}p_{j}(1-(p_{j}))\) that was proposed in  as an objective for a convex program for equilibrium computation.4 This function was first linked with proportional response dynamics in  where it was proven that synchronous proportional response dynamics act as mirror descent on this function. We show that \(\) serves as a potential in our associated game.

**Theorem 2**.: _The following three sets of bid profiles are identical: (1) the set of pure strategy Nash equilibria of the associated game, (2) the set of market equilibria of the Fisher market, and (3) the maximizing set of the potential function \(\)._

The technical core of our proof is to show that not only does a synchronized proportional response step by _all_ the players increase the potential function \(\) but, in fact, every proportional response step by any _subset of the players_ increases this potential function.

The point of view of market equilibria as Nash equilibria of the associated game offers several other advantages, e.g., suggesting several other dynamics that are related to proportional response that can be of interest. For example, we show that letting players best-respond in the associated game corresponds to the limit of a sequence of proportional response steps by a single player, but can be implemented as a single step of such a best-response, which can be computed efficiently by the players and may converge faster to the market equilibrium. Another possibility is using some (internal) regret-minimization dynamics (for the associated game), which would also converge to equilibrium in the generic case since, applying , it is the unique correlated Equilibrium as well.

The structure of the rest of the paper is as follows. In Section 2, we provide further formal details and notations that will be useful for our analysis. In Section 3, we present the associated game and its relation to the competitive equilibria of the market. In Section 4, we study best response dynamics in the associated game and their relation to PRD. In Section 5, we present a key lemma regarding the potential function of the associated game under bid updates by subsets of the players. Then, in Section 6 we complete our proof of convergence for asynchronous PRD. In Section 7, we show the uniqueness of the market equilibrium for generic markets. In Section 8, we provide simulation results that compare the convergence of proportional response dynamics with best response dynamics in the associated game in terms of the actual economic parameters in the market, namely, social welfare and the convergence of the bid profiles. Finally, in Section 9, we conclude and discuss the limitations of our technique and open questions. All proofs in this paper are deferred to the appendix.

### Further Related Work

Proportional response dynamics (PRD) were originally studied in the context of bandwidth allocation in file-sharing systems, where it was proven to converge to equilibrium, albeit only for a restrictive setting . Since then, PRD has been studied in a variety of other contexts, including Fisher markets, linear exchange economies, and production markets. See  for further references. In Fisher markets, synchronous PRD has been shown to converge to market equilibrium for Constant Elasticity of Substitution (CES) utilities in the substitutes regime . For the linear Fisher market setting, synchronous PRD was explained in  as mirror descent on a convex program, previously discovered while developing an algorithm to compute the market equilibrium , and later proven to be equivalent to the famous Eisenberg-Gale program . By advancing the approach of citebir-baum2011distributed, synchronous PRD with mild modifications was proven to converge to a market equilibrium for CES utilities in the complements regime as well . In linear exchange economies, synchronous PRD has been shown to converge to equilibrium in the space of utilities and allocations while prices do not converge and may cycle, whereas for a damped version of PRD, also the prices converge . In production markets, synchronous PRD has been shown to increase both growth and inequalities in the market . PRD has also been proven to converge with quasi-linear utilities , and to remain close to market equilibrium for markets with parameters that vary over time . All the above works consider simultaneous updates by all the players, and the question of analyzing asynchronous dynamics and whether they converge was raised by several authors as an open problem .

Asynchronous dynamics in markets have been the subject of study in several recent works. However, these works examine different models and dynamics than ours, and to our knowledge, our work presents the first analysis of asynchronous proportional response bidding dynamics. In , it is shown that tatonnement dynamics under the activation asynchrony model converge to equilibrium, with results for settings both with and without carryover effects between time units. A later work, , showed that tatonnement price dynamics converge to a market equilibrium under a model of sequential activation where in every step a single agent is activated, and where additionally, the information available to the activated seller about the current demand may be inaccurate within some interval that depends on the range of past demands. A different approach taken in  assumes that each seller has a set of rules affected by the other players' actions and governing its price updates; it is shown that the dynamics in which sellers update the prices based on such rules converge to a unique equilibrium of prices in the activation asynchrony model.

Online learning with delayed feedback has been studied for a single agent in , which established regret bounds that are sub-linear in the total delay. A different approach, presented in , extends online gradient descent by estimating gradients when the reward of an action is not yet available due to delays. When considering multiple agents,  extended the results of . They demonstrated that in continuous games with particular stability property, if agents experience equal delays in each round, online mirror descent converges to the set of Nash equilibria and a modification of the algorithm converges even when delays are not equal.

Classic results regarding the computation of competitive equilibria in markets mostly consider centralized computation and vary from combinatorial approaches using flow networks [26; 27; 28; 45], interior point , and ellipsoid [21; 44] methods, and many more [3; 25; 26; 30; 39; 40; 63]. Eisenberg and Gale devised a convex program which captures competitive equilibria of the Fisher model as its solution . Notable also is the tatonnement model of price convergence in markets dated back to Walras  and studied extensively from Arrow  and in later works.

More broadly, in the game theoretic literature, our study is related to a long line of work on learning in games, starting from seminal works in the 1950s [6; 14; 42; 62], and continuing to be an active field of theoretical research [24; 35; 49; 60; 66], also covering a wide range of classic economic settings including competition in markets [7; 54], bilateral trade [16; 32], and auctions [2; 34; 48], as well as applications such as blockchain fee markets [50; 51; 57] and strategic queuing systems [36; 37]. For a broad introduction to the field of learning in games, see [17; 43]. The vast majority of this literature studies repeated games under the synchronous dynamics model. Notable examples of analyses of games with asynchronous dynamics are , which study best response dynamics with sequential activation, and , which explore best response dynamics in a full asynchrony setting which includes also information delays, and show that in a class of games called max-solvable, convergence of best response dynamics is guaranteed. Our analysis of best response dynamics in Section 4 takes a different route, and does not conclude whether the associated game that we study is max-solvable or not; such an analysis seems to require new ideas.

Our work is also related to a large literature on asynchronous distributed algorithms. We refer to a survey on this literature . The liveness constraint that we consider in the dynamics5 is related to those, e.g., in [4; 67]. Recent works that are conceptually more closely related are [15; 69; 73], which propose asynchronous distributed algorithms for computing Nash equilibria in network games. Notably,  propose an algorithm that converges to an equilibrium in a large class of games in asynchronous settings with information delays. Their approach, however, does not capture proportional response dynamics and does not apply to our case of linear Fisher markets.

## 2 Model and Preliminaries

**The Fisher market**: We consider the classic Fisher model of a networked market in which there is a set of buyers \(\) and a set of divisible goods \(\). We denote the number of buyers and number of goods as \(n=||\), \(m=||\), respectively, and index buyers with \(i\) and goods with \(j\). Buyers are assigned budgets \(B_{i}^{+}\) and have some value6\(a_{ij} 0\) for each good \(j\). Buyers' valuations are normalized such that \(_{j}a_{ij}=1\). It is convenient to write the budgets as a vector \(B=(B_{i})\) and the valuations as a matrix \(A_{n m}=(a_{ij})\), such that \(A,B\) are the parameters defining the market. We denote the allocation of goods to buyers as a matrix \(X=(x_{ij})\) where \(x_{ij} 0\) is the (fractional) amount of good \(j\) that buyer \(i\) obtained. We assume w.l.o.g. (by proper normalization) that there is a unit quantity of each good. The price of good \(j\) (which depends on the players' actions in the market, as explained below) is denoted by \(p_{j} 0\) and prices are listed as a vector \(p=(p_{j})\). Buyers have a linear utility function \(u_{i}(x_{i})=_{j}a_{ij}x_{ij}\) with the budget constraint \(_{j}x_{ij}p_{j} B_{i}\). We assume w.l.o.g. that the economy is normalized, i.e., \(_{i}B_{i}=_{j}p_{j}=1\).

**Market equilibrium**: The competitive equilibrium (or "market equilibrium") is defined in terms of allocations and prices as follows.

**Definition 1**.: _(**Market Equilibrium):** A pair of allocations and prices \((X^{*},p^{*})\) is said to be market equilibrium if the following properties hold:_

1. _Market clearing:_ \( j,\;_{i}x_{ij}^{*}=1\)_,_
2. _Budget feasibility:_ \( i,\;_{j}x_{ij}^{*}p_{j}^{*} B_{i}\)_,_
3. _Utility maximization:_ \( i,\;x_{i}^{*}_{x_{i}}u_{i}(x_{i})\)_._

In words, under equilibrium prices all the goods are allocated, all budgets are used, and no player has an incentive to change their bids given that the prices remain fixed. Notice that this notion of equilibrium is different from a Nash equilibrium of the game where the buyers select their bids strategically, since in the former case, players do not consider the direct effect of possible deviation in their bids on the prices. We discuss this further in Section 3. For linear Fisher markets, it is well established that competitive equilibrium utilities \(u^{*}\) and prices \(p^{*}\) are unique, equilibrium allocations are known to form a convex set, and the following conditions are satisfied.

\[ i,j}{p_{j}^{*}}^{*}}{B_{i}} {and} x_{ij}>0}{p_{j}^{*}}=^{*}}{B_{i}}.\]

This is a detailed characterization of the equilibrium allocation: every buyer gets a bundle of goods in which all goods maximize the value per unit of money. The quantity \(a_{ij}/p_{j}^{*}\) is informally known as "bang-per-buck" (ch. 5 & 6 in ), the marginal profit from adding a small investment in good \(j\).

Market equilibrium bids are also known to maximize the Nash social welfare function (see ) \((X)=_{i}u_{i}(x_{i})^{B_{i}}\) and to be Pareto efficient, i.e., no buyer can improve their utility without making anyone else worse off (as stated in the first welfare theorem).

**The trading post mechanism and the market game (Shapley-Shubik)**: First described in  and studied under different names , the trading post mechanism is an allocation and pricing mechanism which attempts to capture how a price is modified by demand. Buyers place bids on goods, where buyer \(i\) places bid \(b_{ij}\) on good \(j\). Then, the mechanism computes the good's price as the total amount spent on that good and allocates the good proportionally to the bids, i.e., for bids \(b\):

\[p_{j}=_{i=1}^{n}b_{ij} x_{ij}=}{p_{j}}&b_{ ij}>0\\ 0&.\]

Note that the trading post mechanism guarantees market clearing for every bid profile \(b\) in which all goods have at least one buyer who is interested in buying. The feasible bid set of a buyer under the budget constraint is \(S_{i}=\{b_{i}^{m}| j\;b_{ij} 0_{j}b_{ij}=B_{i}\}\), i.e., a scaled simplex. Denote \(S=_{i}S_{i}\) and \(S_{-i}=_{k\{i\}}S_{k}\). Considering the buyers as strategic, one can define the _market game_ as \(G=\{,(S_{i})_{i},(u_{i})_{i}\}\) where the utility functions can be written explicitly as \(u_{i}(b)=u_{i}(x_{i}(b))=_{j=1}^{m}b_{ij}}{p_{j}}\). We sometimes use the notation \(u_{i}(b_{i},b_{-i})\), where \(b_{i}\) is the bid vector of player \(i\) and \(b_{-i}\) denotes the bids of the other players.

**Potential function and Nash equilibrium**: For completeness, we add the following definitions. _Potential function:_ A function \(\) is an exact potential function if \( i, b_{-i} S_{-i}\) and \( b_{i},b_{i}^{} S_{i}\) we have that \((b_{i}^{},b_{-i})-(b_{i},b_{-i})=u_{i}(b_{i}^{},b_{-i})-u_ {i}(b_{i},b_{-i})\), with \(u_{i}\) being \(i\)'s utility function in the game. _Best response:_\(b_{i}^{*}\) is a best response to \(b_{-i}\) if \( b_{i} S_{i} u_{i}(b_{i}^{*},b_{-i}) u_{i}(b_{i},b_{-i})\). That is, no other response of \(i\) can yield a higher utility. _Nash equilibrium:_\(b^{*}\) is Nash equilibrium if \( i\;b_{i}^{*}\) is a best response to \(b_{-i}^{*}\) (no player is incentivized to change their strategy).

**Proportional response dynamics**: As explained in the introduction, the proportional response dynamic is specified by an initial bid profile \(b^{0}\), with \(b_{ij}^{0}>0\) whenever \(a_{ij}>0\), and the following update rule for every player that is activated by the adversary: \(b_{ij}^{t+1}=x_{ij}^{t}}{u_{i}(x_{i}^{t})}B_{i}\). See Section 5 for further details on activation of subsets of the players.

## 3 The Associated Game

As mentioned above, the Fisher market can be naturally thought of as a game in which every one of the \(n\) players aims to optimize their individual utility \(u_{i}(b_{i},b_{-i})\) (see Section 2 for the formal definition). However, it is known that the set of Nash equilibria of this game does not coincide with the set of market equilibria [33; 64], and so a solution to this game (if indeed the players reach a Nash equilibrium) is economically inefficient .

A natural question that arises is whether there is some other objective for an individual player that when maximized by all the players, yields the market equilibrium. We answer positively to this question and show that there is a family of utility functions such that in the "associated games" with these utilities for the players, the set of Nash equilibria is identical to the set of market equilibria of the original game (for further details, see also Appendix A).

However, the fact that a Nash equilibrium of an associated game is a market equilibrium still does not guarantee that the players' dynamics will indeed reach this equilibrium. A key element in our proof technique is that we identify, among this family of associated games, a single game, defined by the "associated utility" \(}(b)=_{j}b_{ij}(a_{ij})+_{j}p_{j}(1-(p_{j}))\), which admits an exact potential. We then use a relation which we show between this game and the proportional response update rule to prove the convergence of our dynamics (Theorem 1).

**Definition 2**.: _(The Associated Game): Let \(G\) be a market game. Define the associated utility of a player \(i\) as \(}(b)=_{j}b_{ij}(a_{ij})+_{j}p_{j}(1-(p_{j}))\). The associated game \(\) is the game with the associated utilities for the players and the same parameters as in \(G\)._

**Theorem 3**.: _For every Fisher market, the associated game \(\) admits an exact potential function that is given by7\((b)=_{ij}b_{ij}(a_{ij})+_{j}p_{j}(1-(p_{j}))\)._

\(\) is constructed such that the function \(\) is its potential. Note that although having similar structure, \(_{i}\) and \(\) differ via summation on \(i\) only in the first term (\(\) is not the sum of the players' utilities).

Once having the potential function defined, the proof is straightforward: the derivatives of the utilities \(}\) and the potential \(\) with respect to \(b_{i}\) are equal for all \(i\). Theorem 2, formally restated below, connects between the associated game, the market equilibria and the potential.

**Theorem**.: _(Restatement of Theorem 2). The following three sets of bid profiles are equal. (1) The set of pure-strategy Nash equilibria of the associated game: \(NE()=\{b^{*}|\  b S}(b^{*})}( b)\}\); (2) the set of market equilibrium bid profiles of the Fisher market: \(\{b^{*}|\ (x(b^{*}),p(b^{*}))\) satisfy Def. 1\(\}\); and (3) the maximizing set of the potential from Theorem 3: \(_{b S}(b)\)._

The proof uses a different associated game \(G^{}\) that has simpler structure than \(\), but does not have an exact potential, and shows that: (i) Nash equilibria of \(G^{}\) are the market equilibria; (ii) all the best responses of players \(i\) to bid profiles \(b_{-i}\) in \(G^{}\) are the same as those in \(\); and (iii) every equilibrium of \(\) maximizes the potential \(\) (immediate by the definition of potential).

## 4 Best Response Dynamics

In this section we explore another property of the associated game: we show that if instead of using the proportional response update rule, each player myopically plays their best response to the last bid profile with respect to their associated utility, then the entire asynchronous sequence of bids converges to a market equilibrium, as stated in the following theorem. We then show that there is a close relation between best response and proportional response dynamics.

**Theorem 4**.: _For generic linear Fisher markets in a sequential asynchrony model where in every step a single player is activated, best response dynamics converge to the Market Equilibrium. For non-generic markets the prices are guaranteed to converge to the equilibrium prices._

The idea of the proof is to show that the best-response functions are single valued (\( i,b_{-i}:_{i}(,b_{-i})\) has a unique maximizer) and continuous (using the structure of best-response bids). Together with the existence of the potential function \(\) it holds that the analysis of  applies for these dynamics with the associated utilities8 and thus convergence is guaranteed.

One of the appealing points about proportional response dynamics is their simplicity -- in each update, a player observes the obtained utilities and can easily compute the next set of bids. We show that also the best response of a player can be computed efficiently by reducing the calculation to a search over a small part of the subsets of all goods which can be solved by a simple iterative process.

**Proposition 1**.: _For every player \(i\) and any fixed bid profile \(b_{-i}\) for the other players, the best response of \(i\) is unique and can be computed in polynomial time._

Roughly, best responses are characterized uniquely by a one-dimensional variable \(c^{*}\). For every subset of goods \(s\) we define a variable \(c_{s}\) and prove that \(c^{*}\) is the maximum amongst all \(c_{s}\). So finding \(c^{*}\) is equivalent to searching a specific subset with maximal \(c_{s}\). The optimal subset of goods admits a certain property that allows to narrow down the search domain from all subsets to only \(m\) subsets.

The relation between the best response and proportional response updates can intuitively be thought of as follows. While in PRD players split their budget between all the goods according the utility that each good yields, and so gradually shift more budget to the more profitable subset of goods, best response bids of player \(i\) with respect to \(_{i}\) can be understood as spending the entire budget on a subset of goods which, after bidding so (considering the effect of bids on prices), will jointly have the maximum bang-per-buck (in our notation \(a_{ij}/p_{j}\)) amongst _all subsets of goods_, given the bids \(b^{t}_{-i}\) of the other players. Those bids can be regarded as "water-filling" bids as they level the bang-per-buck amongst all goods purchased by player \(i\) (for a further discussion see the appendix).

It turns out that there is a clear formal connection between the best response of a player in the associated game and the proportional response update rule in the true game: the best response bids are the limit point of an infinite sequence of proportional response updates by the same player when the bids of the others are held fixed, as expressed in the following proposition.

**Proposition 2**.: _Fix any player \(i\) and fix any bid profile \(b_{-i}\) for the other players. Let \(b^{*}_{i}=argmax_{b_{i} S_{i}}_{i}(b_{i},b_{-i})\) and let \((b^{t}_{i})_{i=1}^{}\) be a sequence of consecutive proportional response steps applied by player \(i\), where \(b_{-i}\) is held fixed at all times \(t\). Then \(_{t}b^{t}_{i}=b^{*}_{i}\)._

## 5 Simultaneous Play by Subsets of Agents

In this section, we shift our focus back to proportional response dynamics under the activation asynchrony model in which the adversary can choose in every step any subset of players to update their bids. Towards proving that proportional response dynamics converges to a market equilibrium in this setting, we utilize the associated game and potential function presented in Section 3 to show that _any activated subset_ of players performing a PRD step will increase the potential. Formally, let \(v\) be a subset of players activated by the adversary and let \(f_{v}(b)\) be a function that applies proportional response to members of \(v\) and acts as the identity function for all the other players. The update for time \(t+1\) when the adversary activates a subset of the players \(v^{t}\) is therefore:

\[b^{t+1}_{ij}=(f_{v^{t}}(b^{t}))_{ij}=x^{t}_{ij}}{u^{t }_{ij}}B_{i}&i v^{t}\\ b^{t}_{ij}&\]

**Lemma 1**.: _For all \(v\) and for all \(b S\) it holds that \((f_{v}(b))>(b)\), unless \(f_{v}(b)=b\)._

The proof shows that for any subset of players \(v^{t}\), a PRD step \(b^{t+1}\) is the solution to some maximization problem of a function \(g^{t}(b)\) different from \(\), such that \((b^{t+1})>g^{t}(b^{t+1}) g^{t}(b^{t})=(b^{t})\).

Notable to mention is the sequential case where all subsets are singletons, i.e., for all \(t\), \(v^{t}=\{i^{t}\}\) for some \(i^{t}\). In that case, the above result yields that the best-response bids can be expressed as the solution to an optimization problem over the bids \(b\) on a function that is monotone in the KL divergence between the _prices_ induced by \(b\) and the current _prices_, whereas PRD is the solution to an optimization problem on a similar function, but one that depends on the KL divergence between the _bids_\(b\) and the current _bids_. Thus, sequential PRD can be regarded as a relaxation of best response; on the one hand, it is somewhat simpler to compute a step, and on the other hand, it takes more steps to reach the best response (see Proposition 2 and the simulations in Section 8).

## 6 Convergence of Asynchronous Proportional Response Dynamics

With the results from the previous sections under our belts (namely, the associated game, Theorems 2, 3 about its potential and equilibria, and Lemma 1 about updates by several players simultaneously), we are now ready to complete the proof of Theorem 1 on the convergence of asynchronous proportional response dynamics. We explain here the idea of the proof. The full proof is in the appendix.

**Proof idea of Theorem 1:** Our starting point is that we now know that Proportional Response Dynamics (PRD) steps by subsets of players increase the potential. Therefore, the bids should somehow converge to reach the maximum potential, which is obtained only at the set of market equilibria. Technically, since the sequence of bids \(b^{t}\) is bounded, it must have condensation points. The proof then proceeds by way of contradiction. If the sequence does not converge to the set of equilibrium bid profiles, \(ME=\{b^{*} b^{*}\) is a market equilibrium bid profile\(\}\), then there is some subsequence that converges to a bid profile \(b^{**}\) outside of this set, which by Theorem 2, must achieve a lower potential than any \(b^{*} ME\) (since it is not a market equilibrium, and recall that only market equilibria maximize the potential function).

From this point, the main idea is to show that if the dynamic preserves a "livness" property where the maximum time interval between consecutive updates of a player is bounded by some constant \(T\), then the dynamic must reach a point where the bids are sufficiently close to \(b^{**}\) such that there must be some future update by some subset of the players under which the potential increases to more than \((b^{**})\), contradicting the existence of condensation points other than market equilibria (note that the sequence of potential values \((b^{t})\) is increasing in \(t\)). To show this, the proof requires several additional arguments on the continuity of compositions of PRD update functions that arise under adversarial scheduling, and the impact of such compositions on the potential function. The full proof is in the appendix.

## 7 Generic Markets

Here we show that in the generic case, linear Fisher markets have a unique equilibrium bid profile. While it is well known that in linear Fisher markets equilibrium prices and utilities are unique, and the equilibrium bids and allocations form convex sets (see section 2), we show that multiplicity of equilibrium bid profiles can result only from a special degeneracy in the market parameters that has measure zero in the parameter space. In other words, if the market parameters are not carefully tailored to satisfy a particular equality (formally described below), or, equivalently, if the parameters are slightly perturbed, the market will have a unique equilibrium. Similar property was known for linear exchange markets  and we present a simple and concise proof for the Fisher model.

**Definition 3**.: _A Fisher market is called generic if the non-zero valuations of the buyers \((a_{ij})\) do not admit any multiplicative equality. That is, for any distinct and non empty \(K,K^{}\) it holds that \(_{(i,j) K}a_{ij}_{(i^{},j^{}) K^{}}a_{i^ {}j^{}}\)._

**Theorem 5**.: _Every generic linear fisher market has a unique market equilibrium bid profile \(b^{*}\)._

Before discussing the proof of Theorem 5, we have the following corollaries.

**Corollary 1**.: _For generic linear Fisher markets, proportional response dynamics with adversarial activation asynchrony, where each player is activated at least once every \(T\) steps, converge to the unique market equilibrium._

The main theorem, Theorem 1, suggests that proportional response dynamics with adversarial activation asynchrony converges to the set of market equilibria. Since the previous theorem guaranteesthat a generic market has a unique market equilibrium bid profile, it is clear the dynamics converges to that bid profile.

**Corollary 2**.: _In generic linear Fisher markets, no-swap regret dynamics in the associated game converge to the market equilibrium._

This follows from , who showed that in games with convex strategy sets and a continuously differentiable potential function \(\) (as in our case), the set of correlated equilibria consists of mixtures of elements in \(_{b}\). Theorem 2 yields that \(_{b}=b^{*}\), and so there is a unique correlated equilibrium, which is the market equilibrium, and we have that no-swap regret guarantees convergence to it.

To prove Theorem 5, we use a representation of the bids in the market as a bipartite graph of players and goods \((b)=\{V,E\}\) with \(V=\) and \(E=\{(i,j)\,|\,b_{ij}>0\}\). The proof shows that if a market has more than one equilibrium bid profile, then there has to be an equilibrium \(b\) with \((b)\) containing a cycle, whereas the following lemma forbids this for generic markets.

**Lemma 2**.: _If \(b^{*}\) are equilibrium bids in a generic linear Fisher market, then \((b^{*})\) has no cycles._

A key observation for proving this lemma is that at a market equilibrium, for a particular buyer \(i\), the quantity \(a_{ij}/p_{j}^{*}\) is constant amongst goods purchased, and so it is possible to trace a cycle and have all the \(p_{j}^{*}\) cancel out and obtain an equation contradicting the genericity condition.

An observation that arises from Lemma 2 is that when the number of buyers in the market is of the same order of magnitude as the number of goods or larger, then, in equilibrium, most buyers will only buy a small number of goods. Since there are no cycles in \((b^{*})\) and there are \(n+m\) vertices, there are at most \(n+m-1\) edges. Thus, with \(n\) buyers, the average degree of a buyer is \(1+\).

## 8 Simulations

Next, we look at simulations of the dynamics that we study and compare the convergence of proportional response dynamics to best response dynamics in the associated game, as discussed in Section 4. The metrics we focus on here for every dynamic are the Nash social welfare , which, as mentioned in Section 2, is maximized at the market equilibrium, and the Euclidean distance between the bids at time \(t\) and the equilibrium bids. Additionally, we look at the progression over time of the value of the potential \((b^{t})\) (for the definition, see Section 3).

Figure 1 presents simulations of an ensemble of markets, each with ten buyers and ten goods. The parameters in each market (defined in the matrices \(A\) and \(B\)) are uniformly sampled, ensuring that the genericity condition (defined in Section 2) holds with probability one. These parameters are also normalized, as explained in Section 2. For each market, the parameters remain fixed throughout the dynamics. The initial condition in all simulation runs is the uniform distribution of bids over items, and the schedule is sequential, such that a single player updates their bids in each time step.

Figure 0(a) (main plot) show our metrics for PRD averaged over a sample of \(300\) such simulations. The insets show the plots of a random sample of \(50\) individual simulations (without averaging) over a longer time period. Figure 0(b) show similar plots for best response dynamics.

As could be expected based on our analysis in Section 4, best response dynamics converge faster than PRD, as can be seen in the different time scales on the horizontal axes. A closer look at the individual bid dynamics depicted in the insets reveals a qualitative difference between the two types of dynamics: in PRD, the bids in each dynamic smoothly approach the equilibrium profile, whereas best response bid dynamics are more irregular. Additionally, the collection of curves for the individual simulations shows that under uniformly distributed market parameters, both dynamics exhibit variance in convergence times, with a skewed distribution. In most markets, the dynamics converge quickly, but there is a distribution tail of slower-converging dynamics.

## 9 Conclusion

We have shown that proportional response bid dynamics converge to a market equilibrium in a setting where the schedule of bid updates can be chosen adversarially, allowing for sequential or simultaneous updates for any subset of players. We proposed a novel approach to address this problem by identifying a family of associated games related to proportional response dynamics, showing their relation to the competitive equilibria of the market, and leveraging these relations to prove convergence of the dynamics. En route, we showed that other types of dynamics, such as myopic best response and no swap regret, also converge in the associated game. Additionally, we note that our result on the uniqueness of market equilibria in the generic case (e.g., if the market parameters have some element of randomness) may also be of interest for future research in the Fisher market setting.

One main open question that we did not analyze is whether proportional response dynamics converge under the full asynchrony model, which includes information delays. The analysis of this model raises several complications, as it creates further coupling between past and current bid profiles. We conjecture that if information delays are bounded, then convergence also occurs in this model. However, it is not clear whether our approach could be extended to argue that proportional response updates by subsets of players with respect to delayed information increase the potential in our associated game, or whether proving convergence in this setting will require new methods. One limitation of our analysis is that we provide a guarantee that under any bid update by any subset of players chosen by an adversary, the potential function of the associated game increases, but our technique does not specify by how much the potential increases in every step, and therefore, we do not provide speed of convergence results. Such analysis seems to require new techniques, and we see this as an interesting open problem for future work.