# Randomized and Deterministic Maximin-share Approximations for Fractionally Subadditive Valuations

Hannaneh Akrami

Max Planck Institute for Informatics

Graduiertenschule Informatik

Universitat des Saarlandes

hakrami@mpi-inf.mpg.de

Kurt Mehlhorn

Max Planck Institute for Informatics

Universitat des Saarlandes

mehlhorn@mpi-inf.mpg.de

Masoud Seddighin

Tehran Institute for Advanced Studies

m.seddighin@teias.institute

Golnoosh Shahkarami

Max Planck Institute for Informatics

Graduiertenschule Informatik

Universitat des Saarlandes

gshahkar@mpi-inf.mpg.de

###### Abstract

We consider the problem of guaranteeing maximin-share (MMS) when allocating a set of indivisible items to a set of agents with fractionally subadditive (\(\)) valuations. For \(\) valuations, it has been previously shown that for some instances no allocation can guarantee a fraction better than \(1/2\) of maximin-share to all the agents. Also, a deterministic allocation exists that guarantees \(0.219225\) of the maximin-share of each agent. Our results involve both deterministic and randomized allocations. On the deterministic side, we improve the best approximation guarantee for fractionally subadditive valuations to \(3/13=0.230769\). We develop new ideas on allocating large items in our allocation algorithm which might be of independent interest. Furthermore, we investigate randomized algorithms and the Best-of-both-worlds fairness guarantees. We propose a randomized allocation that is \(1/4\)-MMS ex-ante and \(1/8\)-MMS ex-post for \(\) valuations. Moreover, we prove an upper bound of \(3/4\) on the ex-ante guarantee for this class of valuations.

## 1 Introduction

Fair allocation has been a central problem in economics for decades. This problem arises naturally in real-world applications such as advertising, negotiation, rent sharing, inheritance, etc Caragiannis et al. (2019); Dehghani et al. (2018); Dickerson et al. (2014); Foley (1967); Nash Jr (1950); Varian (1973). In discrete fair division, the basic scenario is that we want to distribute a set \(\) of \(m\) indivisible items among \(n\) agents, such that the allocation is deemed fair by the agents. Each agent \(i\) has a valuation function \(v_{i}:2^{}^{+}\) that represents her happiness for receiving a subset of items.

How do we evaluate fairness? This question has been the subject of intense debates in various contexts, including philosophy, economics, distributive justice, and mathematics. Since the introduction of the cake-cutting1 problem Steinhaus (1948), scientists have suggested several different notions to evaluate fairness. The challenge is that a fairness notion must be both reasonable in terms of justice and implementable in practice. Conceived by Steinhaus, proportionality is one of the most naturaland prominent notions. An allocation is _proportional_ if the share allocated to every agent is worth at least \(1/n\) of her value for the entire resource.

Unfortunately, despite many positive results on proportionality for cake-cutting, simple examples indicate that proportionality is not a proper fairness criterion for the case of indivisible items. For example, when there is one item and two agents, one agent receives nothing, though her proportional share is non-zero assuming that the item has positive value for both of the agents. An alternative form of proportionality adopted to deal with indivisibilities is _Maximin-share_ (\(\)). For every agent \(i\), the maximin-share of agent \(i\), denoted by \(_{i}\) is defined as follows:

\[_{i}=_{(_{1},_{2},,_{n})}_{1 j  n}v_{i}(_{j}),\]

where \(\) is the set of all partitions of \(\) into \(n\) parts. It is known that even when all the valuations are additive, \(\) allocations, in which each agent \(i\) gets at least \(_{i}\), need not exist Feige et al. (2022); Kurokawa et al. (2018); Procaccia and Wang (2014). Nevertheless, several studies in recent years show that it is possible to guarantee a constant factor of maximin-share to all agents for various classes of valuation functions, including additive, submodular, and fractionally subadditive. See Table 1 for the state-of-the-art guarantees on the maximin-share. For Submodular valuation class, a 10/27-MMS allocation can be computed in polynomial time. For all other classes of valuation functions mentioned in Table 1, the states-of-the-art are existential results.

Let us revisit the instance with one item and two agents. Suppose that the item has value \(6\) for both agents. By definition, the proportional share of each agent is \(6/2=3\), and since one agent receives no item, satisfying proportionality or any approximation of it is impossible. On the other hand, we have \(_{1}=_{2}=0\). Thus, allocating the item to any agent satisfies maximin-share. Indeed, we can circumvent the non-guaranteed existence of fair allocation by reducing our expectation of fairness to maximin-share. However, regardless of how we allocate the item, one agent receives one item, and the other receives nothing. Therefore, having one agent with zero utility is inevitable for any deterministic allocation in this example. The question then arises: can we do better? One way to improve the allocation is to use randomization and obtain a better guarantee in expectation (_ex-ante_). For example, we can allocate the item to each agent with probability \(1/2\). This way, the expected utility of each agent is equal to \(3\). In economic terms, this allocation satisfies proportionality _ex-ante_. Note that one agent receives no item _ex-post_ (that is, after fixing the outcome); however, it guarantees proportionality ex-ante to both agents.

Considering random allocations and ex-ante fairness makes the problem much handier. For instance, assuming there are \(n\) items and \(n\) agents, allocating each item to each agent with probability \(1/n\) satisfies proportionality ex-ante. However, this randomized allocation has no ex-post fairness guarantee: with a non-zero probability, the outcome allocates all the items to one agent, and the rest of the agents receive no item. It is tempting to find allocations that simultaneously admit ex-ante and ex-post guarantees. The support of such an allocation is limited to outcomes with some desirable fairness guarantee. For example, consider the following random allocation: we choose a random permutation of these \(n\) items and allocate the \(i^{}\) item in the permutation to agent \(i\). This allocation satisfies proportionality ex-ante and maximin-share ex-post.

Recently, several studies have investigated randomized allocations with both ex-ante and ex-post guarantees. Some notable results with the focus on additive valuations are (i) an ex-ante envy-free and ex-post EF1 allocation algorithm Freeman et al. (2020), (ii) an ex-ante proportional and ex-post \(1/2\)-\(\) allocation algorithm Babaioff et al. (2022), and (iii) an ex-post \(3/4\)-MMS and ex-ante \(0.785\)-MMS allocation algorithm Akrami et al. (2023). Very recently, Feldman et al. (2023) studied best-of-both-worlds for subadditive valuations and gave an allocation algorithm with ex-ante guarantee of \(1/2\)-envy-freeness and ex-post guarantee of \(1/2\)-EFX and EF1.

    **Valuation Class** \\  } &  &  \\   Additive & \(+_{2}}\) & Akrami and Garg (2024) & \(\) Feige et al. (2022) \\  Submodular & \(\) Uziahu and Feige (2023) & \(\) Ghods et al. (2018) \\  Fractionally Subadditive & \(0.219225\) Seddighin and Seddighin (2022) & \(\) Ghods et al. (2018) \\  Subadditive & \(\) in the long term & Seddighin and Seddighin (2022) & \(\) Ghods et al. (2018) \\   

Table 1: A summary of the results for \(\) in different valuation classes.

In this paper, our goal is to explore fair deterministic and randomized allocations for fractionally subadditive valuation functions. A valuation function \(v_{i}()\) is fractionally subadditive (\(\)), if there exists a set of several additive valuation functions \(u_{i,1},u_{i,2},,u_{i,}:2^{}_{ 0}\) such that for every set \(S\) we have \(v_{i}(S)=_{1 k}u_{i,k}(S)\). Fractionally subadditive is a super-class of different set functions such as additive, gross substitute, and submodular. In addition, fractionally subadditive is a subclass of subadditive set functions.

The fairness notion we consider is maximin-share. Indeed, we are looking for allocations that satisfy an approximation of maximin-share both ex-ante and ex-post for fractionally subadditive valuations. Of course, we expect our ex-ante guarantee to be stronger than the ex-post one. Moreover, we improve the ex-post guarantee (deterministically) for this class of valuations. We refer to the next subsection for an overview on our results and techniques.

### Our Results and Techniques

In this paper, we provide improved guarantees for maximin-share in the fractionally subadditive setting. We investigate both randomized and deterministic allocation algorithms.

Randomized AllocationsFor randomized allocations, we take one step toward extending the best-of-both-worlds idea for fairness concepts to valuations more general than additive. For the additive setting, Babaioff et al. (2022) proved the existence of randomized allocations that are proportional ex-ante and \(1/2\)-\(\) ex-post. However, as we show in Section 3, though guaranteeing proportionality ex-ante is easy for \(\) valuations, this notion is not always a proper choice as a fairness criterion. In fact, for some instances, proportionality can be as small as \(O(1/n)\) of the \(\) value, which is highly undesirable. Therefore, here we focus on guaranteeing \(\) both ex-ante and ex-post. In contrast to the additive setting, for \(\) valuations guaranteeing \(\) ex-ante is not easy. Recall that in the additive setting, a fractional allocation that allocates a fraction \(1/n\) of each item to each agent is proportional and consequently \(\). However, for some \(\) instances this allocation is \(O(1/n)\)-\(\) (Observation 3.2). Indeed, we show that there are instances for which guaranteeing \(\) ex-ante is not possible. More precisely, we show that there are instances that no randomized allocation can guarantee a factor better than \(3/4\) of maximin-share to all agents (Lemma 3.3). On the positive side, we propose an algorithm that finds a randomized allocation which is \(1/4\)-\(\) ex-ante and \(1/8\)-\(\) ex-post (Theorem 1.1). The idea to prove the ex-ante approximation guarantee of our allocation is inspired by Ghodsi et al. (2018). In the beginning of the algorithm, as long as there exists a remaining agent \(i\) who likes a remaining item \(b_{j}\) at least \(1/2\) of her \(\) value, we allocate \(b_{j}\) to \(i\) and remove them from \(\) and \(\). By the end of this phase, we get an upper bound on the value of the remaining items for the remaining agents. Let \(_{i}()=\{,v_{i}()\}\) for all agents \(i\). In the second phase, we find a half-integral allocation that maximizes social welfare with respect to these new valuations \(_{i}\). For every \(i\), \(_{i}()\) is the same as \(v_{i}()\), except that for every bundle \(X\) with \(v_{i}(X)>1/2\) we have \(_{i}(X)=1/2\). Then, we convert this fractional allocation into a randomized one. To prove the ex-post guarantee, the fact that the allocation is half-integral plays a key role.

**Theorem 1.1**.: _There exists a randomized allocation that is \(1/4\)-\(\) ex-ante and \(1/8\)-\(\) ex-post._

Deterministic AllocationsSince the impossibility result on \(\) by Procaccia and Wang (2014), there has been a considerable effort in the line of improving the approximate \(\) factor for various classes of the valuation functions Akrami and Garg (2024); Akrami et al. (2023); Barman and Krishnamurthy (2020); Garg and Taki (2021); Ghodsi et al. (2018); Kurokawa et al. (2018). However, all these results and their techniques apply to less general classes of valuation functions than \(\). In this work, we give a deterministic algorithm which outputs an allocation with \(3/13\)-\(\) guarantee when valuation functions are \(\). This way, we improve the state-of-the-art on approximate \(\) for \(\) valuations from \(0.219225\) Seddighin and Seddighin (2022) to \(3/13=0.230769\). In order to do so, like in our randomized algorithm, we first allocate large items. However, in addition to allocating single large items, here we also allocate pairs and triples of items if they satisfy some agent up to \(3/13\) factor of their \(\) value. This way we get a stronger upper bound on the value of most of the remaining items. In the last step, we output an allocation which maximizes the social welfare with respect to valuations \(_{i}()=\{,v_{i}()\}\) for the remaining agents and items. Note that this last step is also in correspondence with the last step of the randomized algorithm. Here we cap the value of the bundles with \(6/13\) (instead of \(1/2\)) and we output an integral allocation with maximum social welfare (instead of a half-integral allocation with maximum social welfare). Moreover, here we need to do a more careful analysis to show that the output is indeed a \(3/13\)-MMS allocation.

**Theorem 1.2**.: _Given an instance with_ XOS _valuations, there exists a \(3/13\)-MMS _allocation._

Both of our results are constructive; however, their running times are not polynomially bounded. One step that cannot be done in polynomial time is computing the MMS values of the agents and another one is computing an allocation with maximum social welfare.

### Further Related Work

Maximin-share fairness notion.Budish (2011) introduced the MMS notion. As we already mentioned, there are instances with additive valuations for which no MMS allocation exists Feige et al. (2022); Kurokawa et al. (2018); Procaccia and Wang (2014). Therefore, several studies considered the approximation guarantees. For additive valuations, the first approximation guarantee, \(2/3\)-MMS, is given by Kurokawa et al. (2018). The approximation factor improved over time by Ghodsi et al. (2018) to \(3/4\), and then to \(3/4+o(1)\) by Garg and Taki (2021) and Akrami et al. (2023a). The best-known result for this valuation classed is \(3/4+3/3836\) which was very recently proposed by Akrami and Garg (2024). Moreover, there are several works on MMS approximations for submodular valuations Barman and Krishnamurthy (2020); Ghodsi et al. (2018), and subadditive valuations Ghodsi et al. (2018); Seddighin and Seddighin (2022). Also, Farhadi et al. (2019) proved the tight bound of \(1/n\)-MMS for the setting where agents can have different entitlements.

Fractionally subadditive valuations.A \(1/5\)-MMS approximation algorithm for fractionally subadditive valuations proposed by Ghodsi et al. (2018), and improved later to \(0.2173913\)-MMS approximation by Seddighin and Seddighin (2022). Fractionally subadditive valuations for hereditary set systems have been studied by Li and Vetta (2018). Different other notions of fairness have been studied for this class of valuation. Feige (2009) studied maximizing social welfare. Also, Hoefer et al. (2023) proved the existence of randomized allocations which are proportional ex-ante and proportional up to one item (PROP1) ex-post.

Best-of-both-worlds fairness.Aleksandrov et al. (2015) first explored this line of research in the context of the food bank problem for a special case of additive valuations. Freeman et al. (2020) proposed a randomized polynomial-time algorithm for additive valuations that is envy-free ex-ante and EF1 ex-post. Afterward, Aziz (2020) modified this algorithm to also get the Probabilistic Serial fractional outcome Bogomolnaia and Moulin (2001) as well as a weak notion of efficiency with a simpler proof. Babaioff et al. (2022) provided an allocation algorithm in which the expected value of each agent's bundle is at least a 1/n-fraction of her value for the set of all items (ex-ante proportional) and ex-post proportional up to one item and \(1/2\)-MMS allocations for the additive valuations. Feldman et al. (2023) gave an allocation algorithm for subadditive valuations with guarantees of \(1/2\)-envy-freeness ex-ante and \(1/2\)-EFX and EF1 ex-post. Moreover, studies have been conducted for additive valuations with binary marginals Aziz (2020); Halpern et al. (2020), and for matroid rank valuations Aziz et al. (2023); Babaioff et al. (2021).

## 2 Preliminaries

A fair division instance is denoted by \(=(,,)\) where \(=[n]\) is a set of \(n\) agents, \(\) is a set of \(m\) indivisible items and \(=(v_{1},,v_{n})\) is a vector of valuation functions. Each agent \(i\) has a valuation function \(v_{i}:2^{}_{ 0}\) that represents her value for every bundle of items. Thus, for every set \(S\) of items, \(v_{i}(S)\) shows the value of \(S\) to agent \(i\). We denote the \(j^{}\) item by \(b_{j}\). An allocation of items is a partition of \(\) into \(n\) parts (i.e., bundles) where the \(i^{}\) bundle is the share allocated to agent \(i\). For an allocation \(\), we denote the bundle of agent \(i\) by \(_{i}\). Here we assume that the valuations are monotone, i.e., for every two sets \(S\) and \(T\) such that \(S T\), we have \(v_{i}(S) v_{i}(T)\), and normalized, i.e., \(v_{i}()=0\) for all \(i\). Our discussion in this paper involves two classes of valuation functions: additive and fractionally subadditive valuation functions. A valuation function \(v_{i}()\) is additive, if for every set \(S\) of items, we have \(v_{i}(S)=_{b_{j} S}v_{i}(\{b_{j}\})\).

**Definition 2.1** (Xos).: A valuation function \(v_{i}()\) is fractionally subadditive (XOS), if there exists a set of several additive valuation functions \(u_{i,1},u_{i,2},,u_{i,}:2^{}_{ 0}\) such that for every set \(S\) we have \(v_{i}(S)=_{1 k}u_{i,k}(S)\).

Given an allocation \(\), we denote by \(u_{i,i^{}}\), an additive function of \(v_{i}\) that defines \(v_{i}(_{i})\), i.e., \(v_{i}(_{i})=u_{i,i^{}}(_{i})\). Another term we frequently use in this paper is contribution; which is defined to evaluate the marginal value of one set to another.

**Definition 2.2** (Contribution).: For every sets \(S,T\) of items such that \(S T\), we define the marginal contribution of \(S\) to \(T\) with respect to valuation function \(v\), denoted by \(C^{T}_{v}(S)\) as \(C^{T}_{v}(S)=v(T)-v(T S)\), i.e., the contribution of \(S\) to \(T\) is the decrease in the value when \(S\) is removed from \(T\).

With abuse of notation, for an allocation \(\) of items to agents with valuation vector \(=(v_{1},,v_{n})\) and every set \(S\) of items, we define the contribution of \(S\) to \(\) with respect to \(\), denoted by \(C^{}_{}(S)\) as \(C^{}_{}(S)=_{1 i n}C^{_{i}}_{v_{ i}}(_{i} S)\). However, since an XOS valuation function might include many additive functions, this equation is not always practical. Therefore, we bound \(C^{}_{}(S)\) as follows.

**Observation 2.3**.: Given an allocation \(\) of items to agents with valuation vector \(\), and every set \(S\) of items, we have \(C^{}_{}(S)_{1 i n}u_{i,i^{}}( _{i} S)\).

Our goal is to allocate the items to the agents in a fair manner. Here we discuss two share-based notions of fairness, namely proportionality, and maximin-share. For agent \(i\), we define the proportional share of agent \(i\), denoted by \(_{i}\) as \(_{i}=v_{i}()/n\). We also define the maximin-share of agent \(i\), denoted by \(_{i}\) as

\[_{i}=_{(_{1},_{2},,_{n})}_{1 j  n}v_{i}(_{j}),\]

where \(\) is the set of all partitions of \(\) into \(n\) bundles. Moreover, if for a partition \(=(_{1},_{2},,_{n})\) of \(\) into \(n\) bundles we have \(v_{i}(_{j})_{i}\) for all \(j[n]\), we say \(\) is an "\(\) partition" of agent \(i\). For brevity, in the rest of the paper, we assume that the valuations are scaled so that for each agent \(i\), we have \(_{i}=1\). We also define approximate versions of these two notions as follows. For a constant \(>0\), we say an allocation is \(\)-proportional, if it guarantees to each agent \(i\) a bundle with value at least \(_{i}\). Likewise, in an \(\)-\(\) allocation, the value of the share allocated to each agent \(i\) is at least \(\).

Randomized allocation.In this paper, we also consider randomized allocations. A randomized allocation is a distribution over a set of deterministic allocations. For a randomized allocation \(\), we denote by \(D()\) the set of allocations in the support of \(\). Given a randomized allocation \(\), the expected welfare of agent \(i\) for \(\) is defined as \(v_{i}()=_{ D()}v_{i}(_{i})  p_{}\), where \(p_{}\) is the probability of allocation \(\) in \(\).

Fractional allocation.En route to proving our results, we leverage another relaxed form of allocation called fractional allocation. In a fractional allocation, we ignore the indivisibility assumption and treat each item as a divisible one. Formally, a fractional allocation \(\) is a set of \(nm\) variables \(f_{i,j}\) indicating the fraction of item \(b_{j}\) allocated to agent \(i\). Therefore, we expect allocation \(\) to satisfy the following constraints:

\[_{j} _{1 i n}f_{i,j} 1\] (we have one unit of each item) \[_{i,j} 0 f_{i,j} \]

A fractional allocation is _complete_ if \(_{i}f_{i,j}=1\) for all items \(b_{j}\), i.e., all items are completely allocated. Given a fractional allocation \(\), we define the utility of agent \(i\) for \(\) in the same way as we calculate it for integral allocations: \(v_{i}()=_{k}_{1 j m}u_{i,k}(\{b_{j}\})f_{i,j}\). Complete fractional allocations give rise to randomized allocations in the standard way, i.e., the probability \(p_{}\) of an allocation \(\) is defined as

\[p_{}=_{1 i n}_{b_{j}_{i}}f_{ij}. \]

**Lemma 2.4**.: _Let \(\) be a complete fractional allocation and let randomized allocation \(\) be defined by (1). Then given an \(\) valuation function \(v_{i}\), \(v_{i}() v_{i}()\) for all \(1 i n\)._

We also need to redefine _contribution_ for fractional allocations and fractional bundles. Suppose that \(\) is a fractional allocation and \(S\) is a fractional set of items. Since items are fractionally allocated, the term contribution must be defined more precisely. For example, suppose that set \(S\) consists of a fraction \(0.4\) of item \(b_{j}\), and in allocation \(\), \(0.2\) of \(b_{j}\) belongs to agent \(i_{1}\), \(0.5\) of \(b_{j}\) belongs to agent \(i_{2}\), and \(0.3\) of \(b_{j}\) belongs to agent \(i_{3}\). Here we should exactly determine that this \(0.4\) fraction of item \(b_{j}\) in \(S\) corresponds to the share of which agent or agents. One reasonable strategy is to choose the share of each agent in a way that after removal of \(S\) from \(\) we have the smallest possible decrease in the social welfare. Based on this strategy, assuming that \(s_{j}\) is the fraction of item \(b_{j}\) in \(S\), we define the contribution of \(S\) to \(\), denoted by \(C^{}_{}(S)\) as the answer of the following optimization program:

minimize \[_{1 i n}v_{i}()-v_{i}(^{})\] subject to \[_{1 i n}f_{i,j}-f^{}_{i,j}=s_{j} _{j}\] \[0 f^{}_{i,j} f_{i,j} _{i,j}\] (2)

Generally, it is hard to deal with the above optimization program. Here, we use an important property of \(C^{}_{}()\) to obtain our results.

**Lemma 2.5**.: _Let \(\) be an arbitrary fractional allocation and assume that for every agent \(i\), \(v_{i}()\) is \(\). Then, for every partition of the items into fractional sets \(S_{1},S_{2},,S_{t}\), we have \(_{1 k t}C^{}_{}(S_{k})_{1 i n }v_{i}()\)._

For a randomized allocation, we define two types of fairness guarantees, namely _ex-ante_ and _ex-post_ as in Definitions 2.6 and 2.7.

**Definition 2.6** (ex-ante).: Given a randomized allocation \(\), we say \(\) is \(\)-\(\)_ex-ante_, if for every agent \(i\), we have \(v_{i}()\). Similarly, \(\) is \(\)-proportional, if for every agent \(i\), \(v_{i}()_{i}\).

**Definition 2.7** (ex-post).: An allocation \(\) is \(\)-\(\)_ex-post_, if for every allocation \( D()\), we have that allocation \(\) is \(\)-\(\). Also, we say \(\) is \(\)-proportional ex-post if every allocation in the support of \(\) is \(\)-proportional.

One tool that we refer to in this paper is the result of Babaioff et al. (2022) for converting a fractional allocation into a faithful randomized allocation.

**Theorem 2.8** (Proved by Babaioff et al. (2022)).: _Assume that the valuations are additive and let \(\) be a fractional allocation. Then there exists a randomized allocation \(\) such that the ex-ante utility of the agents for \(\) is the same as the utility of the agents in \(\), and for every allocation \(\) in the support of \(\) the following holds: \(_{i},v_{i}(_{i}) v_{i}()-_{j:f_{i,j} \{0,1\}}v_{i}(\{b_{j}\})\)._

In this paper, we use a more delicate analysis of the method used in Theorem 2.8 to convert fractional allocations into randomized ones. This helps us improve our ex-post approximation guarantees.

## 3 Ex-ante Guarantees

In this section, our goal is to explore the possibility of designing randomized allocation that is \(\)-\(\) ex-ante or \(\)-proportional ex-ante. Note that, in contrast to the additive case, for \(\) valuations there is no meaningful correspondence between proportionality and maximin-share; proportional share can be larger or smaller than maximin-share. Recall that for the additive case, we always have \(_{i}_{i}\) and therefore, maximin-share is implied by proportionality. For fractionally subadditive valuations, however, \(_{i}\) can be as small as \(_{i}/n\).

For the additive setting, a simple fractional allocation that allocates a fraction \(1/n\) of each item to each agent guarantees proportionality and consequently maximin-share. Using Theorem 2.8 one can convert this allocation to a randomized allocation that is proportional ex-ante. In Observation 3.1 we show that proportionality can be guaranteed ex-ante for \(\) valuations.

**Observation 3.1**.: Every randomized allocation that allocates each item with probability \(1/n\) to each agent is proportional ex-ante.

In contrast to the additive setting, finding an allocation that guarantees maximin-share is not trivial. Indeed, the simple fractional allocation that guarantees proportionality in Observation 3.1 can be as bad as \(O(1/n)\)-\(\).

**Observation 3.2**.: Given any instance \(\), let \(()\) be the fractional allocation that allocates a fraction \(1/n\) of each item to each agent. Then, there exists an instance \(\) such that the maximin-share guarantee of \(()\) is \(O(1/n)\).

Generally, there are two main challenges in the process of designing a randomized allocation that guarantees an approximation of maximin-share. In contrast to the additive setting, finding a fractional or randomized allocation that approximates maximin-share is not easy. As well as that, transforming a fractional allocation into a randomized one is not straightforward. Indeed, as we show in Lemma 3.3, neither fractional allocations nor randomized allocations can guarantee \(\). We prove an upper bound on the best approximation guarantee of each one of these allocation types.

**Lemma 3.3**.: _For \(\) valuations, the best \(\) guarantee for fractional allocations and the best \(\)\(\) guarantee for randomized allocation is upper bounded by \(3/4\)._

Before we prove our lower bound on the maximin-share guarantee for randomized allocations, we note that another challenge about \(\) valuations is that in sharp contrast to additive valuations, transforming a fractional allocation to a randomized one is not easy. Indeed, we can show that for a fractional allocation \(\) there might be randomized allocations \(\) and \(^{}\) with different utility guarantees for the agents, such that in both \(\) and \(^{}\) the probability that each item \(b_{j}\) is allocated to agent \(i\) is equal to \(f_{i,j}\). Example 3.4 gives more insight into this challenge.

**Example 3.4**.: Consider the following instance: there are \(n^{2}\) items. The valuation of agent \(i\) is an \(\) set function consisting of \(n\) additive valuation functions as follows: partition the items into \(n\) bundles each with \(n\) items. For each additive function \(u_{i,k}\), the value of each item in the \(k^{}\) bundle is \(1/n\) and the value of the rest of the items is \(0\). Define allocations \(\) and \(^{}\) as follows: \((i)\): allocation \(\) allocates each item to each agent with probability \(1/n\), and \((ii)\): allocation \(^{}\) considers a random permutation of the bundles in the optimal \(\) partition of the agents and allocates the \(i^{}\) bundle in the permutation to agent \(i\). In both of these allocations, each item is allocated to each agent with probability \(1/n\). However, the maximin-share guarantee of \(\) is \(O( n/n)\). On the other hand, allocation \(^{}\) guarantees value \(1\) to all agents.

Despite these hurdles, in Theorem 3.5 we show that there exists a randomized allocation that guarantees \(1/4\)-\(\) to all the agents ex-ante. To prove Theorem 3.5, we first show that a fractional allocation exists that is \(1/4\)-\(\). Next, we convert it to a randomized allocation. Theorem 3.5 along with Lemma 3.3 leave a gap of \([1/4,3/4)\) between the best upper bound and the best lower-bound for the maximin-share guarantee of fractional allocations in the \(\) setting.

**Theorem 3.5**.: _There exists a randomized allocation that is \(1/4\)-\(\) ex-ante._

## 4 Ex-ante and Ex-post Guarantees

Unfortunately, the randomized allocation obtained by Theorem 3.5 has no ex-post fairness guarantee. The issue is that we use Theorem 2.8 to convert the fractional allocation into a randomized one. However, Theorem 2.8 only guarantees that the ex-post value of each agent is at least the value of her fractional allocation minus the value of the heaviest item which is partially (and not fully) allocated to her in the fractional allocation. However, currently, we have no upper bound on the value of the allocated items, and therefore, the ex-post value of an agent might be close to \(0\). To resolve this, we allocate valuable items beforehand to keep the value of the remaining items as small as possible. In Lemma 4.1 we explain a simple and very practical fact that is frequently used in the previous studies. Ghodsi et al. (2018); Seddighin and Seddighin (2022); Barman and Krishna Murthy (2017); Amanatidis et al. (2019).

**Lemma 4.1**.: _Removing one item and one agent from the instance does not decrease the maximin-share value of the remaining agents for the remaining items._

Given that our goal is to construct a randomized allocation which is \(1/4\)-\(\) ex-ante, by Lemma 4.1 we can assume without loss of generality that the value of each item to each agent is less than \(1/4\); otherwise, we can reduce the problem using Lemma 4.1. However, a combination of this assumption and Theorem 3.5 still gives no ex-post guarantee. To improve the ex-post guarantee, we revisit the proof of Theorem 2.8 and show that for our setting, a stronger guarantee can be achieved using the matching method for converting a fractional allocation into a randomized one.

**Lemma 4.2**.: _Assume that the valuations are additive and let \(\) be a complete fractional allocation with \(f_{ij}\{0,1/2,1\}\) for all \(i\) and \(j\). Then there is a randomized allocation \(\) with \(D()=\{^{1},^{2}\}\), such that_

* _For every agent_ \(i\) _we have_ \(v_{i}()=v_{i}()\)_._
* _For every agent_ \(i\) _we have_ \[\{v_{i}(^{1}_{i}),v_{i}(^{2}_{i})\} v _{i}()-(b_{j})\,|\,f_{ij}=1/2\}}{2}.\]

In Lemma 4.2, we show that we can find a fractional allocation with a special structure that makes the transformation step more efficient. These ideas together help us achieve a randomized allocation with \(1/4\)-\(\) guarantee ex-ante and \(1/8\)-\(\) guarantee ex-post. In order to do so, we use the following algorithm:

1. While there exists an item \(b_{j}\) with value at least \(1/4\) to an agent \(i\), allocate \(b_{j}\) to agent \(i\) and remove \(i\) and \(b_{j}\) respectively from \(\) and \(\).
2. For the remaining agents \([n]\) and items proceed as follows: for every agent \(i\), define \(_{i}\) as follows: for every subset \(S\) of items, \(_{i}(S)=(t,v_{i}(S)).\) Let \(=(_{1},,_{n})\) and return a half-integral allocation \(\) that maximizes the social welfare with respect to \(\), i.e., \(=_{F}_{i}_{i}(F_{i})\) where \(\) is the set of all half-integral allocations of the remaining items to the remaining agents.
3. Convert \(\) into a randomized allocation using Lemma 4.2.

The goal in Step 2 is to find a fractional allocation that is \(1/4\)-\(\). However, we want this allocation to have a special structure that facilitates constructing the randomized allocation. Therefore, instead of directly choosing the allocation that maximizes social welfare, we consider \(_{i}\) as the valuation function of agent \(i\) and return a half-integral allocation \(\).

**Lemma 4.3**.: \(\) _is \(1/4\)-\(\)._

Now we are ready to prove Theorem 1.1.

**Theorem 1.1**.: _There exists a randomized allocation that is \(1/4\)-\(\) ex-ante and \(1/8\)-\(\) ex-post._

Proof.: The ex-ante guarantee follows from Lemmas 4.3 and 1.

Let \(^{1}\) and \(^{2}\) be the integral allocations obtained by Lemma 4.2. Consider any agent \(i\), and let \(u_{i,i^{}}\) be such that \(v_{i}()=_{j}f_{ij}u_{i,i^{}}(b_{j})\). Then, by Lemma 4.2 for \(r\{1,2\}\) we have

\[u_{i,i^{}}(^{r}_{i}) u_{i,i^{}}(^{}_ {i})-}(b_{j})\,|\,f_{ij}=1/2\}}{2}\]

and since by Lemma 4.1 we know the value of each item for each agent is less than \(1/4\), we have

\[v_{i}(^{}_{i}) v_{i}(_{i})-v_{i}( b_{j})}{2}>-=.\]

Hence, the ex-post guarantee holds as well. 

## 5 \(3/13\)-\(\) Allocation

In this section, our goal is to improve the approximation guarantee of \(\) for deterministic allocations in the fractionally subadditive setting. We show that guaranteeing a factor \(3/13 0.230769\) of maximin-share to all the agents is always possible. Before this work, the best approximation guarantee for maximin-share in the \(\) setting was \(0.219225\)-\(\)Seddighin2022.

Our algorithm for improving the ex-post guarantee is based on our previous algorithms plus two additional steps and a more in-depth analysis. In this algorithm, before finding the allocation that maximizes social welfare, we strengthen our upper bound on the value of items. For this, we add two more steps to our algorithm in which we satisfy some of the agents with two items and three items. In contrast to the first step (i.e., allocating single items to agents), these steps might decrease the maximin-share value of the remaining agents for the remaining items. Let \(t=6/13\). The goal is to find a \(t/2\)-\(\) allocation. Our allocation algorithm is as follows:1. If there exists an item \(b_{j}\) with value at least \(t/2\) to an agent \(i\), allocate \(b_{j}\) to agent \(i\) and remove \(i\) and \(b_{j}\) respectively from \(\) and \(\).
2. If there exists a pair of items \(b_{j},b_{k}\) with the total value of at least \(t/2\) to some agent \(i\), allocate \(\{b_{j},b_{k}\}\) to agent \(i\) and remove \(i\) and \(\{b_{j},b_{k}\}\) from \(\) and \(\) respectively.
3. If there exists a triple of items \(b_{j},b_{k},b_{s}\) with the total value of at least \(t/2\) to some agent \(i\), allocate \(\{b_{j},b_{k},b_{s}\}\) to agent \(i\) and remove \(i\) and \(\{b_{j},b_{k},b_{s}\}\) from \(\) and \(\) respectively.
4. For the remaining agents \(^{}\) and items \(^{}\), proceed as follows: for every agent \(i\), define \(_{i}\) as follows: for every subset \(S\) of items, \(_{i}(S)=(t,v_{i}(S))\). Let \(=(_{1},,_{n})\) and return an allocation \(\) that maximizes the social welfare with respect to \(\), i.e., \(=_{A}_{i^{}}_{i}(A_{i})\) where \(\) is the set of all allocations of \(^{}\) to \(^{}\).

In the rest of this section, we analyze the above algorithm. By Lemma 4.1, after Step 1, the MMS value of all the agents is at least \(1\). Let \(n\) be the number of remaining agents after Step 1. We denote by \(n_{1}\) and \(n_{2}\), the number of agents that are satisfied in Steps 2 and 3 respectively and let \(n^{}=n-n_{1}-n_{2}=|^{}|\) be the number of remaining agents after Step 3. In contrast to the first step, Step 2 and 3 might decrease the maximin-share value of the remaining agents for the remaining items. However, we prove that the remaining items satisfy special structural properties.

**Observation 5.1**.: Since no item can satisfy any remaining agent after Step 1, for every agent \(i\) and every item \(b_{j}\), we have \(v_{i}(\{b_{j}\})<t/2\).

Also, by the method that we allocate the items in Step 3, after this step Observation 5.2 holds.

**Observation 5.2**.: Since after Step 3, no triple of items can satisfy an agent, for every different items \(b_{j},b_{k},b_{s}\) and every agent \(i\) we have \(v_{i}(\{b_{j},b_{k},b_{s}\})<t/2\).

Note that since the valuations are XOS, Observation 5.2 implies no upper bound better than \(t/2\) on the value of a single item to an agent. For example, consider the following extreme scenario: for a small constant \(>0\), the value of every subset of items to agent \(i\) is equal to \(t/2-\). It is easy to check that this valuation function is XOS. For this case, the value of every triple of items is also equal to \(t/2-\), but this implies no upper bound better than \(t/2\) on the value of a single item.

**Lemma 5.3**.: _Fix a remaining agent \(i\) and consider the \(n\) bundles with value at least \(1\) in an MMS partition of agent \(i\) after Step 1. Put these bundles into 4 different sets \(B_{0},B_{1},B_{2},B_{ 3}\), where for \(0 2\), set \(B_{}\) contains bundles that lose exactly \(\) items in Steps 2 and 3, and \(B_{ 3}\) contains bundles that lose more than 4 items in these steps. After Step 3, the following inequality holds: \(n^{}|B_{0}|+|B_{1}|+|B_{2}|\)._

Finally, in Step 4, we find the integral allocation \(\) that maximizes social welfare with respect to \(\) for the remaining agents. Let \(Z=_{i^{}}_{i}(_{i})\). Since for each remaining agent \(i\), \(_{i}(_{i})\) is upper-bounded by \(t\), we have \(Z n^{}t\). If for every agent \(i\), \(v_{i}(_{i}) t/2\) holds, then \(\) is \(t/2\)-MMS, and we are done. Therefore, for the rest of this section, assume that for an agent \(i^{*}\), we have \(v_{i^{*}}(_{i^{*}})<t/2\).

Let \(B_{0},B_{1},\) and \(B_{2}\) be the sets defined for agent \(i^{*}\) in Lemma 5.3. In Lemma 5.4, we give lower bounds on the contribution of the bundles in \(B_{0}\), \(B_{1}\) and \(B_{2}\) to \(\) respectively.

**Lemma 5.4**.: _After Step 3, for all bundles_

* \(X B_{0}\)_, there exists a partition of_ \(X\) _into_ \(X^{1}\) _and_ \(X^{2}\) _such that_ \(C^{}_{}(X^{1})+C^{}_{}(X^{2}) t\)_._
* \(X B_{1}\)_, there exists a partition of_ \(X\) _into_ \(X^{1}\) _and_ \(X^{2}\) _such that_ \(C^{}_{}(X^{1})+C^{}_{}(X^{2})t\)_._
* \(X B_{2}\)_,_ \(C^{}_{}(X)t\)_._

**Theorem 1.2**.: _Given an instance with_ XOS _valuations, there exists a \(3/13\)-_MMS _allocation._

Proof.: Let \(\) be the output of our Algorithm. Towards a contradiction, assume for agent \(i^{*}\), \(v_{i^{*}}(_{i^{*}})<3/13=t/2\). For all agents \(i\) which are removed during the first three steps, we have \(v_{i}(_{i}) t/2=3/13\). Therefore, \(i^{*}^{}\). For all \(X B_{0}\), let \(X^{1}\) and \(X^{2}\) be as defined in Lemma 5.4. We have

\[t(n^{}-) >_{i^{}}_{i}(_{i})\] (for all

\[i^{},_{i}(_{i}) t\]

 and

\[_{i^{*}}(_{i^{*}})<t/2\]

) \[_{X B_{0}}(C_{}^{}(X^{1})+C_{ }^{}(X^{2}))+_{X B_{1}}(C_{}^{ }(X^{1})+C_{}^{}(X^{2}))+_{X B_{2}} C_{}^{}(X)\] (Lemma 2.5) \[ t|B_{0}|+t|B_{1}|+t|B_{2}| tn^{ }.\] (Lemma 5.4 and Lemma 5.3)

## 6 Conclusion

In this paper, we developed randomized and deterministic allocations that guarantee approximations of maximin-share for fractionally subadditive valuations.

For deterministic allocations, to achieve a better approximation with the same technique, one idea would be to allocate more items to agents in the first phase. We believe it is promising that this extension gives a better approximation factor. However, extending the analysis is not trivial, and new ideas will be necessary to prove its correctness. A more fundamental obstacle lies in the fact that, regardless of the number of items allocated in the first phase, the approximation factor converges to l/4. Therefore, developing new techniques is imperative to improve the approximation factor beyond l/4.

For randomized allocations, our goal was to guarantee a fraction of MMS ex-ante, and a smaller fraction of MMS ex-post. Several interesting questions remain open. The most straight-forward direction is to improve approximation guarantees for both ex-ante and ex-post cases. None of our results are proved to be tight. Another notable point is that the running time of none of our algorithms is polynomially bounded. Are there efficient algorithms which achieve the same guarantees?