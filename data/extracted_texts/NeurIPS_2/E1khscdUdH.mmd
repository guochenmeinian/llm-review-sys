# Insight Miner: A Time Series Analysis Dataset for Cross-Domain Alignment with Natural Language

Yunkai Zhang

IEOR Department

UC Berkeley

yunkai_zhang@berkeley.edu

Equal contribution.

Yawen Zhang

MITeral

yawenz@mineral.ai

Ming Zheng

Mineral

zhengming@mineral.ai

&Kezhen Chen

Mineral

kezhenchen@mineral.ai

&Chongyang Gao

Computer Science Department

Northwestern University

Chongyanggao2026@u.northwestern.edu

&Ruian Ge

IEOR Department

UC Berkeley

ruian_ge@berkeley.edu

&Siyuan Teng

IEOR Department

UC Berkeley

siyuan_teng@berkeley.edu

&Amine Jelloul

IEOR Department

UC Berkeley

amine_jelloul@berkeley.edu

&Ziayuan Guo

Mineral

xiaoyuanguo@mineral.ai

&Chiang-Wei Fang

IEOR Department

UC Berkeley

chiangwei_fang@berkeley.edu

&Zeyu Zheng

IEOR Department

UC Berkeley

zyzheng@berkeley.edu

&Jie Yang

Mineral

yangjie@mineral.ai

###### Abstract

Time-series data is essential in various science and industry domains, like environmental analysis, agriculture, transportation, and finance. Researchers need to use their domain knowledge to conduct insight mining from time-series data to study scientific topics. However, this process is time-consuming and highly depends on expert knowledge. This paper proposes a large-scale multimodal model (LMM), Insight Miner, to generate decent and comprehensive time-series descriptions with domain-specific knowledge. To introduce rich time-series insights to Insight Miner, we propose a time-series analysis dataset, TS-Insights, composed of time series and textual insight pairs. In the TS-Insights dataset,we include 100k time series windows sampled from 20 forecasting datasets spanning a wide variety of domains and granularities. Through a meticulous combination of heuristics and statistical tools, we preprocess each raw time series window and use GPT-4 to generate a coherent trend description based on the extracted features. After training with the TS-Insights dataset via instruct tuning, the Insight Miner model performs better in generating time series descriptions and insights compared with state-of-the-art multimodality models, such as LLaVA  and GPT-4. Our findings suggest a promising direction of leveraging LMMs for time series analysis and potentially offering avenues for efficient insight mining in scientific domains. The TS-Insights dataset is available here: [https://drive.google.com/drive/folders/1qGXigxE5GvmF1oLuGXaqLMkRgwoQfZ7V?usp=sharing](https://drive.google.com/drive/folders/1qGXigxE5GvmF1oLuGXaqLMkRgwoQfZ7V?usp=sharing).

## 1 Introduction

Time series data has been widely studied in a wide range of domains. Traditionally, researchers have relied on the statistical tools to analyze time series data. Methods such as autoregressive integrated moving average (ARIMA) , seasonal decomposition of time series (STL) , and the state space models  have long been employed for forecasting, detecting seasonality, and understanding the underlying trends in time series datasets. The use of these techniques have been particularly prevalent in fields like economics, meteorology, and transportation to provide effective interpretation of time series data.

Recently, many studies have explored the usage of LLMs for time-series tasks. For example, there are studies leveraging the pretrained LM (GPT2 model) for various time-series tasks (forecasting, classification, anomaly detection, etc.) [5; 6] and achieved the state-of-the-art performance, which demonstrates the universality of pretrained LMs. Another study designed structured prompts to enable zero-shot or few-shot inferences by LLMs [7; 8]. However, the above works mainly focus on tasks where the output is time series or scalars. Directly training LLMs to perform traditional time series tasks such as forecasting or classification does not enable LLMs to handle tasks where the output involves natural language.

On the other hand, the emergence of multimodal LLMs like LLaVA  has inspired researchers to investigate approaches to better align domain-specific time-series data with LLM. One such example is the FinVis-GPT , which was built on top of the LLaVA model and generated a financial task oriented dataset for alignment and instruction tuning. The proposed FinVis-GPT demonstrates the feasibility of utilizing multimodal LLMs in analyzing financial charts. Our work is also motivated by the success of multimodal LLMs but not limited to a certain domain. We focus on constructing a time series analysis dataset for LMMs. To the best of our knowledge, there is no such dataset for the purpose of aligning time-series data with comprehensive textual descriptions.

In summary, the main contributions of our work are two-fold: 1) we present a time series analysis dataset that enables LLMs to generate faithful time series descriptions, and 2) the proposed dataset is the first large-scale repository that allows time-series data to be aligned into the language embedding space, paving the way for future studies on using large multimodal models to analyze time-series data and provide language insights.

## 2 TS-Insights Dataset

To our knowledge, there are no existing large-scale datasets of time series and language description pairs, let alone for time series analysis. To bridge this gap, we design and generate the first dataset, TS-Insights Dataset, with time series and language pairs for general time series analysis.

Formally, given \(N\) time series datasets \(\{_{i}\}_{i=1}^{N}\), where each dataset \(_{i}\) has \(T_{i}\) total time steps and \(M_{i}\) features, i.e., \(D_{i}=\{X_{j}\}_{j=1}^{T_{i}}\) and \(X_{j}^{M_{i}}\), the goal is to generate a question-answer pair for each time series window \(W_{k}^{m_{k}_{k}}\) randomly sampled from the \(N\) datasets, where \(_{k}\) represents the number of time steps and \(m_{k}\) represents the number of features, which are both randomly subsampled from the chosen dataset.3 Each training sample consists of a time series window \(W_{k}\), a question \(L_{k}^{Q}\)and an answer \(L_{k}^{A}\). Using \((W_{k},L_{k}^{Q},L_{k}^{A})\), we create a single-round instruction-following example :

**Human:**\(W_{k}\)n \(L_{k}^{Q}<>\)n **Assistant:**\(L_{k}^{A}<>\)n. (1)

To generate such datasets for modalities such as images  or biomedical images , the common practice is to prompt language-only GPT-4. For example, LLaVA  asks GPT-4 to generate multi-turn conversations given the image caption and the bounding boxes of the objects in the image. However, the time series modality presents unique challenges since 1) there are no original captions available for a time series window, 2) existing tools cannot readily convert a time series segment into an input format that is suitable for language-only GPTs, and 3) the semantic meanings of time series windows are more difficult to be described in natural languages.

To address the third challenge, we focus on time series windows that contain a single feature, i.e., \(W_{k}^{1_{k}}\), and following traditional time series analysis , we generate descriptions based on the trend, the seasonality, and the residuals that are present in the window. A naive solution is to feed in the raw time series as a vector when prompting GPT-4, e.g., "Given the time series [0.52, 0.98, 0.95, 0.91, 1.24,..., 1.32], generate a description about its trend, seasonality, and volatility." However, we found that GPT-4 fails to accurately extract each component from the raw vector.4 Instead, we leverage a statistical Seasonal-Trend Decomposition (STL) model to decompose the original time series into a trend component, a seasonality component, and a residual component, and generate a description only based on one component at a time. As a proof of concept, we focus on the trend description in the current version of this paper.

### Trend Generation Workflow

To generate the trend description for a given time series window \(W_{k}^{1_{k}}\), we first apply an STL decomposition to extract the trend

\[W_{k}=_{k}+_{k}+_{k}, \]

where \(_{k}\), \(_{k}\), and \(_{k}\) denote the extracted trend, seasonality, and residual components, respectively. Denote the value at each individual time step of the extracted trend as \(_{k}=(_{1},_{2},,_{_{k}})\).

In some cases, \(W_{k}\) might not have any seasonalities. In such cases, we fit a Gaussian Process (GP) to the \(_{k}\) time steps in the window. Let \(W_{k}=(y_{1},y_{2},,y_{_{k}})\), where \(y_{i}\) is the value at each time step. \(W_{k}\) is modeled by a standard zero-mean GP, whose covariance structure is defined by a kernel \(K(.,.)\). Here, the kernel used is a combination of a RBF kernel to model the dependency among different time steps and a white-noise kernel to model the observational noise. That is, \(W_{k} GP((x),K(x,x^{}))\), where \((x)=0\), \(K(x,x^{})=RBF(x,x^{})+_{e}^{2}_{x,x^{}}\), \(RBF(x,x^{})=_{r}^{2}exp(-)^{2}}{2})\) and \(_{x,x^{}}\) is the Kronecker delta. The parameters \(_{r}^{2}\), \(l\) and \(_{e}^{2}\) are estimated from the data by maximizing the likelihood. We

Figure 1: Trend dataset generation workflow.

then compute the fitted mean of the Gaussian Process regression at the respective time steps to get \(_{k}=(_{1},_{2},,_{_{k}})\) as the extracted trend.

We then apply a Gaussian kernel \(_{k}=[_{1},_{2},,_{w_{k}}]\), where \(w_{k}\) is a hyperparameter for the kernel size, to further smooth out the trend, and followed by downsampling with stride size \(s_{k}\)5:

\[_{i}=_{j=-w_{k}//2}^{w_{k}//2}_{s_{k} i-j} _{w_{k}//2+j} \]

for \(i=1,2,,_{k}//s_{k}\).

Finally, we round each entry of \((_{1},_{2},,_{_{k}//s_{k}})\) to one decimal place and feed it to GPT-4. As such, one data sample pair consists of the original time series window \(W_{k}\) and the trend description generated by GPT-4. An overview of the workflow and the exact prompt we use is shown in Figure 1.

### Trend Description Dataset

Using the approach above, we generate 10k samples based on twenty-nine datasets from Monash Time Series Forecasting Archive , and leave the other eleven datasets as holdout sets, which are only used for evaluation but not for training. The twenty-nine datasets span a wide range of domains, such as energy , weather, traffic , and healthcare . Notably, we only sample windows from the train split of each dataset, defined to be the first \(70\%\) of the time steps in temporal order. Some datasets contain multiple levels of seasonalities, e.g., daily and weekly. Under the original granularity, each window might not contain enough time steps to discern the higher level of seasonalities, since at least two full cycles are required to conclude there to be a seasonality. As trends should be described after seasonalities are removed, for each dataset, we also aggregate multiple time steps into one time step in order to introduce samples with more diversified patterns.

To further increase the number of training samples in a cost-efficient manner, for each GPT-4 labeled sample pair, we additionally apply nine different random augmentations to the original time series window \(W_{k}\) such that the trend description is still applicable to the augmented samples. We then rephrase the original description generated by GPT-4 using GPT-3.5-turbo in order to increase the language diversity. Therefore, for each original sample, we now have nine augmented samples, resulting in 100k total training samples. A detailed list of test and holdout datasets, the number of samples we generate for each aggregated granularity level, as well as a list of augmentation methods can be found in Appendix A.

## 3 Insight Miner

We use the checkpoint from LLaVA , a general-domain vision-language multimodal conversation model as a starting point, and continue finetuning the LLaVA weights to the time series domain. We use the same neural network architecture as LLaVA: we first convert the time series window into an image using lineplot, feed the image into the vision encoder, and then use a linear projection layer to map the vision output into the language embedding space, finally, the language model takes in the projected image embeddings concatenated with the language instructions as the input and returns the language response.

To align the time-series images with the LLM, we only finetune the linear projection layer, while keeping both the vision encoder and the language model frozen. For each training sample, we show the original time series to the model in the form of a line plot and the language instruction is to ask it to describe the trend, and the goal is to predict the description generated by the GPTs. The final model is named Insight Miner.

Note that the training cost of Insight Miner is relatively affordable as it was trained using 8 \(\) A100 40GiB GPUs. Each epoch takes around an hour to train. Once the model finishes training, it can be easily deployed at a low inference cost.

Experiments

We conduct experiments to evaluate how well the trend dataset can enable large multimodal models to generate trend descriptions that are faithful to the original time series. More specifically, we sample 119 total windows for evaluation. Among these, 69 examples are from the test split (last 30%) of the same datasets we used for training, and the other 50 examples are from the holdout datasets which are not used for training entirely. The models we include for comparison are:

* LLaVA : using the checkpoint publicly available on HuggingFace.
* Vision (3 epochs): finetuned from the above LLaVA checkpoint for three epochs using the generated trend dataset. It takes in the original time series window plotted using the lineplot function in the Seaborn package.
* Vision (1 epoch): finetuned from the above LLaVA checkpoint for one epochs using the generated trend dataset.
* Engineering GPT: GPT-4 that takes in the extracted features as described in Section 2.1.

Here, Vision (3 epochs) and Vision (1 epoch) are two versions of our Insight Miner trained using a different number of epochs. As we observed feeding the raw time series vector into GPT-4 leads to inferior descriptions compared to Engineering GPT, we do not include it for evaluation in this section, but it is included in the eight case studies shown in Appendix B, along with the other four models.

For each of the 119 samples, we generate one description using each of the above models, and ask three domain experts to manually score the descriptions generated. When presented to the domain expert, the descriptions from different models are shuffled in a random order for each sample. A score of 2 is given if the description matches the original time series, a score of 1 is given if the description is partially correct, and a score of zero is given if the description is not correct. We sum the scores from all human evaluators for all test (holdout) samples and normalize it to \(0-1\) to produce the final score for each model. The results are summarized in Figure 2.

As we see, both of our models, Vision (3 epochs) and Vision (1 epoch), significantly outperforms the original LLaVA model. Additionally, training for more epochs seems to lead to a better performance. In fact, using the vision encoder trained for three epochs can lead to a performance that is competitive to GPT-4, although the latter requires first preprocessing the time series using heuristics and statistical tools. Notably, Vision (3 epochs) outperforms GPT-4 on the holdout datasets. We hypothesize that this is because the holdout datasets contain more datasets with complicated seasonalities than the test datasets. Even though Engineering GPT-4 has access to the extracted features, it essentially still performs zero-shot inference. In comparison, our model is finetuned using the proposed TS-Insights dataset and can better leverage the abundance of labeled samples.

## 5 Discussions

This work presents the first large dataset with 100k training samples for general time series analysis in the form of time series and natural language pairs. We show that the proposed dataset can enable existing large multimodal models to align time series data with textual descriptions and perform detailed analysis.

In addition to the models evaluated in Section 4, we also tried to use OneFitsAll  as the time-series encoder to replace the vision encoder in LLaVA. Our initial attempt shows that using a time-series encoder causes the model to fail to generate coherent descriptions for most samples, which is likely

Figure 2: Description evaluation of different models by domain experts.

due to that unlike the original vision encoder, the time-series encoder is not pretrained. Therefore, we leave the pretraining of the time-series encoder as future work. It will be interesting to see whether the proposed dataset can enable large multimodal models to improve forecasting or classification accuracies, since the generated dataset allows them to associate the raw time series vector with common statistical concepts in the form of natural languages.

In terms of the dataset itself, our workflow for generating trend descriptions sheds the light on how descriptions regarding other time series properties can be generated, e.g., the change in volatility, or outlier identification using the extracted residuals. A more challenging task will be to generate descriptions for time series with multiple features, such as by studying their cross-correlations .