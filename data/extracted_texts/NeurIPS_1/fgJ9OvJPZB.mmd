# Re-assembling the past: The RePAIR dataset and benchmark for real world 2D and 3D puzzle solving

Theodore Tsesmelis\({}^{1}\) Luca Palmieri\({}^{2*}\) Marina Khoroshiltseva\({}^{2}\) Adeela Islam\({}^{1,8}\)

Gur Elkin\({}^{3}\) Ofir Itzhak Shahar\({}^{3}\) Gianluca Scarpellini\({}^{1}\) Stefano Fiorini\({}^{1}\) Yaniv Ohayon\({}^{3}\)

Nadav Alali\({}^{3}\) Sinem Aslan\({}^{2,7}\) Pietro Morerio\({}^{1}\) Sebastiano Vascon\({}^{2}\) Elena Gravina\({}^{4}\)

Maria Cristina Napolitano\({}^{4}\) Giuseppe Scarpati\({}^{4}\) Gabriel Zuchtriegel\({}^{4}\) Alexandra Spuhler\({}^{5}\)

Michel E. Fuchs\({}^{5}\) Stuart James\({}^{1,6}\) Ohad Ben-Shahar\({}^{3}\) Marcello Pelillo\({}^{2}\) Alessio Del Bue\({}^{1}\)

\({}^{1}\)Fondazione Istituto Italiano di Tecnologia \({}^{2}\)Ca' Foscari University of Venice

\({}^{3}\)Ben-Gurion University of the Negev \({}^{4}\)Parco Archeologico di Pompei

\({}^{5}\)University of Lausanne \({}^{6}\)Durham University \({}^{7}\)University of Milan \({}^{8}\)University of Genoa

###### Abstract

This paper proposes the RePAIR dataset that represents a challenging benchmark to test modern computational and data driven methods for puzzle-solving and reassembly tasks. Our dataset has unique properties that are uncommon to current benchmarks for 2D and 3D puzzle solving. The fragments and fractures are realistic, caused by a collapse of a fresco during a World War II bombing at the Pompeii archaeological park. The fragments are also eroded and have missing pieces with irregular shapes and different dimensions, challenging further the reassembly algorithms. The dataset is multi-modal providing high resolution images with characteristic pictorial elements, detailed 3D scans of the fragments and metadata annotated by the archaeologists. Ground truth has been generated through several years of unceasing fieldwork, including the excavation and cleaning of each fragment, followed by manual puzzle solving by archaeologists of a subset of approx. \(1000\) pieces among the \(16000\) available. After digitizing all the fragments in 3D, a benchmark was prepared to challenge current reassembly and puzzle-solving methods that often solve more simplistic synthetic scenarios. The tested baselines show that there clearly exists a gap to fill in solving this computationally complex problem.

Figure 1: A subset of the RePAIR dataset, containing over one thousand real-life object fragments. The dataset is unique in its doing, with an international team of archaeologists providing the puzzle ground truth through years of fieldwork in the Pompeii archaeological park. This dataset stands as a realistic computational challenge for both methods on 2D and 3D puzzle solving, as modern baselines struggle to achieve competitive results on the RePAIR dataset.

Introduction

Archaeologists and historians face the very same problem of reconstructing the past. Unlike historians, though, for archaeologists, the reconstruction process has almost invariably a physical dimension. Indeed, after a long and painstaking work involving site surveys and excavations, archaeologists are often confronted with the challenging problem of reassembling countless fragments of different size, shape and appearance to recreate ancient artifacts or artworks. Depending on the size of the artifact, the reassembly work might last months, years, or even decades, and in the presence of a large number of pieces, it simply becomes hopeless, notwithstanding the skillfulness of the operators. It is, therefore, quite common for many museums and archaeological parks to set up large storerooms to stow hundreds or thousands of such fragments, just waiting for someone (or something) to reassemble them for the benefit of scholars, laypersons, and our collective cultural heritage alike.

We, therefore, frame the RePAIR dataset to address the computational challenge of assembling frescoes from their constituent fragments. Together with the UNESCO World Heritage site of Pompei we created a unique dataset of an iconic case study of large-scale fragmented painted wall fresco. We meticulously 3D reconstruct the fragments using State-of-The-Art (SoTA) Computer Vision techniques, providing both sub-millimeter accuracy for geometry and high-resolution texture details. Then, with the support of an international team of archaeologists, we provide a ground-truth solution to the 2D and 3D puzzle-solving problems that are at the basis of our benchmark. Unlike prior datasets, the RePAIR is a real-world dataset of greater scale and complexity that offers new challenges to the machine learning and computer vision communities.

The RePAIR dataset provides real complex geometries, large variations in fracture volumes due to physical causes, and differing numbers of fractured and missing pieces per shape as shown in Fig. 1. The 1070 digitized pieces have been manually assembled into 117 coherent groups by the team of archaeologists and used to provide a set of equivalent puzzles to solve, both in 2D and 3D. In our dataset, we do not only provide the puzzle solutions in terms of the translation and rotation of each fragment but also augment each piece with archaeologists-provided metadata. For instance, the distinct 3D structures on the back sides of fragments, reflecting their historical use, offer alignment cues. For this reason, we annotate each object with variations in material features--such as material, weight, dimensions, and size--serve as additional indicators of successful matches.

We analyze RePAIR by introducing standardized metrics for puzzle-solving and reassembly and we benchmark several state-of-the-art models under various settings. Extensive experiments against the RePAIR dataset reveal that fractured shape reassembly is still an open problem, especially when methods are confronted with a realistic task as represented by the RePAIR dataset.

**Summary of contributions:**_i)_ We reconstruct high-quality 3D fresco fragments and include corresponding 2D high-quality rendered image of the painted surface of each fresco fragment, offering a unique link between a 3D and a 2D dataset. _ii)_ We introduce a large-scale dataset of _irregular_ fractured objects for the puzzle solving task both in 2D and 3D. _iii)_ We provide a geometric analysis of the digitized fragments and include this information as metadata files. _iv)_ We propose two approaches for the _irregular_ 2D puzzle-solving task, for which only one previous method was available. _v)_ We benchmark SoTA methods for puzzle solving in 2D and 3D on our dataset, with open source code to ensure reproducibility and facilitate future research. _vi)_ We will publicly release this dataset, including images and 3D models, to facilitate comparative studies in fragment registration and reconstruction methods, as well as related research, such as 3D reassembly and restoration.

## 2 Related Datasets and Benchmarks

Here, we introduce the background for 2D and 3D datasets (Sec. 2.1) as well as current SoTA approaches for both solving various forms of puzzles (Sec. 2.2).

### Datasets for 2D and 3D puzzle-solving

**Datasets for 2D puzzle solving.** Datasets for 2D puzzle solving exist as either real scanned fragments or synthesized from images. Synthetic approaches can generate a wide range of puzzle types and geometries, starting from square pieces [16; 64; 78], moving to polygonal fragments [33; 34] and expanding to more complex and naturalistic-looking shapes. In the Crossing Cuts  and DAFNE datasets , polygonal parameterized procedures were used to break images into pieces, while imitating the wear and tear of real archaeological puzzles through a simulated erosion function. This approach enabled the creators of these datasets to generate puzzles with a varying number of pieces and an exact ground truth - a crucial feature for many machine learning implementations and a basic tool for evaluating solvers. A similar yet different method was used to generate training data for JigsawNet , where puzzles were created by slicing images using irregular curves, and the task was the reassembly of shredded documents. A more pattern-based synthesis approach was used by Derech et al. , where the authors employed natural patterns of dry mud to generate puzzles from existing images of historic wall paintings. It was argued that the shape and gaps between mud pieces were analogous to the fragmentation and erosion of ancient artifacts.

Datasets of scanned fragments provide more realistic data and more genuine puzzle solving challenges but the scanning process is a labor-intensive task, often with limited examples, and almost exclusively in 3D. Datasets in 2D are typically a byproduct of the 3D scanning, perhaps best exemplified in the Theran dataset  of Bronze Age wall paintings from Thera (modern-day Santorini). The RePAIR dataset belongs to this type of 2D collections, where it is the most extensive with over 100 different puzzles. Table 1 lists many synthetic and real (scanned) 2D datasets available in the literature.

**Datasets for 3D puzzle solving** The available real-world 3D datasets are confined to scanning multiple fragments corresponding to a limited selection of initially intact objects [38; 79; 87] or to a limited number of breakdown patterns . Previous datasets in  and  feature only 7 objects, while [87; 57] only 15 and 18 with total broken pieces for each to be counted in 101, 69, 123 and 103 pieces respectively.  tried to fill this gap by publishing a relatively larger scale of objects, _i.e._ 150, but their breakdown pattern is limited to two fractured pieces per object. As fracture acquisition occurs post-damage for historical objects without known counterparts, the datasets lack comprehensive knowledge of the complete proxies. This is also the case for the Theran frescoes dataset , which reports a total amount of 412 frescoes without being able to report the originating complete structure. The RePAIR dataset is comparable to these prior datasets while extending the number of total amount of pieces to more than double of the maximum reported amount of pieces (see Tab. 2). Acknowledging the necessity for extensive datasets to facilitate learning-driven repair processes, a handful of datasets incorporate synthetic or scanned models exposed to synthetic fractures via geometric methodologies like subtracting primitives  or employing physics-based fracture models . In all instances of these datasets though, mid-scale detail is depicted as cutouts using analytical primitives, a representation method that lacks generalization to real-world fracture damage.

### Puzzle solving methods

**Puzzle solving in 2D.** The challenge of solving 2D jigsaw puzzles, or reconstructing a coherent whole from an unordered set of fragments, has fascinated humanity for generations. It was first introduced as a _computational_ task in 1964 by Freeman and Garder . Since the problem has been proven to be NP-complete , research focuses on heuristics, specialized techniques, and computational strategies. Approaches do not guarantee an optimal solution but are frequently successful.

However, most of these puzzle-solving methods relied on heavy constraints regarding shape and other properties of puzzle pieces, or prior knowledge of the ground truth pictorial solution, _a.k.a._

  
**Dataset** & **No. Groups** & **No. Breaks** & Breakdown Type & **Eroded?** & **Real/Synthetic** & **Image Origin** \\  Theran  & N/A & 44-129 & Unrestricted & ✓ & Both & Frescos \\ DAFNE  & 62 & 100-2700 & Unrestricted & ✓ & Synthetic & Frescos \\ Derech et al.  & 31 & 10-40 & Unrestricted & ✓ & Synthetic & Frescos \\ Crossing Cuts  & 7200 & 10-3907 & & & & \\  & & & & & & \\ Dead Sea Scrolls  & 5 & N/A & Unrestricted & ✓ & Real & Scrolls \\ Church of Antiphionists  & 2 & 32-36 & Unrestricted & ✓ & Real & Frescos \\ Small Temple of Petra  & 1 & 78 & Unrestricted & ✓ & Real & Frescos \\ Overair Chapl  & 1 & 80735 & Unrestricted & ✓ & Real & Frescos \\ Sholomon et al.  & 20 & 5015-22834 & Square & ✗ & Synthetic & Natural Images \\ Cho et al.  & 20 & 432 & Square & ✗ & Synthetic & Natural Images \\ Pomeranz et al.  & 26 & 805-3300 & Square & ✗ & Synthetic & Natural Images \\ Dunhuang Scrolls  & N/A & 10-60 & Unrestricted & ✓ & Real & Scrolls \\  RePAIR & 101* & 2-44 & Unrestricted & ✓ & Real & Frescos \\   

* Some fragments are decorated with _Stacco_ and thus lack a planar surface to be transformed to 2D. Hence, fewer fragments in 2D (See Sec. 3.3).

Table 1: Publicly available 2D puzzle solving datasets and their properties.

_"reference image"_, thus limiting their potential applicability. In particular, since the early 2000's much of the literature focused almost exclusively on square jigsaw puzzles [82; 24; 97; 55; 4; 16; 64; 92; 72; 3; 5; 78; 67], then gradually expanding towards more general puzzles, such as puzzles with unknown piece orientation [30; 54; 73; 75; 93; 77; 76; 66], cases in which pieces from multiple puzzles were mixed together [30; 54; 58; 77; 76], missing pieces [30; 54; 58; 77; 76] noisy pictorial content [54; 7; 66; 75; 93; 76], gaps between neighboring pieces [61; 20], restricted deformations to the pieces' shapes , and puzzles of polygonal shapes [33; 17; 34]. In contrast, archaeological puzzles are considered unrestricted puzzles. Computational tools have revolutionized  this field by utilizing both the geometrical properties and pictorial content of pieces to match neighboring fragments [53; 81; 12; 28; 8; 71; 59; 62; 51; 6; 7; 48]. Among these works, Derech _et al_.  extrapolated the puzzle pieces content and attempted to resolve their spatial configuration using registration. Zhang _et al_.  employed an Internal Similarity Network (ISN) to score the dissimilarity of potentially neighboring fragments, after matching them by the similarity of their contour shapes. Zhang _et al_.  incorporated both the laminar textual content of pieces, all sampled from the Dunhuang scrolls, and their geometric shapes to align and match potential neighbors, while employing a hierarchical loops approach for global reconstruction. Recently, Cao _et al_.  utilized a multiscale MobileViT classification network to evaluate the neighboring compatibility based on contour differences.

**Puzzle solving in 3D.** Puzzle solving in 3D can also be considered a reassembly problem with approaches such as furniture assembly . However, these rely on the semantic properties (_i.e_. label or class) of the parts. In contrast, within the archaeological domain, frescoes have been extensively studied. [14; 29]. However, such approaches are stifled by limited data, which was addressed with the introduction of the _Breaking Bad_ dataset . In the synthetic _Breaking Bad_, the challenge is reconstructing a broken object from multiple artificially fractured fragments. However, those fragments do not have any semantics as in many real-world applications . NSM  tried to address the two-part mating problem by emphasizing shape geometries over semantic information. _SE(3)-Equiv_ tackles the problem with specific design choices that go beyond object reassembly, _e.g_., adversarial and reconstruction losses.  and  examine methods to efficiently plan physically plausible assembly motion and sequences for CAD based real-world assemblies by using physics-based simulations to efficiently explore a reduced search space. On the other hand, Jigsaw  is the first approach that tries to combine an approach using global and local hierarchical geometry features in order to match and align the fracture surfaces. Finally, DiffAssemble  is a Graph Neural Network (GNN) based architecture which learns to solve reassembly tasks using a diffusion model formulation.

## 3 Building the RePAIR dataset

The RePAIR dataset encompasses \(1070\) reconstructed 3D fragments (\(\)) with high resolution shape and texture, where \(=\{f_{i}\}_{i=1,,n}\). The fragments are organized into 117 groups (\(\)), as reassembled by the archaeologists, containing between 2 and up to 44 connected fragments per group. There is also a set of 150 (over the total 1070) ungrouped fragments, denoted as _"Isolated"_, for which their solution is still to be discovered, and supporting this way _open discovery_ within the dataset. Following

  
**Datasets** & **No. Pieces** & **No. Breaks** & **No. Groups** & **Type** & **Breakdown** & **Metadata** & **Texture** & **Availability** & **Data Type** \\  & & & & & & & **Type** & & \\  Truwien  & 101 & 6-30 & (14.42) & 7 & Artifacts & Real & ✗ & ✗ & \(\) & 3D \\ Theran  & 412 & (283/129)* & - & - & Frescoes & Real & ✗ & ✗ & ✗ & 2D/3D \\ Presious  & 69 & (9.85) & 7 & Artifacts & Real & ✗ & ✗ & \(\) & 3D \\ Breaking Bad  & 8442044 & (8.06) & 10474 & Groups & Synthetic & ✗ & ✗ & \(\) & 3D \\ Fantastic Breaks  & 300 & 2 & 150 & Groups & Real & ✗ & ✗ & \(\) & 3D \\ FIBES  & 123 & 7-18 & 15 & Pottery & Real & ✗ & ✗ & \(\) & 3D \\ Chinaware Fragments  & 103 & N/A & 18 & Pottery & Real & ✗ & ✗ & \(\) & 3D \\ 
**RePAIR** & **1070** & **2-44** & **117**** & **Frescoes** & **Real** & \(\) & \(\) & \(\) & **2D/3D** \\   

* Naturally/Artificially made ** ** No. Puzzles differ between 2D/3D version as some pieces are not suitable for 2D (see Sec. 3.3)

Table 2: Analysis of the current 3D reassembly and puzzle datasets in the literature.

the description of the dataset's archaeological context in Section 3.1, we detail the digitization process in Section 3.2 and the generation of ground truth data in Section 3.3.

### Background archaeological activities at Pompei park

The RePAIR dataset is a real-world example of years of archaeological fieldwork in the Pompei Archaeological Park. It consists of fragments from several frescoes originally located in the _House of Painters at Work_ which was destroyed both during the AD 79 eruption and by World War II bombings. The process of reassembling incomplete frescoes for archaeologists starts with painstaking cleaning and preparation of fragments. The assembly is then based on the analysis of several characteristics of the pieces, such as mortar layers and composition, traces of adhesion on the reverse side, smoothing stroke patterns of the plaster, and preparatory lines, alongside painted elements like background color and motif descriptions. Frescoes are assembled in a hierarchical manner starting from small clusters thanks to matching cues or comparison to similar patterns in related artworks and extending to larger clusters called "Plaques". Plaques are groups of attached fragments where no additional fragments can be added at that time, see Fig. 2.

The dataset contains more than a hundred groups solved by archaeological experts. Some of these groups can be connected to form an even larger part of a fresco. In fact, the fresco denoted as _Decor 1_ has been studied and its schema identified, leading to a reassembly of large parts of it, see Fig. 2. Notably, not all fragments within _Decor 1_ have been recovered and the final solution is still unknown, as the schematic solutions allow for more than one solution (see Appendix E).

The data acquisition process was conducted under the strict supervision of professional archaeologists, following best practices to ensure the safety of the fresco fragments. Our collaboration with the team onsite ensured a non-destructive process that staff was trained on the manipulation of ancient artifacts.

### Digitizing Pompei's fragments

Each fragment consists of \(f=\{P,T\}\) with \(P\) being a 3D point cloud \(P^{3}\) and \(T^{2}\) the corresponding texture coordinates. To acquire \(P\), we used a Polya H3 3D scanner , which captures geometric accurate models of the fragments, at \(0.08\) mm accuracy, through a structured light sensor. Then, to acquire high-resolution textural content, we additionally used a Sony \(\)7c at 24.2-megapixel per image. To minimize environmental factors, including shadows and reflections, the scanner and camera were placed in a lighting box (as in Fig. 3) with the fragment placed on a turntable capturing \(18\) viewpoints of the fragments. In addition, the top and bottom are captured and aligned. This dual configuration requires the registration of high-resolution images onto the geometric data by employing photogrammetric techniques to compute the texture \(T\). We outline the key steps of the digitization pipeline in Figure 3 and metadata below, then refer the reader to the Appendix F for further details on the digitization process and metadata (Sec. F.1).

Figure 2: _Decor 1_ is composed of five plaques, highlighted as islands of pieces in different colors. Each plaque is reconstructed by archaeologists through meticulous fragment connections and attribute analysis. (See Appendix E for more details).

**Metadata.** For each fragment, the archaeologists provided artistic style and fresco family information. Moreover, geometric data (weight, fragment bounding box, _etc._) and raw capture information and basic metadata (ID, version, _etc._) have been included. The data is organized in _JSON_ files for each fragment, adhering to the specifications that are commonly used in similar datasets ().

### Ground truth generation for 2D and 3D puzzle solving

Generating accurate ground truth is a challenge as the exact complete solution remains unknown even to experts in the archaeological field. Despite the unknown complete solution, archaeologists have physically assembled several subsets of pieces through years of fieldwork (See Fig. 2). These visual solutions serve as a reference for converting the archaeologists' findings into machine-readable 3D transformations. Following the group divisions outlined in Section 3, we create a Ground Truth (GT) solution in 2D and 3D for reassembling each group in our dataset (see Fig. 3).

**3D Ground Truth.** Generating 3D ground truth involves translating the physical reassembly by archaeological experts into 3D transformation matrices. We utilized Blender, to manipulate and align the 3D pieces. For each of the 117 groups in our dataset, we prepared a virtual 3D scene and manually reassembled them using reference images provided by the archaeologists. The 6DoF transformation matrices extracted from this process serve as the ground truth for the 3D reassembly task.

**2D Ground Truth.** Given the 3D puzzles ground truth, the 3D pieces were aligned with the textured surface's normal along the \(Z\)-axis, making the \(XY\) plane a suitable approximation of the 2D image plane. Consequently, the 2D ground truth \((x,y,)\) directly corresponds to scaled translations on the \(X\) and \(Y\) axes and the rotation angle (Euler) on the \(Z\)-axis. A scaling factor is applied to adjust the 3D millimeter coordinates to 2D pixel coordinates (see Appendix H).

_Note on 2D GT: A small subset of the RePAIR fragments are located at the intersections of walls and ceilings, lacking a planar surface suitable for transformation into a 2D ground truth. Consequently, the 2D RePAIR dataset contains fewer fragments and puzzles compared to its 3D counterpart._

## 4 Benchmarking RePAIR Dataset for Puzzle Solving

For both the 2D and 3D settings for puzzle solving, we constructed a set of benchmark experiments and common evaluation metrics in Section 4.1. We conducted a thorough quantitative assessment for 2D and 3D puzzle-solving in Section 4.2. For both scenarios, we define the set of baselines, their performance on RePAIR, and discuss the results. The RePAIR dataset is split into a provided training and testing with an 80/20 percentage split, allowing the option of a validation set. More details on the evaluation metrics and the 2D and 3D methods are available in Appendix I.

Figure 3: (a) The digitization process merges fragments 3D geometry from a structured light scanner and RGB images from a hi-res camera into high-detail textured 3D mesh. (b) The final groundtruth (GT) of fragments for 2D & 3D.

### Evaluation Metrics

Prior studies on 2D and 3D puzzle solving have introduced a range of evaluation metrics to assess errors related to geometry, such as fragment positioning, and neighbor consistency, which determines whether pieces are correctly aligned with their adjacent fragments.

**Evaluation metrics based on geometry.** Expanding Harel _et al_.  2D metric to 3D, we define a \(Q_{pos}\) metric, which scores the shared areas/volume between ground truth fragments pose (translation and rotation) and the solution given by the evaluated methods. It is important to make the metric invariant to rigid motion, avoiding scoring good solutions low only because they obtained the 'wrong' global rotations. Hence, we first apply a rigid transformation to the reconstruction on the largest fragment (named _anchor_) aligned in translation and rotation with the corresponding ground truth fragment. To calculate \(Q_{pos}\), we first define a fragment's area or volume (\(A(f_{i})\)). The shared area in 2D can be thought of as comparing the non-transparent pixels of two large canvases that contain all fragments in 2D. Similarly, in 3D, we compare the volume intersection of the registered point clouds. In addition, fragments are weighted based on their area/volume to reflect the importance of having an error on bigger fragments. The evaluation metric is formalized in the following measure:

\[Q_{pos}=_{i=1}^{n}w_{i}})|}{ |A(})|},w_{i}=)|}{ _{k=1}^{n}|A(f_{k})|}. \]

We also evaluate the \(RootMeanSquareError(RMSE)\) for both translation in millimeters (\({}_{mm}\)) and rotation in degrees(\({}^{}\)) computed relatively with respect to the ground truth, as:

\[(_{mm})=}_{i=1}^{n}\|}-t_ {i}^{gt}\|_{2},(^{})=}_{ i=1}^{n}\|}-R_{i}^{gt}\|_{2}. \]

where \(}\) is the predicted translation, \(t_{i}^{gt}\) is the ground truth translation, \(}\) is the predicted rotation, and \(R_{i}^{gt}\) is the ground truth rotation of the \(i\)-th fracture. Notice that the \(Q_{pos}\) score metric is indirectly influenced by the RMSE scores. Even slight rotations, which may alter a fragment's overall position in the workspace, or slight translations in the opposite direction of its ground truth position, can significantly impact its \(_{pos}\) score.

**Evaluation metrics based on neighbors consistency.** These metrics evaluate the consistency of neighbors given a ground truth mating graph, _i.e_. a graph that indicates which are the neighbors of a specific fragment. Intuitively, we define neighboring fragments in 2D or 3D space as two pieces that are close to one another in the assembly (either the ground truth or the solver's one) and not separated by a third fragment. To determine the neighbors of each fragment, we established a threshold representing the maximum distance observable in RePAIR between adjacent pieces. Therefore, fractures within this threshold are deemed neighbors, while those beyond it are not considered as such. By comparing edges of a solution's mating graph \(M_{}\) to the ground-truth ones \(M_{}\), we define several evaluation metrics, as proposed in  for their crossing cuts polygonal model:

\[Q_{}=,p_{j}\} M_{} M_{ }}(|A(p_{i})|+|A(p_{j})|)}{_{\{p_{i},p_{j }\} M_{}}(|A(p_{i})|+|A(p_{j})|)},\ Q_{ {recall}}=,p_{j}\} M_{} M_{}}( |A(p_{i})|+|A(p_{j})|)}{_{\{p_{i},p_{j}\} M_{ }}(|A(p_{i})|+|A(p_{j})|)} \]

\(Q_{}\) counts true mattings by the solver, while \(Q_{}\) represents the fraction of predicted neighbors that are true neighbors. Both metrics are weighted by fragments' area/volume, giving greater importance to larger pieces of the puzzle. They can be consolidated with their harmonic mean into the \(F1\) score, to quantify performance: \(F1=2} Q_{}}{Q_{}+Q_{}}\)

### 2D puzzle solving evaluation

We consider only SoTA approaches able to reconstruct archaeological puzzles, where fragments are of unrestricted shapes, often eroded (or more generally, deformed geometrically), and possibly pictorial to some degree. Very few examples are not bespoke to data or task and very few have code openly available. We evaluate three different baseline approaches, one from literature and two naive baselines, examining both their ability to recapture the fragments neighborhood graph, (_a.k.a._ the _mating_ graph) and the geometric quality of reconstruction.

**Baseline Methods.** We benchmark the performance of three SoTA solvers on our dataset: _i)_ Derech _et al_.  Archaeological Puzzle Solver applies a greedy next best piece algorithm based on the texture. However, they use an outdated extrapolation process, which we replaced with the stable-diffusion extrapolation process . _ii)_ Genetic Algorithm reconstruction uses a fitness function of the geometry, using the area of the puzzle's bounding rectangle and the intersection area of overlapping pieces. Since perfect solutions tend to minimize both of these values. Naturally, this does not guarantee a good solution. _iii)_ Greedy geometric matching, from a random seed fragment, iteratively extends the fragment pose in a greedy fashion based on geometry in contrast to , which is based on texture compatibility, see Appendix I.2 for more details.

**Results discussion.** We show the results of the 2D baseline methods in Table. 3, experimenting on the test set (excluding one group, Sec. 3.3). Although all of these methods achieve relatively poor results, we note that the Genetic Optimization and the Greedy Geometric Matching approaches, both proposed in this paper, achieve competitive results to those achieved by Derech _et al_. , even surpassing them in some metrics. Overall, however, existing methods do not seem to cope well with realistic (archeological) puzzle solving, and leave much room for original research on solving challenges like the dataset presented in this paper. For qualitative results, see Fig. 4.

### 3D Puzzle Solving Evaluation

For 3D puzzle solving, we evaluate six methods using the same metrics as in the previous section.

**Baseline Methods.** We benchmark the performance of five SoTA learning-based shape assembly methods on our dataset: Global , LSTM , DGL , SE(3)-Equiv. , and DiffAssemb

  Method & \(Q_{pos}\) & RMSE (\(^{}\)) \(\) & RMSE (\(_{mm}\)) \(\) & Precision \(\) & Recall \(\) & F1 \(\) \\  Global & 0.047 & 84.560 & 64.509 & 0.569 & 0.725 & 0.606 \\ LSTM & 0.042 & 91.187 & 67.103 & 0.541 & 0.838 & 0.629 \\ DGL & 0.063 & 84.532 & 67.723 & 0.543 & 0.829 & 0.599 \\ SE(3)-Equiv. & 0.063 & 86.990 & 59.247 & 0.668 & 0.770 & 0.688 \\ DiffAssemble & 0.066 & 85.055 & 69.233 & 0.503 & 0.842 & 0.587 \\  

Table 6: Generalization Results on 3D puzzle solving (trained on Breaking Bad  dataset and tested on RePAIR).

  Method & \(Q_{pos}\) & RMSE (\(^{}\)) \(\) & RMSE (\(_{mm}\)) \(\) & Precision \(\) & Recall \(\) & F1 \(\) \\  Global  & 0.127 & 88.606 & 58.020 & 0.707 & 0.712 & 0.683 \\ LSTM  & 0.071 & 89.071 & 61.732 & 0.492 & 0.880 & 0.585 \\ DGL  & 0.119 & 87.611 & 58.387 & 0.669 & 0.751 & 0.659 \\ SE(3)-Equiv.  & 0.093 & 70.816 & 56.046 & 0.724 & 0.670 & 0.681 \\ DiffAssemble  & 0.099 & 69.536 & 67.960 & 0.506 & 0.905 & 0.599 \\  

Table 4: Results on RePAIR 3D Puzzle solving.

  Method & \(Q_{pos}\) & RMSE (\(^{}\)) \(\) & RMSE (\(_{mm}\)) \(\) & Precision \(\) & Recall \(\) & F1 \(\) \\  Derech _et al_.  & 0.037 & 80.964 & 139.495 & 0.454 & 0.527 & 0.471 \\ Genetic Optimization & **0.047** & 85.625 & 151.714 & 0.313 & 0.662 & 0.394 \\ Greedy Geom Match & 0.023 & 76.987 & 135.946 & 0.297 & 0.470 & 0.351 \\  

Table 3: Results on RePAIR 2D Puzzle solving.

[MISSING_PAGE_FAIL:9]

erosion and deterioration are realistic. In 2D, the SoTA lacks methods that are able to handle such irregular and eroded pieces, as most of the literature addresses synthetic setups (_e.g._, square puzzles) that limit their real-world applicability. 3D puzzle-solving methods for irregular and eroded do exist, but their performances are far from solving the problem even on relatively small challenges. Both 2D and 3D puzzle solving methods exhibit significant sensitivity and large discrepancies in their evaluation metrics such as absolute position (\(RMSE\)) or neighbor metrics (\(Q_{}\), \(Q_{}\), \(F1\)). Furthermore, there is surprisingly little difference in performance between 2D and 3D results, indicating that the problem is similarly difficult for both sets of methods. This is especially surprising for Derech _et al_. , the only method that handles texture information, which is crucial during human groundtruth generation for both archaeologists and the translation to 6DoF pose.

The current performance of SoTA methods clearly indicates that many challenges in realistic puzzle solving still lie ahead, regardless of the dimension (2D or 3D) where it is considered. Most prominent are the ability to exploit degraded geometry (as is the case in eroded fragments), coping with poor or scarce pictorial information (as in the RePAIR fresco), and the inherent combinatorial complexity. Despite many years of research on 2D pictorial puzzle solving, few methods are able to handle irregular shape pieces, and even fewer when such fragments are not rich pictorially. 3D methods lack focus on geometrically degraded fragments, and most often ignore pictorial information altogether. We recognize that the current baseline approaches are not specifically designed to address these more complex, real-world breaking patterns. We believe that this complexity is a key strength of our dataset, as it provides a more accurate representation of real-world scenarios. Thus, we hope by introducing the RePAIR dataset will help and motivate the community to have a standard baseline to develop methods that can be applied to real-world puzzle solving methods, either for data-driven approaches (via training) and/or for evaluation. Moreover, as a real-life dataset, emerging from a real archaeological origin, the RePAIR dataset is designed to foster the development and present an opportunity to incorporate and exploit additional cues and features emerging from art history and archaeology knowledge. In practice, this suggests the need for more advanced methods that can better handle these challenges and possibility to endow the current frontiers of geometrical and pictorial tools in puzzle solving with novel methods from language and knowledge inference (_e.g._, via Large Language Models, LLMs, or Multimodal Large Language Models, MLLMs), all may prove vital to handle the complexities of real-life puzzles like the RePAIR dataset.

Another interesting aspect would be to explore whether 3D puzzle-solving can be considered and solved as a shape-repair (or completion) problem. Relevant works in the literature involve filling in missing parts of a single, incomplete object. These methods are designed to infer and generate the missing geometry of a known object based on existing data. They often use occupancy functions  or generative adversarial networks  to predict the missing portion of the fractured piece. This problem is different from reassembly, as in the proposed problem, we have multiple (known) fragments that need to be matched and registered to obtain a consistent 3D shape, as provided by the ground truth. However, we believe shape repair could be a complementary task to the reassembly task and also be very useful for archaeologists as: a) It can repair eroded surfaces for each fragment, so to provide a better alignment and a more consistent overall surface; b) It can complete the puzzle with missing pieces that have been lost or irremediably destroyed during the collapse.

Finally, we would like to conclude with some societal concerns that might be raised, especially with the blooming of AI. This could be the potential unethical uses of this dataset for artifact forgery. The approach certainly does not preclude such a case from happening, however the consensus on Open Access Heritage acknowledges that the benefits outweigh the risks, particularly in light of recent instances of destruction and theft. While AI tools for reassembly could theoretically be misused for criminal purposes, their potential to reconstruct thousands of frescoes or other objects from heritage sites across the globe offers significant insights into historical societies and cultures. It is recognized that access to digital twins of historical fragments may raise ethical concerns, especially with the potential for future 3D printing in comparable materials or the distribution of digital versions. However, to date, there is no agreement upon 3D watermarking approach .

## 6 Acknowledgements

This work is part of the RePAIR project that has received funding from the European Union's Horizon 2020 research and innovation programme under the grant agreement No. 964854.