# Individual Welfare Guarantees in the Autobidding World with Machine-learned Advice

Anonymous Author(s)

###### Abstract.

Online advertising channels commonly focus on maximizing total advertiser welfare to enhance channel health, and previous literature has studied augmenting ad auctions with machine learning predictions on advertiser values (also known as _machine-learned advice_) to improve total welfare. Yet, such improvements could come at the cost of individual bidders' welfare and do not shed light on how particular advertiser bidding strategies impact welfare. Motivated by this, we present an analysis on an individual bidder's welfare loss in the autobidding world for auctions with and without machine-learned advice, and also uncover how advertiser strategies relate to such losses. In particular, we demonstrate how ad platforms can utilize ML advice to improve welfare guarantee on the aggregate and individual bidder level by setting ML advice as personalized reserve prices when the platform consists of _autobidders_ who maximize value while respecting a return on ad spend (ROAS) constraint. Under parallel VCG auctions with such ML advice-based reserves, we present a worst-case welfare lower-bound guarantee for an individual autobidder, and show that the lower-bound guarantee is positively correlated with ML advice quality as well as the scale of bids induced by the autobidder's bidding strategies. Further, we show that no truthful, and possibly randomized mechanism with anonymous allocations can achieve universally better individual welfare guarantees than VCG, in the presence of personalized reserves based on ML-advice of equal quality. Moreover, we extend our individual welfare guarantee results to generalized first price (GFP) and generalized second price (GSP) auctions. Finally, we present numerical studies using semi-synthetic data derived from ad auction logs of a search ad platform to showcase improvements in individual welfare when setting personalized reserve prices with ML-advice.

2021

## 1. Introduction

Online advertisers have access to a vast array of digital advertising channels, such as social media, web display, and keyword search, from which they can procure ad impressions and drive user traffic. One possible way for these channels to improve overall attractiveness and retention is to design appropriate ad auction mechanisms that enhance advertisers' total welfare, which reflects the aggregate advertiser-perceived value of procured ad impressions on the channel. For instance, consider advertisers whose ad campaign objective is to maximize ad clicks that direct users to landing pages of their services or products, as described in (Song et al., 2017). These advertisers' perceived value of procured ad impressions is their click conversion rate, and thereby ad channels' welfare maximization goal translates into improving the aggregate realized click conversion among all participating advertisers.

Academic literature has developed various approaches to improve total welfare, one of which involves using machine learning tools to predict advertiser values based on user interactions with ads. In the instance where welfare corresponds to click conversion, channels use ML algorithms to produce predictions (i.e., ML advice) on click conversion rates for impressions. See (Song et al., 2017; Wang et al., 2017; Wang et al., 2017) or (Wang et al., 2017) for a comprehensive survey on click predictions. Having obtained ML advice on advertiser values, recent works such as (Brockman et al., 2017; Wang et al., 2017; Wang et al., 2017) motivate the approach to augment existing ad auctions by directly setting personalized reserve prices for advertisers using such ML advice, and show theoretical guarantees on total welfare improvement.

Nevertheless, these results present two important issues. First, improving total welfare doesn't necessarily ensure that all individual advertisers benefit equally; some may even experience a detriment to their welfare. For instance, larger advertisers acquiring more impressions while smaller advertisers receive fewer could potentially harm the businesses of the latter and compromise the overall health of the channel in the long term. Second, welfare improvement guarantees are presented in a price of anarchy (POA) fashion, which measures the worst-case total welfare outcome compared to the maximum achievable (or efficient) welfare. However, these POA bounds are independent of advertiser bidding strategies and thus don't illuminate how specific advertiser bidding strategies in ad auctions affect individual or total welfare. Given these shortcomings in existing results, in this work, we address the following questions:

_Given an advertiser's bidding strategy to procure impressions in ad auctions, how can platforms characterize the potential welfare loss for this individual advertiser? How should ad channels utilize machine-learned advice that predicts advertiser values to improve individual welfare?_

We study a prototypical _autobidding setting_ where advertisers compete simultaneously in numerous multi-slot position auctions that are run in parallel, and aim to maximize total advertiser value under _return-on-ad-spend (ROAS)_ constraints that restrict total spend of a bidder to be less than her total acquired value across all auctions in an average sense; see similar setups in (Brockman et al., 2017; Wang et al., 2017; Wang et al., 2017). On the other hand, ad platforms possess ML advice that predictsadvertisers' real values with a certain degree of accuracy/quality. Under this setup, our main contributions are described as followed:

**Strategy-dependent individual welfare guarantee metric for individual advertisers.** In Section 2, we present a novel individual welfare metric that measures the difference between two specific welfare outcomes for an individual advertiser: (1) given a fixed bidding strategy, the worst-case welfare across all auction outcomes where all bidders' ROAS constraints are satisfied; and (2) the welfare that this individual bidder would have obtained in the global welfare-maximizing outcome. Our metric achieves two key goals: (1) it characterizes individual welfare loss, and (2) it allows platforms to uncover the relationship between advertiser strategies and individual welfare guarantees.

**Individual welfare guarantees in VCG auctions with ML-advice-based personalized reserves.** In Section 3, we illustrate through examples that setting ML advice as personalized reserves, as presented in (Brockman, 2015; Kemp, 2016), improves individual welfare guarantees under our individual welfare metric. In Section 4, we demonstrate that augmenting VCG auctions with ML-advice-based reserves enables us to present an individual welfare lower bound guarantee that increases with the advertiser's bid scale, quality of ML advice, and the relative market share of this advertiser compared to competitors (Theorem 4.1). Together with the results in (Kemp, 2016), we conclude that incorporating ML advice as personalized reserves achieves a "best of both worlds" outcome by simultaneously benefiting total and individual welfare.

**VCG has the best individual welfare guarantees among a broad class of auctions.** In Section 5, we demonstrate that no allocation-anonymous, truthful, and possibly randomized auction format with ML advice of a given quality can surpass the individual welfare guarantee provided by the VCG auction combined with ML advice of the same quality; see Theorem 5.1. Specifically, for any allocation-anonymous, truthful, and potentially randomized auction, we construct a problem instance with personalized reserves based on ML advice of the specified quality and show that there must be at least one bidder whose welfare does not exceed the welfare lower bound guarantee under VCG (refer to Theorem 4.1).

**Extending individual welfare guarantees to GSP and GFP.** We extend the individual welfare guarantee results to GSP and GFP auctions and demonstrate that a similar individual welfare lower bound guarantee for VCG continues to hold (see Theorem 6.2). We compare these lower bound guarantees in GSP and GFP with those of VCG and identify conditions under which VCG either outperforms or underperforms GSP/GFP in terms of our individual welfare metric, given the same ML advice quality.

**Numerical results.** We present numerical studies using semi-synthetic data derived from the auction logs of a search ad platform to showcase individual welfare improvement by setting ML-advice-based personalized reserves. We demonstrate that as the quality of ML advice improves, the welfare of more advertisers approaches what they would have obtained in the efficient outcome.

### Related works

**Autobidding and total welfare maximization.** The works most relevant to this paper are (Brockman, 2015; Kemp, 2016; Kemp, 2016), where they consider the same autobidding setting (i.e., value-maximizers with ROAS constraints) as ours. (Brockman, 2015; Kemp, 2016; Kemp, 2016) all present techniques to improve the price-of-anarchy bounds for the total welfare of any feasible outcome in which all bidders' ROAS constraints are satisfied. (Kemp, 2016) relies on additive boosts to bid values, (Brockman, 2015; Kemp, 2016) utilizes approximate reserve prices derived from ML advice, and (Kemp, 2016) develops randomized allocation and payment rules. Our work distinguishes itself from these works as we focus on welfare guarantees at the individual bidder level, and also shed light on how autobidders' uniform bidding strategies influence individual welfare loss. We note that our proof techniques also differ from those in (Brockman, 2015; Kemp, 2016; Kemp, 2016) as our individual welfare guarantees require novel analyses on the value-expenditure trade-offs that individual bidders would face when tempted to out-bid others to acquire more value. See the discussion in Section 4 for more details.

**Exploiting ML advice.** ML advice has been utilized in various applications to enhance decision-making. For example, (Kemp, 2016) exploits ML advice to develop algorithms for the multi-shop skirental problem, (Kemp, 2016) adopts ML advice for the caching problem, (Kemp, 2016) studies online page migration using ML advice, and (Kemp, 2016) studies online resource allocation with convex ML advice. However, even though numerous works in online advertising have examined predictive models for advertiser values, click-through rates, etc. (see, e.g., (Kemp, 2016; Kemp, 2016)), the literature on applying such predictions (or more generally, ML advice) to mechanism design problems remains limited. Also, refer to (Kemp, 2016; Kemp, 2016) for works that exploit sample information (unstructured ML advice) in online decision-making. One pertinent study in this realm is (Kemp, 2016), which devises a theoretical framework to optimize reserve prices in a posted price mechanism by leveraging prediction inputs on bid values. Unlike this research, we do not focus on optimizing reserves but advocate for the straightforward approach of setting reserves using ML advice to enhance individual advertiser welfare. Furthermore, we emphasize that our work contributes to the field by harnessing ML advice to design mechanisms that bolster welfare guarantees for individual bidders.

We refer readers to Appendix A for a further literature review.

## 2. Preliminaries

**Auction Model with Advertisers and Position Actions.** Consider \(N\) bidders (i.e., advertisers) participating in \(M\) parallel position auctions \((_{j})_{j[M]}\), where each auction \(_{j}\) is instantiated by a user keyword search query. An auction \(_{j}\) offers \(L_{j} 1\) ad slots to bidders. These slots are ordered by visual prominence, or equivalently, the likelihood of the user viewing the slot on the web-page. This likelihood is represented by click-through-rates (CTR): \(1_{j}(1)_{j}(2)_{j}(L_{j}) 0\). Here, \(_{j}(t)\) denotes the likelihood of the user in auction \(j\) viewing slot \([L_{j}]\) (for an introduction to position auctions, see, e.g., (Kemp, 2016; Kemp, 2016)). A bidder \(i[N]\) has a private value-per-click, denoted by \(v_{i,j}>0\), for auction \(_{j}\). This value represents her perceived value conditioned on the user viewing her ad. Consequently, if she wins slot \([L]\), her accrued welfare or value is \(_{j}() v_{i,j}\).

### Preliminaries for a single position auction

In this subsection, we discuss a single position auction, and thus temporarily remove subscripts in auction indices \(j\). A (possibly randomized) position auction \(\) with \(L 1\) slots is characterized by a tuple \((,,)\), where \(\) is an allocation rule, \(\) is a payment rule, and CTRs \(=(())_{[L]}^{L}\) that satisfies \(1(1)(2)>(L) 0\). Let \(N\) bidders with private value per-clicks \(=(u_{i})_{i[N]}\) participate in auction \(\) by submitting a bid profile \(=(b_{i})_{i[N]}_{+}^{N}\), and we describe the payment and allocation rules as follows.

The allocation rule \(:_{+}^{N}\{0,1\}^{N L}\) maps bid profile \(_{+}^{N}\) to an outcome \(=()\{0,1\}^{N L}\) which may possibly be random. The entry \(x_{i,}=1\) if bidder \(i\) is allocated slot \([L]\), and \(0\) otherwise. Here, each slot \(\) is at most allocated to one bidder so \(_{[N]}\) is \(1\) for any \(\). Further, under outcome \((0,1)^{N L}\), bidder \(i\) who has value \(v_{i}\) attains a total welfare of \(W_{i}()=v_{i}_{[L]}\,()x_{i,}\). That is, if bidder \(i\) is allocated slot \([L]\) (i.e., \(x_{i,}=1\)), her welfare is \(W_{i}()=()v_{i}\). The payment rule \(:_{+}^{N}_{+}^{N}\) maps bids \(\) to payments \(()_{+}^{N}\) where \(_{i}()\) is the payment of bidder \(i\). In this work, we focus on the class of auctions that are _ex-post individual rational_ (IR), i.e. the payment for any bidder is less than her submitted bid, or mathematically \(_{i}(b_{i},_{-i}) b_{i}\) for any \(_{-i}_{+}^{N-1}\)1 We note that the classic VCG, GSP and GFP auctions are ex-post IR.

In the following we define truthful, allocation anonymous auctions and personalized reserve augmented auctions.

**Definition 2.1** (Truthful auction).: _Consider the position auction \(=(,,)\) where, recall that \(\) and \(\) are possibly random allocation and payment rules, respectively, and \(^{L}\) represents CTRs. We say the auction is truthful if, for any bidder \(i[N]\), all of their values \(v_{i}\) are such that \(v_{i}_{_{}}[W_{i}((b,b_{-i}) -_{i}(b,b_{-i})]\) for any competing bid profile \(_{-i}\). Here, the expectation is taken with respect to the possible randomness in \((,)\), and recall that the welfare \(W_{i}()=v_{i}_{[L]}()x_{i,}\) with \(=(b,_{-i})\)._

Note that the well-known VCG auction is truthful. In truthful auctions, it is a weakly dominant strategy for a bidder to bid her true value when her objective is to maximize quasi-linear utility. In the next Subsection 2.2, we study bidders whose objectives are not necessarily quasi-linear, meaning that truthful bidding is no longer weakly optimal in truthful auctions.

We next define allocation-anonymous auctions. In such auctions, if two bidders swap their bids, the probability of each bidder winning any slot will also be swapped. In other words, the outcome of the position auction depends solely on the solicited bid values and is independent of the bidders' identities. The classic VCG, GSP, and GFP are all allocation-anonymous. We refer readers to Example B.1 in the appendix for an illustrative example of allocation-anonymity in GSP.

**Definition 2.2** (Allocation anonymous auctions).: _Given a fixed position auction, \(=(,,)\), consider any permutation \(:[N][N]\) of \(\{1,,N\}\) and the permuted bid profile \(^{}=(b_{(i)})_{i[N]}\). Let \(=()\) and \(^{}=(^{})\) represent the (possibly random) outcomes under \(\) and \(^{}\), respectively. Then, \(\) is termed allocation-anonymous if, for any bidder \(i[N]\) and slot \(j[L]\), we have \((x_{(i),j}=1|)=(x^{}_{i,j}=1|^{ })\)._

Finally, we describe augmenting allocation anonymous auctions with personalized reserves.

**Definition 2.3** (Personalized-reserve augmented allocation anonymous auctions).: _Fix position auction \(=(,,)\), and some vector of personalized reserve prices \(_{+}^{N}\) where \(r_{i}\) is the reserve price for bidder \(i[N]\). Then, the augmented auction is \(^{}=(^{},^{},)\) where allocation \(^{}\) and payment \(^{}\) are characterized via the following procedure for any bid profile \(_{+}^{N}\):_

* \(^{}\)_: Define bid profile_ \(^{}=(b_{i} 1\{b_{i} r_{i}\})_{i[N]}\)_. Then_ \(^{}()=(^{})\)_2__

* \(^{}\)_: If_ \(i[N]\) _is not allocated a slot under outcome_ \(^{}(),^{}_{i}()=0\)_. Otherwise, let_ \(_{i}[L]\) _be the slot allocated to bidder_ \(i\) _under_ \(^{}()\)_. Then,_ \(^{}_{i}()=\{_{i}(^{}),( _{i}) r_{i}\}\)_._

Recall that a bid of \(0\) always results in neither allocation nor payment. Therefore, \(^{}\) can effectively be viewed as excluding bidders who don't meet their reserves and then implementing the allocation rule \(\) for the remaining bidders. In subsequent sections, we'll demonstrate that the personalized reserve prices pertinent to this work, which are based on ML-advice, ensure all bidders clear their reserves, implying that no bidders will be excluded from ranking. For an illustration of how anonymous VCG, GSP, and GFP auctions are augmented with personalized reserves, we refer readers to Example B.2 in the appendix.

### Autobidders' objectives and uniform bidding strategies

Recall the setup with \(N\) bidders participating in \(M\) parallel position auctions \((_{j})_{j[M]}\), where \(_{j}_{+}^{N}\) are the bidders' values in auction \(_{j}=(_{j},_{j},_{j})\) (refer to definitions in Subsection 2.1).

_Notations:_ The bids submitted by bidder \(i\) are denoted by \(b_{i}_{+}^{M}\). The bid profile submitted to \(_{j}\) is represented by \(_{j}^{}_{+}^{N}\). The outcome of \(_{j}^{}\) in \(_{j}\) is given by \(_{j}(_{j}^{})\{0,1\}^{N L_{j}}\). The payment vector in \(_{j}\) is \(_{j}^{}(_{j}^{})_{+}^{N}\). Whether bidder \(i\) wins slot \(\) in \(_{j}\) is indicated by \(_{i,,j}(_{j}^{})\{0,1\}\). The payment of bidder \(i\) in \(_{j}\) is \(_{i,j}(_{j}^{})_{+}\). Lastly, \(()\) is defined as \((_{j}(_{j}^{}))_{j[M]}\), representing the collection of all auction outcomes.

**Bidder welfare and ROAS constraints.** The welfare of bidder \(i\) in auction \(_{j}\) is denoted by \(W_{i,j}(_{j}(_{j}^{}))\). Her total welfare across all auctions is given by \(W_{i}(())\). These are formally defined as

\[W_{i}(()) =_{j[M]}W_{i,j}(_{j}(_{j}^{}))\] \[\;\;W_{i,j}(_{j}(_{j}^{})) =_{=1}^{L_{j}}_{j}() v_{i,j}_{i,,j}( _{j}^{})\,. \]

Each bidder is subject to a _return-on-ad-spend (ROAS)_ constraint. This mandates that her total expenditure across all auctions be 

[MISSING_PAGE_FAIL:4]

significant margin in her ROAS constraint by winning auction 2, where the payment to secure a win is minimal. This allows her to increase her bid and outbidder 1 in auction 1 without violating her overall ROAS constraint. Essentially, she offsets the additional cost in auction 1 using the value advantage gained from auction 2.

By setting personalized reserve prices, the platform can raise the payment bidder 2 needs to make in auction 2, thereby reducing her manipulative influence. More specifically, in the absence of reserve prices, bidders who have high aggregate values across auctions might excessively overrid. This allows them to manipulate outcomes in specific auctions by balancing out their costs with the values secured from other auctions. Introducing personalized reserve prices makes this kind of overbidding more costly, and as a result, decreases bidders' overall manipulative power.

### Personalized reserve prices using ML advice

Here, we focus on the following notion of _approximate reserve prices_ with which we can reduce bidders' manipulative power, as exemplified in Example 3.1, and thereby improve individual welfare.

**Definition 3.1** (\(\)-accurate ML advice and approximate reserve prices).: _Suppose there exists ML advice \((_{i,j})_{i,j[N]}\) in the form of a lower-confidence bound. If \(_{i,j}[_{i,j},v_{i,j})\) for any bidder \(i[N]\) and auction \(j[M]\) with some \((0,1)\), we say the ML advice is \(\)-accurate. Further, if the platform sets \(n_{i,j}=_{i,j}\), we say reserve prices \(\) are \(\)-approximate._

The gap between the lower bound \(_{i,j}\) and the true value \(v_{i,j}\) in Definition (3.1) represents the inaccuracies of the platform's ML advice. In other words, \(\) can be perceived as a quality measure of the platform's ML advice for advertiser value, such that a larger \(\) represents better advice quality.

Furthermore, ML advice in online advertising settings generally concerns predicting advertiser values with historical conversion data and produces confidence intervals of advertiser values (see e.g. (Gilton et al., 2010; Gilton et al., 2011; Gilton et al., 2012; Gilton et al., 2013)). We remark that these confidence intervals can be viewed as a special case of the lower-confidence type of ML advice in Definition (3.1): suppose the platform utilizes some ML model to predict the true value \(v_{i,j}\) of bidder \(i\) in auction \(j\), and produces a confidence interval \((_{i,j},_{i,j}) v_{i,j}\) with \(_{i,j},v_{i,j}>0\). The platform can then choose a personalized reserve \(r_{i,j}=_{i,j}\), which is \(\)-approximate for \(=_{i,j}/_{i,j}(0,1)\) because \(_{i,j}<_{i,j}=_{i,j}=r_{i,j}<v_{i,j}\).

Furthermore, in Definition 3.1, it is assumed that the ML advice \(_{i,j}\) is a true lower bound on bidder \(i\)'s value in auction \(j\). This assumption can be relaxed to high probability statements: suppose we possess some prediction \(_{i,j}\) for \(v_{i,j}\) that satisfies \([_{i,j}-v_{i,j}]<\) with high probability (w.h.p.) for some known \(\). Then, the confidence interval \((_{i,j}-,_{i,j}+)\) contains \(v_{i,j}\) w.h.p. The platform can then set a personalized reserve \(r_{i,j}=_{i,j}-\). With such personalized reserve prices derived from probabilistic ML advice, all results in this paper remain valid w.h.p.

We note that the ML advice accuracy parameter \(\) can be considered a lower bound on advertiser value approximations. All our results remain valid if each advertiser's approximation factor is no less than \(\). If each bidder \(i\) has an approximation factor \(_{i}\), then \(\) can represent the minimum among all \(_{i}\). We conclude this section with the following remark.

**Remark 3.1**.: _Implementing \(\)-approximate personalized reserve prices in an allocation-anonymous auction does not impact anonymity. This is because \(<1\) and thus all bidders clear their reserves._

## 4. Individual Welfare Guarantees for VCG with ML advice

In the motivating Example 3.1, we observe that ML advice and corresponding \(\)-approximate reserves allow the parallel auctions to safeguard welfare for individual bidders by increasing payments and consequently limit the manipulative behavior of bidders who face significantly less competition in certain auctions. In this section, through the following Theorem 4.1, we formalize this intuition for the classic VCG auction and present a quantitative measure for the relationship between overall individual welfare and ML advice when incorporated in the form of approximate reserves.

**Theorem 4.1** (Lower bound for VCGs with approximate reserves).: _Let \((_{j})_{j[M]}\) be VCG auctions, and personalized reserve prices \(\) be \(\)-approximate as in Definition 3.1. Fix an autobidder \(i[K]\) who adopts a bid multiplier \(_{i}>1\) (see Section 2.2), so \(_{i}=_{i}\). Recall \(_{-i}()\) as defined in Definition 2.4. Then the individual welfare guarantee (as defined in Definition 2.5) is bounded as:_

\[_{_{i,j}_{-i}(_{i}_{i})}_{i}(X( ))}{}_{i}}\ \ 1--1}}_{i}}{}_{i}}\]

_where \(}_{-i}=_{j i}}_{j}\)._

Details on implementation of VCG with personalized reserve prices can be found in Definition 2.3 and Example B.2. We defer our proof for Theorem 4.1 to Section C.1, and here we provide some intuition for the individual welfare bound in the theorem.

Given our understanding of the individual welfare metric from Definition 2.5, Theorem 4.1 implies that for a given bid multiplier \(_{i}\), and across all potential outcomes driven by any competing bid profiles (including non-uniform bidding) that meet every bidder's ROAS constraints, bidder \(i\) is guaranteed to retain at the very least a fraction of

\[1--1}}_{-i}}{}_{i}}\]

of the welfare anticipated in the most efficient outcome.

This welfare assurance is particularly broad in scope. It doesn't hinge on predefined assumptions about the strategic decisions of other bidders and remains applicable across all bid profiles that adhere to the bidders' ROAS criteria. An important nuance is that our outlined bounds don't rely on the notion of an autobidding equilibrium. This is rooted in the observation that in real-world applications, autobidders might not consistently reach an equilibrium state (meaning a mutually best response among bid profiles). However, typical bidding algorithms tend to stabilize on bid profiles where every bidder's constraints are met (Gilton et al., 2010; Gilton et al., 2011; Gilton et al., 2012). Consequently, even if the strategies of bidder \(i\)'s competitors are multifaceted and tailored to achieve varying objectives, Theorem 4.1 remains applicable, contingent only on the resulting bid profile being feasible.

The main takeaway from Theorem 4.1 is that with more accurate ML-based predictions for valuations (i.e., a larger \(\)), auctions can set higher approximate reserves, leading to enhanced individual welfare guarantees for each bidder. To provide some insight into the term \(-1}_{i,i}}{_{i}}\), in the bound: Increasing either \(\) (through enhanced accuracy of ML-based valuations) or the bid multiplier \(_{i}\) makes it costlier for competitors to outbidder \(i\) in certain auctions. This makes it more challenging for them to cover the costs arising from aggressive overbuilding, thereby curbing their manipulative influence and consequently bolstering the welfare guarantees for bidder \(i\). This observation is consistent with the insights derived from Example 3.1. Additionally, the ratio \(_{i,i}}{_{i,i}}\) reflects bidder \(i\)'s relative market presence compared to other competitors. Our results indicate that a minor market presence can render bidders more susceptible to the manipulative tactics of others, leading to weaker individual welfare guarantees.

We recognize that the individual welfare lower bound guarantee in Theorem 4.1, specifically \(1--1}_{i,i}}{_{i,i}}\), may be negative, rendering it meaningless for a small advertiser, specifically advertiser \(i\) with a very small market share \(_{i,i}}{_{i,i}}\) resulting from a large number of bidders \(N\). However, based on the proof provided for Theorem 4.1, in Section 4.1, we present a tighter individual welfare guarantee that replaces \(_{-i}\) in the numerator--total welfare summed over the \(N-1\) competitors of bidder \(i-\)with the total welfare of a potentially much smaller subset of bidder \(i\)'s competitors, leading to a tighter bound for small advertisers.

The following theorem states the welfare bound in Theorem 4.1 is tight; see Appendix C.3 for proof.

**Theorem 4.2** (Matching lower bound).: _For any \((0,1)\), \(>1\), and \(R-1}\), there exists values \(_{+}^{N M}\) and \(\)-approximate reserves \(_{+}^{N M}\), such that there is a bidder \(i\) with multiplier \(_{i}=\) and relative market share \(_{i}}{_{-i}}=R\), who has an individual welfare guarantee_

\[_{_{+}_{-i}(_{i}_{i})}( ())}{OPT_{i}}=1--1}_{-i}}{ OPT_{i}}.\]

### A tighter individual welfare guarantee

The individual welfare lower bound in Theorem 4.1, namely \(1--1}_{-i,i}}{_{i,i}}\), may become small when \(_{-i}\) is large under a large number of bidder \(N\). In this subsection, we present a tighter individual welfare guarantee that does not depend on the total efficient welfare of all bidder \(i\)'s competitors \(_{-i}\), but instead only the total welfare of a subset of \(i\)'s competitors. Our tighter lower bound relies on the following definitions:

\[_{i}=\{j[M]:_{i,j}>0\}, \] \[_{i}(k)=\{j_{i}:_{k,j}>0,_{k, j}_{i,j}\},\]

See the definition of a maximal set cover in Eq. (8) in the Appendix C.1. Here, recall \(_{i,j}\) is the welfare of bidder \(i\) in auction \(_{j}\) under the efficient outcome; see Eq. (3); \(_{i}\) is the collection of auctions wherein bidder \(i\) can potentially experience a welfare loss due to competitors' overbuilding; \(_{i}(k)\) is the collection of auctions where competitor \(k\) could potentially cause bidder \(i\) to lose welfare (notice that competitor \(k\) can win an auction \(j\) only if \(_{k,j}>0\)). We give an example of these definitions in the following: consider an instance consisting of \(2\) single slot VCG auctions (i.e. SPA) and \(3\) bidders with the following advertiser values

   & SPA 1 & SPA 2 & SPA 3 \\   bidder 1 & \(_{1,1}=2\) & \(_{1,2}=5\) & \(_{1,3}=0\) \\  bidder 2 & \(_{2,1}=1\) & \(_{2,2}=1\) & \(_{2,3}=10\) \\  bidder 3 & \(_{1,1}=0\) & \(_{1,2}=4\) & \(_{1,3}=10\) \\   Under the efficient outcome, bidder \(1\) wins auctions \(1\) and \(2\), and therefore bidder \(1\) can potentially lose welfare in auctions \(1\) and \(2\), so \(_{1}=\{1,2\}\). Now, for competitor \(k=2\), it may be possible that bidder \(2\) solely outbidders bidder \(1\) to win both auctions \(1\) and \(2\), i.e., \(_{1}(2)=\{1,2\}\). Similarly, for competitor \(k=3\), she can only outbidder \(1\) in auction \(2\) so that \(_{1}(3)=\{2\}\).

With these definitions, we now present a tighter individual welfare guarantee than that of Theorem 4.1.

**Theorem 4.3**.: _Consider that \((_{j})_{j[M]}\) are VCG auctions, and the personalized reserve prices \(\) are \(\)-approximate as per Definition 3.1. Fix an autobidder \(i[K]\) who adopts a bid multiplier \(_{i}>1\), ensuring \(_{i}=_{i}_{i}\). The individual welfare guarantee, as described in Definition 2.5, is bounded as_

\[_{_{+}_{-i}(_{i}_{i})}( ())}{OPT_{i}}\] \[ 1--}(i ):_{i}(k)_{k}}{OPT_{i}},\]

_where \(_{-i}()\) is defined in Definition 2.4._

To illustrate the tighter welfare guarantee in Theorem 4.3 w.r.t. that in Theorem 4.1, consider the following example with \(N=3\) bidders, \(M=3\) single slot SPA auctions, and parameters \(>0\) to be small and \(X>0\) to be large.

   & SPA 1 & SPA 2 & SPA 3 \\   bidder 1 & \(_{1,1}=1\) & \(_{1,2}=1\) & \(_{1,3}=0\) \\  bidder 2 & \(_{2,1}=1+\) & \(_{2,2}=1-\) & \(_{2,3}=0\) \\  bidder 3 & \(_{1,k}=0\) & \(_{2,2}=0\) & \(_{1,k}=to the number of keywords advertisers actually target, thereby making our performance guarantee in Theorem 4.3 superior to that in Theorem 4.1

## 5. VCG Yields Best Guarantee in Broad Class of Auctions

Having presented an individual welfare guarantee in the previous Section 4 that improves based on the platform's ML advice accuracy, a natural question arises: For a given level of accuracy \(\), can one achieve a universally better individual welfare guarantee than that of Theorem 4.1 by considering auction formats other than VCG? In this section, we demonstrate that the answer is negative when we restrict the auction to a broad class of truthful mechanisms (Definition 2.1) and anonymous allocations (Definition 2.2).

In the subsequent theorem, we demonstrate that no allocation-anonymous, truthful auction \(\) augmented by \(\)-approximate reserves (see Definition 3.1) can universally surpass VCG. That is, for any \(\), there exists a problem instance where a bidder's welfare guarantee does not exceed the individual welfare lower bound for VCG as presented in Theorem 4.1.

**Theorem 5.1**.: _Let \(\) be any single-slot auction format (with position bias \(=1\)) that is allocation-anonymous, truthful, and possibly randomized. Then, there exists an instance of \(\) parallel auctions \((_{i})_{j[_{1}]}\) of format \(\), \(N\) bidders with values \(v_{*}^{N M}\), and an autobidder \(i\) with multiplier \(a_{i}>1\) (refer to Section 2.2), such that there exists a feasible bid profile \(\) in which \(_{i}=a_{i}a_{i}_{i}_{*}^{M}\) leading to the following welfare upper bound for autobidder \(i\):_

\[[W_{i}(X())]}{[OPT_{i}]}  1--1}[OPT_{i}]}{ [OPT_{i}]}\]

_Here, the expectation is taken with respect to possible randomness in \(\)._

Our proof strategy for Theorem 5.1 hinges on the construction of a challenging autobidding instance for any given auction \(\). In this instance, a specific bidder consistently finds himself with a diminished individual welfare. We showcase that, within this context, there's a bidder \(i\) whose welfare is constricted to the upper bound mentioned in the theorem.

This method of construction is influenced by Example 3.1. In this example, the reduced welfare for the bidder \(i\) stems from other bidders consistently outbidding \(i\) in auctions where \(i\)'s value is the highest. These competitors then compensate for their aggressive bids using the gains from other auctions where they face little to no competition.

Building on this insight, in the problematic instance outlined in the proof of Theorem 5.1, we elevate the individual welfare for our target bidder \(i\). We do this by setting up auctions where each of \(i\)'s competitors is the sole participant with a non-zero bid. Such "no-competition" auctions act as a buffer, allowing these competitors to recover costs associated with outbidding bidder \(i\) in auctions where \(i\) has the highest value. The detailed proof is available in Appendix D.2.

## 6. Extension: Individual Welfare Guarantees for GSP and GFP

In this section, we extend our individual welfare guarantees for the VCG auction from Theorem 4.1 to both the GSP and GFP auctions, which are non-truthful.

Further, as discussed in Section 2.2, uniform bidding (i.e., setting the same bid multiplier for all auctions) is optimal only in truthful auctions. For GSP and GFP, instances can be constructed where non-uniform bidding strictly outperforms uniform bidding (for more details, see e.g., (Goyal et al., 2017)). Therefore, for GSP and GFP autobidding instances, we do not impose any constraints on the bid values of this, except that they should be undominated. We define a bid value \(_{i}_{*}^{M}\) as undominated for bidder \(i\) if no other bid value \(_{i}^{}_{*}^{M}\) exists that consistently yields a higher welfare than \(_{i}\) across all possible competing bid profiles. Formally, \(}}_{i}^{}_{*}^{M}\) such that \(W_{i}(X(_{i},_{-i}))<W_{i}(X(_{i}^{},_{-i}))\) for all \(_{-i}_{*}^{(N-1)(M)}\). The following lemma provides a lower bound for undominated bids in scenarios with \(\)-approximate reserves.

**Lemma 6.1** (Lemma 4.7 & 4.9 of (Chern et al., 2017)).: _Consider the setting where \((_{j})_{j[M]}\) are all GSP auctions or GFP auctions, and reserve prices \(\) are \(\)-approximate. Denote \(\) to be the set of bid profiles in which each bid is undominated and satisfies all bidders' ROAS constraints. Then for any \(\), \(b_{i,j}\) must satisfy \(b_{i,j} r_{i,j} b_{i,j}\) for any bidder \(i[N]\) and auction \(_{j}\)._

Finally, our main theorem for this section is the following:

**Theorem 6.2** (Individual welfare guarantee for GSP/GFP).: _Consider that all auctions \((_{j})_{j[M]}\) are either GSP or GFP auctions. Let the reserve prices \(\) be \(\)-approximate, and the values \(\) be \(\)-separated with \(>\). Values are termed as \(\)-separated if, in all auctions, the value of any bidder is at least \(\) times any lesser value from a competing bidder (for a formal definition, see Definition C.2). Now, consider any undominated bid profile \(\), where \(\) is a subset of \(\) representing all undominated bids that satisfy every bidder's ROAS constraint (refer to Equation (2)). In this context, the individual welfare guarantee, as described in Definition 2.5, is bounded by:_

\[_{}(X())}{OPT_{i}} 1-}}{OPT_{i}}.\]

Details regarding the implementation of GSP and GFP with personalized reserve prices are provided in Definition 2.3 and further illustrated in Example B.2. The proof of Theorem 6.2 is detailed in Appendix E.1.

When we compare the individual welfare guarantees of Theorem 4.1 (for VCG) with Theorem 6.2 (for GSP/GFP), some observations emerge. Given that values are \(\)-separated and ML advice possesses \(\)-accuracy, GSP/GFP offers superior individual welfare guarantees over VCG when bidders opt for smaller uniform multipliers in VCG, i.e., \(a_{i}-1<-\). However, for larger multipliers, where \(a_{i}-1>-\), the individual welfare within VCG surpasses that in the discussed non-truthful auctions.

## 7. Numerical Study

Recall from Sections 4 and 6 that we theoretically demonstrated how setting personalized reserve prices with ML advice (refer to Definition 3.1) ensures individual bidder-level worst-case welfare guarantees in VCG, GSP, and GFP auctions. Moreover, these guarantees improve as the accuracy of the ML advice increases. In this section, we provide a practical counterpart to this theoretical finding for worst-case scenarios. We illustrate how employing personalized reserve prices, informed by ML advice, can protect individual welfare on an average basis. This demonstration uses semi-synthetic data, which is derived from genuine auction data from a search ad platform.

It's worth noting that our experiments in this section are limited to VCG auctions. This choice is deliberate, primarily because bidders' bidding strategies in VCG can be confined to uniform bidding (refer to Proposition B.1 and subsequent discussions). Incorporating near-optimal or best response bidding strategies in GSP and GFP auctions adds a layer of complexity without necessarily providing new insights, as discussed in .

We obtain semi-synthetic data from ad auction logs of a search ad platform, using it to simulate VCG auctions for autobidders. Specifically, each dataset entry \(j\) includes all necessary details to replicate an auction. This includes the number of ad slots sold \(L_{j}\), the CTRs for each slot denoted as \(_{j}=(_{j}(1),,_{j}(L_{j}))^{L_{j}}\), and a list of candidate advertisers along with their respective conversion values \(u_{i,j}\) and so forth. The conversion value for an advertiser represents the anticipated monetary benefit they would obtain from a user's conversion action, such as a download, email sign-up, in-app purchase, and similar actions.

It's crucial to note that our empirical study primarily aims to corroborate the central insights of our theoretical observations, rather than assessing the individual welfare of real systems in active use. For a specified accuracy level \(\) belonging to \(\{0.25,0.5,0.75\}\), we independently sample \(_{i,j}^{}\) - Uniform \([,1]\) for each \(i,j\). Subsequently, we determine the ML advice as \(_{i,j}^{}=_{i,j}^{}_{i,j}\). Clearly, the ML advice generated in this manner is \(\)-accurate, meaning \(_{i,j}^{}\) lies in the interval \([_{0,j},u_{i,j}]\), consistent with Definition 3.1.

**Calculating uniform bid multipliers.** For simplicity, and with a slight departure from standard notation, we let the accuracy level \(=0\) signify the imposition of no-reserve prices. Using a reserved portion of our data, we determine each advertiser's uniform bid multiplier for every accuracy level \(\) in the set \(\{0.25,0.5,0.75\}\). We employ gradient descent for this task, mimicking prevalent uniform bidding practices. This choice is motivated by the widespread use of descent/primal-dual methods in real-world autobidding. These techniques have demonstrated near-optimal convergence and commendable performance guarantees, as evidenced by works such as . After these computations, we obtain our bid multipliers denoted \(_{i}^{B}\). For a comprehensive explanation on calculating these uniform bid multipliers, we direct readers to Appendix F.1.

For each accuracy level \(\) in the set \(\{0,0.25,0.5,0.75\}\) (where \(=0\) represents the control experiment without personalized reserve prices), let \(W_{i}^{}\) denote the realized total welfare for advertiser \(i[N]\) across \(M\) VCG auctions. This welfare is calculated with respect to bid multipliers \((_{i}^{})_{i[N]}\), values \(=(u_{i})_{i[N],j[M]}\), ad slot counts \((L_{j})_{j[M]}\), and CTRs \((_{j})_{j[M]}\).

Given that OPT\({}_{1}\) represents the welfare of bidder \(i[N]\) under the efficient outcome (as defined in Eq. (3)), we introduce the empirical cumulative distribution function (CDF) \((z;)\) to represent the proportion of advertisers whose realized welfare does not exceed \(z\) times their efficient outcome welfare. Here, \(z\) can be either less or greater than \(1\). Specifically, \((z;)\) for \(z<1\) shows the proportion of advertisers who experience a welfare deficit relative to OPT\({}_{1}\).

In Figure 1, we depict \((z;)\) for the given \(\) values. Observations show that, for \(z<1\), \((z;)\) diminishes as \(\) rises. This indicates that enhancing the accuracy of ML advice in setting personalized reserve prices reduces the proportion of advertisers enduring a welfare reduction relative to the efficient outcome. For instance, when \(z=0.8\), indicating a \(20\%\) welfare loss from the efficient outcome, the proportion of advertisers facing this loss is \(17\%\) without reserve prices (\(=0\)). This proportion reduces to \(13\%\), \(11\%\), and \(8\%\) for \(\) values of \(0.25\), \(0.5\), and \(0.75\), respectively. The primary insight is that better ML advice empowers the ad platform to reduce the proportion of advertisers suffering from welfare losses compared to the efficient outcome. Another observation is that the empirical CDF tends toward a step function with a significant shift at \(z=1\), suggesting that as ML accuracy improves, an increasing number of advertisers through their efficient outcome welfare.