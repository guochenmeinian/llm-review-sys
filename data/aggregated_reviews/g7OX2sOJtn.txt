ID: g7OX2sOJtn
Title: LeanDojo: Theorem Proving with Retrieval-Augmented Language Models
Conference: NeurIPS
Year: 2023
Number of Reviews: 15
Original Ratings: 7, 8, 9, 8, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
Original Confidences: 3, 5, 4, 2, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1

Aggregated Review:
### Key Points
This paper presents LeanDojo, an open-source toolkit for theorem proving in Lean, which includes tools for data extraction, a dataset of Lean theorems and proofs, and the ReProver model for automatic theorem proving. LeanDojo facilitates the extraction of complete proof trees from Lean3/mathlib3, generating training data for machine learning approaches. The dataset features a predefined train/validation/test split and is structured as a directed-acyclic graph with mathlib files as nodes. ReProver employs a transformer model that minimizes the difference between predicted and actual cosine similarities of state and premise pairs, excelling in premise selection and theorem proving tasks, even outperforming GPT-4 in tactic generation. The authors also address the relationship between formal proofs and computer programs through the Curry-Howard isomorphism and provide updated resources detailing the mathematical areas covered by mathlib3.

### Strengths and Weaknesses
**Strengths:**
- LeanDojo fills a critical gap in the literature by providing an accessible, open-source environment for formal theorem proving, adhering to best practices in reproducibility with detailed specifications of training setups and dataset commits.
- The efficient design of ReProver reduces computational requirements to five days on a single GPU, and the toolkit's commitment to open-source principles enhances its value to the theorem proving community.
- The paper effectively clarifies the relationship between formal proofs and programming, improving understanding of theorem proving and addressing concerns regarding proof correctness and computational aspects.

**Weaknesses:**
- The dataset lacks abstract syntax trees (ASTs), which are essential for machine learning methods, and the claim of ReProver's efficiency may not be feasible for all users, as 120 hours of GPU time could be prohibitive.
- A more thorough comparison of LeanDojo with previous environments like LeanStep and lean-gym is lacking, which would benefit readers in understanding the differences and improvements.
- The paper does not clearly indicate the patch used to resolve full names of premises in Lean3, nor does it provide comprehensive installation instructions. Additionally, it does not cover all proof styles, specifically calculational proofs, which may limit its applicability.

### Suggestions for Improvement
We recommend that the authors improve the dataset by including ASTs, as they are essential for machine learning methods. To enhance model training, consider implementing a two-iteration approach where initial training examples are randomly selected, followed by internal cross-validation to utilize false positives as in-file negatives in subsequent learning iterations. We also suggest clarifying the dataset split used for training ReProver to avoid potential data leakage concerns. Furthermore, we recommend improving the comparison of LeanDojo with LeanStep and lean-gym by including a detailed description of their functionalities and implementations, ideally summarized in a table. This should clarify how LeanDojo enhances usability and performance over its predecessors. Additionally, the authors should clearly indicate the patch used for resolving full names of premises in Lean3 and provide comprehensive installation instructions. To enhance the paper's accessibility, we recommend simplifying technical language and providing more illustrative examples. Lastly, we encourage the authors to explore the potential of integrating more powerful LLMs while addressing the challenges posed by Lean's unique syntax and explicitly stating the types of proofs LeanDojo supports and does not support to clarify its limitations.